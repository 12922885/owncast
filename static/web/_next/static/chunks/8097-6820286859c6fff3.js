"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8097],{73706:function(e,n,a){a.d(n,{Z:function(){return d}});var s=a(85893),t=a(67294),l=a(94594),r=a(41983),i=a(39664),c=a(90745),o=a(99519);let d=e=>{let{apiPath:n,checked:a,reversed:d=!1,configPath:u="",disabled:h=!1,fieldName:v,label:g,tip:m,useSubmit:f,onChange:p}=e,[x,b]=(0,t.useState)(null),j=null,y=(0,t.useContext)(o.aC),{setFieldInConfigState:k}=y||{},C=()=>{b(null),clearTimeout(j),j=null},N=async e=>{if(f){b((0,r.kg)(r.Jk));let a=d?!e:e;await (0,c.Si)({apiPath:n,data:{value:a},onSuccess:()=>{k({fieldName:v,value:a,path:u}),b((0,r.kg)(r.zv))},onError:e=>{b((0,r.kg)(r.Un,"There was an error: ".concat(e)))}}),j=setTimeout(C,c.sI)}p&&p(e)},S=null!==x&&x.type===r.Jk;return(0,s.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[g&&(0,s.jsx)("div",{className:"label-side",children:(0,s.jsx)("span",{className:"formfield-label",children:g})}),(0,s.jsxs)("div",{className:"input-side",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)(l.Z,{className:"switch field-".concat(v),loading:S,onChange:N,defaultChecked:a,checked:a,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:h}),(0,s.jsx)(i.E,{status:x})]}),(0,s.jsx)("p",{className:"field-tip",children:m})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},68097:function(e,n,a){a.r(n),a.d(n,{default:function(){return x}});var s=a(85893),t=a(54907),l=a(71577),r=a(94184),i=a.n(r),c=a(67294),o=a(99519),d=a(82661),u=a(90745),h=a(41983),v=a(52018),g=a(39664),m=a(37174),f=a(73706);let{Panel:p}=t.Z;function x(){let[e,n]=(0,c.useState)(null),[a,r]=(0,c.useState)(null),[x,b]=(0,c.useState)(!1),j=(0,c.useContext)(o.aC),{serverConfig:y,setFieldInConfigState:k}=j||{},{setMessage:C}=(0,c.useContext)(d.k),{s3:N}=y,{accessKey:S="",acl:w="",bucket:P="",enabled:E=!1,endpoint:Z="",region:T="",secret:z="",servingEndpoint:M="",forcePathStyle:U=!1}=N;if((0,c.useEffect)(()=>{n({accessKey:S,acl:w,bucket:P,enabled:E,endpoint:Z,region:T,secret:z,servingEndpoint:M,forcePathStyle:U}),b(E)},[N]),!e)return null;let I=()=>{r(null),clearTimeout(null)},K=a=>{let{fieldName:s,value:t}=a;n({...e,[s]:t})},L=async()=>{r((0,h.kg)(h.Jk)),await (0,u.Si)({apiPath:u.$w,data:{value:e},onSuccess:()=>{k({fieldName:"s3",value:e,path:""}),r((0,h.kg)(h.zv,"Updated.")),setTimeout(I,u.sI),C("Changing your storage configuration will take place the next time you start a new stream.")},onError:e=>{r((0,h.kg)(h.Un,e)),setTimeout(I,u.sI)}})},V=e=>{b(e),K({fieldName:"enabled",value:e})},J=e=>{K({fieldName:"forcePathStyle",value:e})},_=i()({"edit-storage-container":!0,"form-module":!0,enabled:x}),A=function(e,n){let{endpoint:a,accessKey:s,secret:t,bucket:l,region:r,enabled:i,servingEndpoint:c,acl:o,forcePathStyle:d}=e;if(i){if(a&&(0,m.jv)(a)&&s&&t&&l&&r&&(i!==n.enabled||a!==n.endpoint||s!==n.accessKey||t!==n.secret||l!==n.bucket||r!==n.region||!n.servingEndpoint&&""!==c||n.servingEndpoint&&c!==n.servingEndpoint||!n.acl&&""!==o||n.acl&&o!==n.acl||d!==n.forcePathStyle))return!0}else if(i!==n.enabled)return!0;return!1}(e,N);return(0,s.jsxs)("div",{className:_,children:[(0,s.jsx)("div",{className:"enable-switch",children:(0,s.jsx)(f.Z,{apiPath:"",fieldName:"enabled",label:"Use S3 Storage Provider",checked:e.enabled,onChange:V})}),(0,s.jsxs)("div",{className:"form-fields",children:[(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(v.nv,{...u.zm.endpoint,value:e.endpoint,onChange:K})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(v.nv,{...u.zm.accessKey,value:e.accessKey,onChange:K})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(v.nv,{...u.zm.secret,value:e.secret,onChange:K})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(v.nv,{...u.zm.bucket,value:e.bucket,onChange:K})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(v.nv,{...u.zm.region,value:e.region,onChange:K})}),(0,s.jsx)(t.Z,{className:"advanced-section",children:(0,s.jsxs)(p,{header:"Optional Settings",children:[(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(v.nv,{...u.zm.acl,value:e.acl,onChange:K})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(v.nv,{...u.zm.servingEndpoint,value:e.servingEndpoint,onChange:K})}),(0,s.jsx)("div",{className:"enable-switch",children:(0,s.jsx)(f.Z,{...u.zm.forcePathStyle,fieldName:"forcePathStyle",checked:e.forcePathStyle,onChange:J})})]},"1")})]}),(0,s.jsxs)("div",{className:"button-container",children:[(0,s.jsx)(l.Z,{type:"primary",onClick:L,disabled:!A,children:"Save"}),(0,s.jsx)(g.E,{status:a})]})]})}},82661:function(e,n,a){a.d(n,{k:function(){return i}});var s=a(85893),t=a(67294),l=a(45697),r=a.n(l);let i=t.createContext({message:null,setMessage:e=>null}),c=e=>{let{children:n}=e,[a,l]=(0,t.useState)("");return(0,s.jsx)(i.Provider,{value:{message:a,setMessage:l},children:n})};c.propTypes={children:r().element.isRequired},n.Z=c},41983:function(e,n,a){a.d(n,{Jk:function(){return d},Un:function(){return c},dG:function(){return h},kg:function(){return g},zv:function(){return u}});var s=a(85893),t=a(89739),l=a(21640),r=a(50888),i=a(28058);let c="error",o="invalid",d="proessing",u="success",h="warning",v={[u]:{type:u,icon:(0,s.jsx)(t.Z,{style:{color:"green"}}),message:"Success!"},[c]:{type:c,icon:(0,s.jsx)(l.Z,{style:{color:"red"}}),message:"An error occurred."},[o]:{type:o,icon:(0,s.jsx)(l.Z,{style:{color:"red"}}),message:"An error occurred."},[d]:{type:d,icon:(0,s.jsx)(r.Z,{}),message:""},[h]:{type:h,icon:(0,s.jsx)(i.Z,{style:{color:"#fc0"}}),message:""}};function g(e,n){return e&&v[e]?n?{type:e,icon:v[e].icon,message:n}:v[e]:null}},99519:function(e,n,a){a.d(n,{aC:function(){return u}});var s=a(85893),t=a(67294),l=a(45697),r=a.n(l),i=a(64777),c=a(90745);let o={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[c.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},d={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},u=t.createContext({...d,serverConfig:o,setFieldInConfigState:e=>null}),h=e=>{let{children:n}=e,[a,l]=(0,t.useState)(d),[r,c]=(0,t.useState)(o),h=async()=>{try{let e=await (0,i.rQ)(i.Q_);l({...e})}catch(n){}},v=async()=>{try{let e=await (0,i.rQ)(i.bl);c(e)}catch(n){}},g=e=>{let{fieldName:n,value:a,path:s}=e,t=s?{...r,[s]:{...r[s],[n]:a}}:{...r,[n]:a};c(t)};(0,t.useEffect)(()=>{let e=null;return h(),e=setInterval(h,i.NE),v(),()=>{clearInterval(e)}},[]);let m={...a,serverConfig:r,setFieldInConfigState:g};return(0,s.jsx)(u.Provider,{value:m,children:n})};h.propTypes={children:r().element.isRequired},n.ZP=h}}]);
//# sourceMappingURL=8097-6820286859c6fff3.js.map