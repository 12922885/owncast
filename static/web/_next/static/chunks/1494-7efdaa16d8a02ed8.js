"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1494],{82911:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(1413),a=n(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 708c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z"}}]},name:"question-circle",theme:"filled"},l=n(42135),o=function(e,t){return a.createElement(l.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s}))};o.displayName="QuestionCircleFilled";var i=a.forwardRef(o)},84674:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(1413),a=n(67294),s={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm288.5 682.8L277.7 224C258 240 240 258 224 277.7l522.8 522.8C682.8 852.7 601 884 512 884c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372c0 89-31.3 170.8-83.5 234.8z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372c89 0 170.8-31.3 234.8-83.5L224 277.7c16-19.7 34-37.7 53.7-53.7l522.8 522.8C852.7 682.8 884 601 884 512c0-205.4-166.6-372-372-372z",fill:t}}]}},name:"stop",theme:"twotone"},l=n(42135),o=function(e,t){return a.createElement(l.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s}))};o.displayName="StopTwoTone";var i=a.forwardRef(o)},15746:function(e,t,n){var r=n(21584);t.Z=r.Z},27049:function(e,t,n){var r=n(87462),a=n(4942),s=n(94184),l=n.n(s),o=n(67294),i=n(53124),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};t.Z=function(e){var t,n=o.useContext(i.E_),s=n.getPrefixCls,d=n.direction,u=e.prefixCls,m=e.type,f=void 0===m?"horizontal":m,h=e.orientation,x=void 0===h?"center":h,p=e.orientationMargin,j=e.className,g=e.children,Z=e.dashed,y=e.plain,v=c(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),b=s("divider",u),w=x.length>0?"-".concat(x):x,C=!!g,k="left"===x&&null!=p,N="right"===x&&null!=p,T=l()(b,"".concat(b,"-").concat(f),(t={},(0,a.Z)(t,"".concat(b,"-with-text"),C),(0,a.Z)(t,"".concat(b,"-with-text").concat(w),C),(0,a.Z)(t,"".concat(b,"-dashed"),!!Z),(0,a.Z)(t,"".concat(b,"-plain"),!!y),(0,a.Z)(t,"".concat(b,"-rtl"),"rtl"===d),(0,a.Z)(t,"".concat(b,"-no-default-orientation-margin-left"),k),(0,a.Z)(t,"".concat(b,"-no-default-orientation-margin-right"),N),t),j),O=(0,r.Z)((0,r.Z)({},k&&{marginLeft:p}),N&&{marginRight:p});return o.createElement("div",(0,r.Z)({className:T},v,{role:"separator"}),g&&"vertical"!==f&&o.createElement("span",{className:"".concat(b,"-inner-text"),style:O},g))}},71230:function(e,t,n){var r=n(92820);t.Z=r.Z},37926:function(e,t,n){n.d(t,{e:function(){return d}});var r=n(85893),a=n(85402),s=n(71577),l=n(21640),o=n(82911),i=n(84674),c=n(64777);let d=e=>{let{user:t,isEnabled:n,label:d,onClick:u}=e;async function m(e){let{id:t}=e;try{let r=await (0,c.rQ)(c.NM,{data:{userId:t,enabled:!n},method:"POST",auth:!0});return r.success}catch(a){console.error(a)}return!1}let f=n?"ban":"unban",h=n?(0,r.jsx)(l.Z,{style:{color:"var(--ant-error)"}}):(0,r.jsx)(o.Z,{style:{color:"var(--ant-warning)"}}),x=(0,r.jsxs)(r.Fragment,{children:["Are you sure you want to ",f," ",(0,r.jsx)("strong",{children:t.displayName}),n?" and remove their messages?":"?"]}),p=()=>{a.Z.confirm({title:"Confirm ".concat(f),content:x,onCancel(){},onOk:()=>new Promise((e,n)=>{let r=m(t);r?setTimeout(()=>{e(r),null==u||u()},3e3):n()}),okType:"danger",okText:n?"Absolutely":null,icon:h})};return(0,r.jsx)(s.Z,{onClick:p,size:"small",icon:n?(0,r.jsx)(i.Z,{twoToneColor:"#ff4d4f"}):null,className:"block-user-button",children:d||f})};d.defaultProps={label:"",onClick:null}},35691:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(85893),a=n(67294),s=n(94199),l=n(85402),o=n(84485),i=n(71230),c=n(15746),d=n(27049),u=n(26713),m=n(45938),f=n(58091),h=n(96486),x=n(37926),p=n(71577),j=n(21640),g=n(82911),Z=n(84674),y=n(1413),v={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6z",fill:e}},{tag:"path",attrs:{d:"M214 226.7v427.6l298 232.2 298-232.2V226.7L512 125.1 214 226.7zM632.8 328H688c6.5 0 10.3 7.4 6.5 12.7L481.9 633.4a16.1 16.1 0 01-26 0l-126.4-174c-3.8-5.3 0-12.7 6.5-12.7h55.2c5.2 0 10 2.5 13 6.6l64.7 89.1 150.9-207.8c3-4.1 7.9-6.6 13-6.6z",fill:t}},{tag:"path",attrs:{d:"M404.2 453.3c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z",fill:e}}]}},name:"safety-certificate",theme:"twotone"},b=n(42135),w=function(e,t){return a.createElement(b.Z,(0,y.Z)((0,y.Z)({},e),{},{ref:t,icon:v}))};w.displayName="SafetyCertificateTwoTone";var C=a.forwardRef(w),k=n(64777);let N=e=>{var t;let{user:n,onClick:a}=e;async function s(e,t){let{id:n}=e;try{let r=await (0,k.rQ)(k.jr,{data:{userId:n,isModerator:t},method:"POST",auth:!0});return r.success}catch(a){console.error(a)}return!1}let o=null===(t=n.scopes)||void 0===t?void 0:t.includes("MODERATOR"),i=o?"remove moderator":"add moderator",c=o?(0,r.jsx)(j.Z,{style:{color:"var(--ant-error)"}}):(0,r.jsx)(g.Z,{style:{color:"var(--ant-warning)"}}),d=(0,r.jsxs)(r.Fragment,{children:["Are you sure you want to ",i," ",(0,r.jsx)("strong",{children:n.displayName}),"?"]}),u=()=>{l.Z.confirm({title:"Confirm ".concat(i),content:d,onCancel(){},onOk:()=>new Promise((e,t)=>{let r=s(n,!o);r?setTimeout(()=>{e(r),null==a||a()},3e3):t()}),okType:"danger",okText:o?"Yup!":null,icon:c})};return(0,r.jsx)(p.Z,{onClick:u,size:"small",icon:o?(0,r.jsx)(Z.Z,{twoToneColor:"#ff4d4f"}):(0,r.jsx)(C,{twoToneColor:"#22bb44"}),className:"block-user-button",children:i})};N.defaultProps={onClick:null};var T=n(55709),O=n(70241);let M=e=>{let{user:t,connectionInfo:n,children:p}=e,[j,g]=(0,a.useState)(!1),Z=()=>{g(!0)},y=()=>{g(!1)},{displayName:v,createdAt:b,previousNames:w,nameChangedAt:C,disabledAt:k}=t,{connectedAt:M,messageCount:z,userAgent:A}=n||{},P=null,D=w&&[...w];w&&w.length>1&&C&&(P=new Date(C),D.reverse());let E=new Date(b),L=(0,f.Z)(E,"PP pp"),S=P?(0,m.Z)(P):null;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{title:(0,r.jsxs)(r.Fragment,{children:["Created at: ",L,".",(0,r.jsx)("br",{})," Click for more info."]}),placement:"bottomLeft",children:(0,r.jsx)("button",{type:"button","aria-label":"Display more details about this user",className:"user-item-container",onClick:Z,children:p})}),(0,r.jsx)(l.Z,{destroyOnClose:!0,width:600,cancelText:"Close",okButtonProps:{style:{display:"none"}},title:"User details: ".concat(v),open:j,onOk:y,onCancel:y,children:(0,r.jsxs)("div",{className:"user-details",children:[(0,r.jsx)(o.Z.Title,{level:4,children:v}),(0,r.jsxs)("p",{className:"created-at",children:["User created at ",L,"."]}),(0,r.jsxs)(i.Z,{gutter:16,children:[n&&(0,r.jsxs)(c.Z,{md:P?12:24,children:[(0,r.jsx)(o.Z.Title,{level:5,children:"This user is currently connected to Chat."}),(0,r.jsxs)("ul",{className:"connection-info",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Active for:"})," ",(0,m.Z)(new Date(M))]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Messages sent:"})," ",z]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"User Agent:"}),(0,r.jsx)("br",{}),(0,O.AB)(A)]})]})]}),P&&(0,r.jsxs)(c.Z,{md:n?12:24,children:[(0,r.jsx)(o.Z.Title,{level:5,children:"This user is also seen as:"}),(0,r.jsx)("ul",{className:"previous-names-list",children:(0,h.uniq)(D).map((e,t)=>(0,r.jsxs)("li",{className:0===t?"latest":"",children:[(0,r.jsx)("span",{className:"user-name-item",children:e}),0===t?" (Changed ".concat(S," ago)"):""]}))})]})]}),(0,r.jsx)(d.Z,{}),(0,r.jsxs)(u.Z,{direction:"horizontal",children:[k?(0,r.jsxs)(r.Fragment,{children:["This user was banned on ",(0,r.jsx)("code",{children:(0,T.u)(k)}),".",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(x.e,{label:"Unban this user",user:t,isEnabled:!1,onClick:y})]}):(0,r.jsx)(x.e,{label:"Ban this user",user:t,isEnabled:!0,onClick:y}),(0,r.jsx)(N,{user:t,onClick:y})]})]})})]})};M.defaultProps={connectionInfo:null}},55709:function(e,t,n){n.d(t,{K:function(){return c},u:function(){return i}});var r=n(85893),a=n(52206),s=n(58091),l=n(35691),o=n(37926);function i(e){return(0,s.Z)(new Date(e),"MMM d H:mma")}let c=e=>{let{data:t}=e;return(0,r.jsx)(a.Z,{pagination:{hideOnSinglePage:!0},className:"table-container",columns:[{title:"Last Known Display Name",dataIndex:"displayName",key:"displayName",render:(e,t)=>(0,r.jsx)(l.Z,{user:t,children:(0,r.jsx)("span",{className:"display-name",children:e})})},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:e=>i(e),sorter:(e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime(),sortDirections:["descend","ascend"]},{title:"Disabled at",dataIndex:"disabledAt",key:"disabledAt",defaultSortOrder:"descend",render:e=>e?i(e):null,sorter:(e,t)=>new Date(e.disabledAt).getTime()-new Date(t.disabledAt).getTime(),sortDirections:["descend","ascend"]},{title:"",key:"block",className:"actions-col",render:(e,t)=>(0,r.jsx)(o.e,{user:t,isEnabled:!t.disabledAt})}],dataSource:t,size:"small",rowKey:"id"})}}}]);