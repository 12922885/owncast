"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9640],{77891:function(e,n,t){t.d(n,{e:function(){return f}});var r=t(47568),s=t(34051),a=t.n(s),i=t(85893),o=t(85402),l=t(71577),c=t(21640),u=t(82911),d=t(84674),m=t(58827),f=function(e){var n=e.user,t=e.isEnabled,s=e.label,f=e.onClick;function h(){return h=(0,r.Z)(a().mark((function e(n){var r,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,s={userId:r,enabled:!t},e.prev=2,e.next=5,(0,m.rQ)(m.NM,{data:s,method:"POST",auth:!0});case 5:return i=e.sent,e.abrupt("return",i.success);case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),h.apply(this,arguments)}var x=t?"ban":"unban",p=t?(0,i.jsx)(c.Z,{style:{color:"var(--ant-error)"}}):(0,i.jsx)(u.Z,{style:{color:"var(--ant-warning)"}}),j=(0,i.jsxs)(i.Fragment,{children:["Are you sure you want to ",x," ",(0,i.jsx)("strong",{children:n.displayName}),t?" and remove their messages?":"?"]});return(0,i.jsx)(l.Z,{onClick:function(){o.Z.confirm({title:"Confirm ".concat(x),content:j,onCancel:function(){},onOk:function(){return new Promise((function(e,t){var r=function(e){return h.apply(this,arguments)}(n);r?setTimeout((function(){e(r),null===f||void 0===f||f()}),3e3):t()}))},okType:"danger",okText:t?"Absolutely":null,icon:p})},size:"small",icon:t?(0,i.jsx)(d.Z,{twoToneColor:"#ff4d4f"}):null,className:"block-user-button",children:s||x})};f.defaultProps={label:"",onClick:null}},11085:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(29815),s=t(85893),a=t(67294),i=t(94199),o=t(85402),l=t(84485),c=t(25968),u=t(6226),d=t(27049),m=t(26713),f=t(45938),h=t(58091),x=t(96486),p=t(77891),j=t(47568),b=t(34051),v=t.n(b),y=t(71577),k=t(21640),g=t(82911),Z=t(84674),C=t(24478),w=t(58827),T=function(e){var n,t=e.user,r=e.onClick;function a(){return a=(0,j.Z)(v().mark((function e(n,t){var r,s,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,s={userId:r,isModerator:t},e.prev=2,e.next=5,(0,w.rQ)(w.jr,{data:s,method:"POST",auth:!0});case 5:return a=e.sent,e.abrupt("return",a.success);case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),a.apply(this,arguments)}var i=null===(n=t.scopes)||void 0===n?void 0:n.includes("MODERATOR"),l=i?"remove moderator":"add moderator",c=i?(0,s.jsx)(k.Z,{style:{color:"var(--ant-error)"}}):(0,s.jsx)(g.Z,{style:{color:"var(--ant-warning)"}}),u=(0,s.jsxs)(s.Fragment,{children:["Are you sure you want to ",l," ",(0,s.jsx)("strong",{children:t.displayName}),"?"]});return(0,s.jsx)(y.Z,{onClick:function(){o.Z.confirm({title:"Confirm ".concat(l),content:u,onCancel:function(){},onOk:function(){return new Promise((function(e,n){var s=function(e,n){return a.apply(this,arguments)}(t,!i);s?setTimeout((function(){e(s),null===r||void 0===r||r()}),3e3):n()}))},okType:"danger",okText:i?"Yup!":null,icon:c})},size:"small",icon:i?(0,s.jsx)(Z.Z,{twoToneColor:"#ff4d4f"}):(0,s.jsx)(C.Z,{twoToneColor:"#22bb44"}),className:"block-user-button",children:l})};T.defaultProps={onClick:null};var N=t(41542),A=t(2766),D=function(e){var n=e.user,t=e.connectionInfo,j=e.children,b=(0,a.useState)(!1),v=b[0],y=b[1],k=function(){y(!1)},g=n.displayName,Z=n.createdAt,C=n.previousNames,w=n.nameChangedAt,D=n.disabledAt,P=t||{},O=P.connectedAt,E=P.messageCount,I=P.userAgent,M=null,S=C&&(0,r.Z)(C);C&&C.length>1&&w&&(M=new Date(w),S.reverse());var F=new Date(Z),z=(0,h.Z)(F,"PP pp"),U=M?(0,f.Z)(M):null;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{title:(0,s.jsxs)(s.Fragment,{children:["Created at: ",z,".",(0,s.jsx)("br",{})," Click for more info."]}),placement:"bottomLeft",children:(0,s.jsx)("button",{type:"button","aria-label":"Display more details about this user",className:"user-item-container",onClick:function(){y(!0)},children:j})}),(0,s.jsx)(o.Z,{destroyOnClose:!0,width:600,cancelText:"Close",okButtonProps:{style:{display:"none"}},title:"User details: ".concat(g),visible:v,onOk:k,onCancel:k,children:(0,s.jsxs)("div",{className:"user-details",children:[(0,s.jsx)(l.Z.Title,{level:4,children:g}),(0,s.jsxs)("p",{className:"created-at",children:["User created at ",z,"."]}),(0,s.jsxs)(c.Z,{gutter:16,children:[t&&(0,s.jsxs)(u.Z,{md:M?12:24,children:[(0,s.jsx)(l.Z.Title,{level:5,children:"This user is currently connected to Chat."}),(0,s.jsxs)("ul",{className:"connection-info",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Active for:"})," ",(0,f.Z)(new Date(O))]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Messages sent:"})," ",E]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"User Agent:"}),(0,s.jsx)("br",{}),(0,A.AB)(I)]})]})]}),M&&(0,s.jsxs)(u.Z,{md:t?12:24,children:[(0,s.jsx)(l.Z.Title,{level:5,children:"This user is also seen as:"}),(0,s.jsx)("ul",{className:"previous-names-list",children:(0,x.uniq)(S).map((function(e,n){return(0,s.jsxs)("li",{className:0===n?"latest":"",children:[(0,s.jsx)("span",{className:"user-name-item",children:e}),0===n?" (Changed ".concat(U," ago)"):""]})}))})]})]}),(0,s.jsx)(d.Z,{}),(0,s.jsxs)(m.Z,{direction:"horizontal",children:[D?(0,s.jsxs)(s.Fragment,{children:["This user was banned on ",(0,s.jsx)("code",{children:(0,N.u)(D)}),".",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)(p.e,{label:"Unban this user",user:n,isEnabled:!1,onClick:k})]}):(0,s.jsx)(p.e,{label:"Ban this user",user:n,isEnabled:!0,onClick:k}),(0,s.jsx)(T,{user:n,onClick:k})]})]})})]})};D.defaultProps={connectionInfo:null}},41542:function(e,n,t){t.d(n,{K:function(){return c},u:function(){return l}});var r=t(85893),s=t(10355),a=t(58091),i=t(11085),o=t(77891);function l(e){return(0,a.Z)(new Date(e),"MMM d H:mma")}var c=function(e){var n=e.data,t=[{title:"Last Known Display Name",dataIndex:"displayName",key:"displayName",render:function(e,n){return(0,r.jsx)(i.Z,{user:n,children:(0,r.jsx)("span",{className:"display-name",children:e})})}},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:function(e){return l(e)},sorter:function(e,n){return new Date(e.createdAt).getTime()-new Date(n.createdAt).getTime()},sortDirections:["descend","ascend"]},{title:"Disabled at",dataIndex:"disabledAt",key:"disabledAt",defaultSortOrder:"descend",render:function(e){return e?l(e):null},sorter:function(e,n){return new Date(e.disabledAt).getTime()-new Date(n.disabledAt).getTime()},sortDirections:["descend","ascend"]},{title:"",key:"block",className:"actions-col",render:function(e,n){return(0,r.jsx)(o.e,{user:n,isEnabled:!n.disabledAt})}}];return(0,r.jsx)(s.Z,{pagination:{hideOnSinglePage:!0},className:"table-container",columns:t,dataSource:n,size:"small",rowKey:"id"})}}}]);