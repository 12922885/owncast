"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2877],{72877:function(e,n,a){a.d(n,{h:function(){return z}});var t=a(47568),l=a(14924),s=a(26042),i=a(69396),c=a(29815),o=a(70655),r=a(85893),u=a(67294),d=a(84485),f=a(71577),m=a(69677),p=a(93626),h=a(85402),x=a(10010),j=a(39398),v=a(48689),N=a(38939),Z=a(58827),k=a(25964),g=function(e){var n=e.iconList,a=e.selectedOption,t=e.onSelected,l=""===a?null:a;return(0,r.jsxs)("div",{className:"social-dropdown-container",children:[(0,r.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,r.jsxs)("div",{className:"formfield-container",children:[(0,r.jsx)("div",{className:"label-side",children:(0,r.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,r.jsx)("div",{className:"input-side",children:(0,r.jsxs)(N.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:l,value:l,onSelect:function(e){t&&t(e)},children:[n.map((function(e){var n=e.platform,a=e.icon,t=e.key,l="".concat(Z.WB).concat(a.slice(1));return(0,r.jsxs)(N.Z.Option,{className:"social-option",value:t,children:[(0,r.jsx)("span",{className:"option-icon",children:(0,r.jsx)("img",{src:l,alt:"",className:"option-icon"})}),(0,r.jsx)("span",{className:"option-label",children:n})]},"platform-".concat(t))})),(0,r.jsx)(N.Z.Option,{className:"social-option",value:k.z_,children:"Other..."},"platform-".concat(k.z_))]})})]})]})},b=a(35159),y=a(19411),S=a(24389),w=a(83192),C=a(25521),_=d.Z.Title,z=function(){var e=(0,u.useState)([]),n=e[0],a=e[1],d=(0,u.useState)([]),N=d[0],z=d[1],E=(0,u.useState)(!1),O=E[0],I=E[1],T=(0,u.useState)(!1),H=T[0],L=T[1],A=(0,u.useState)(!1),B=A[0],P=A[1],U=(0,u.useState)(-1),D=U[0],V=U[1],W=(0,u.useState)(k.wC),F=W[0],K=W[1],Q=(0,u.useState)(null),R=Q[0],Y=Q[1],$=(0,u.useContext)(b.aC)||{},q=$.serverConfig,G=$.setFieldInConfigState,J=q.instanceDetails,M=J.socialHandles,X=null,ee=function(){var e=(0,t.Z)((function(){var e,n,t;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,Z.rQ)(Z.$i,{auth:!1})];case 1:return e=l.sent(),n=Object.keys(e).map((function(n){return(0,s.Z)({key:n},e[n])})),a(n),[3,3];case 2:return t=l.sent(),console.log(t),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ne=function(e){return n.find((function(n){return n.key===e}))||!1},ae=""!==F.platform&&!n.find((function(e){return e.key===F.platform}));(0,u.useEffect)((function(){ee()}),[]),(0,u.useEffect)((function(){J.socialHandles&&z(M)}),[J]);var te=function(){Y(null),X=null,clearTimeout(X)},le=function(){I(!1),V(-1),L(!1),P(!1),K((0,s.Z)({},k.wC))},se=function(){le()},ie=function(e,n){K((0,i.Z)((0,s.Z)({},F),(0,l.Z)({},e,n)))},ce=function(){var e=(0,t.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,k.Si)({apiPath:k.c9,data:{value:e},onSuccess:function(){G({fieldName:"socialHandles",value:e,path:"instanceDetails"}),P(!1),se(),Y((0,w.kg)(w.zv)),X=setTimeout(te,k.sI)},onError:function(e){Y((0,w.kg)(w.Un,"There was an error: ".concat(e))),P(!1),X=setTimeout(te,k.sI)}})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),oe=[{title:"Social Link",dataIndex:"",key:"combo",render:function(e,n){var a=n.platform,t=n.url,l=ne(a);if(!l)return(0,r.jsx)("div",{className:"social-handle-cell",children:(0,r.jsxs)("p",{className:"option-label",children:[(0,r.jsx)("strong",{children:a}),(0,r.jsx)("span",{className:"handle-url",title:t,children:t})]})});var s=l.icon,i=l.platform,c="".concat(Z.WB).concat(s.slice(1));return(0,r.jsxs)("div",{className:"social-handle-cell",children:[(0,r.jsx)("span",{className:"option-icon",children:(0,r.jsx)("img",{src:c,alt:"",className:"option-icon"})}),(0,r.jsxs)("p",{className:"option-label",children:[(0,r.jsx)("strong",{children:i}),(0,r.jsx)("span",{className:"handle-url",title:t,children:t})]})]})}},{title:"",dataIndex:"",key:"edit",render:function(e,n,a){return(0,r.jsxs)("div",{className:"actions",children:[(0,r.jsx)(f.Z,{size:"small",onClick:function(){var e=N[a];V(a),K((0,s.Z)({},e)),I(!0),ne(e.platform)||L(!0)},children:"Edit"}),(0,r.jsx)(f.Z,{icon:(0,r.jsx)(x.Z,{}),size:"small",hidden:0===a,onClick:function(){return function(e){if(!(e<=0||e>=N.length)){var n=(0,c.Z)(N),a=n[e-1];n[e-1]=n[e],n[e]=a,ce(n)}}(a)}}),(0,r.jsx)(f.Z,{icon:(0,r.jsx)(j.Z,{}),size:"small",hidden:a===N.length-1,onClick:function(){return function(e){if(!(e<0||e>=N.length-1)){var n=(0,c.Z)(N),a=n[e+1];n[e+1]=n[e],n[e]=a,ce(n)}}(a)}}),(0,r.jsx)(f.Z,{className:"delete-button",icon:(0,r.jsx)(v.Z,{}),size:"small",onClick:function(){return function(e){var n=(0,c.Z)(N);n.splice(e,1),ce(n)}(a)}})]})}}],re={disabled:!(0,y.Z)(F.url)},ue=(0,r.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,r.jsx)("div",{className:"label-side"}),(0,r.jsx)("div",{className:"input-side",children:(0,r.jsx)(m.Z,{placeholder:"Other platform name",defaultValue:F.platform,onChange:function(e){var n=e.target.value;ie("platform",n)}})})]});return(0,r.jsxs)("div",{className:"social-links-edit-container",children:[(0,r.jsx)(_,{level:3,className:"section-title",children:"Your Social Handles"}),(0,r.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,r.jsx)(C.E,{status:R}),(0,r.jsx)(p.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:function(e){return"".concat(e.platform,"-").concat(e.url)},columns:oe,dataSource:N}),(0,r.jsx)(h.Z,{title:"Edit Social Handle",visible:O,onOk:function(){P(!0);var e=N.length?(0,c.Z)(N):[];-1===D?e.push(F):e.splice(D,1,F),ce(e)},onCancel:se,confirmLoading:B,okButtonProps:re,children:(0,r.jsxs)("div",{className:"social-handle-modal-content",children:[(0,r.jsx)(g,{iconList:n,selectedOption:ae?k.z_:F.platform,onSelected:function(e){e===k.z_?(L(!0),ie("platform","")):(L(!1),ie("platform",e))}}),H&&ue,(0,r.jsx)("br",{}),(0,r.jsx)(S.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[F.platform]||"Url to page",value:F.url,onChange:function(e){var n=e.value;ie("url",n)},useTrim:!0,type:"url",pattern:y.a}),(0,r.jsx)(C.E,{status:R})]})}),(0,r.jsx)("br",{}),(0,r.jsx)(f.Z,{type:"primary",onClick:function(){le(),I(!0)},children:"Add a new social link"})]})}}}]);