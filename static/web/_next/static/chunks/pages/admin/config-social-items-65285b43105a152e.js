(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{81009:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return n(87945)}])},49817:function(e,s,n){"use strict";n.d(s,{Z:function(){return k}});var t=n(85893),a=n(67294),l=n(6880),o=n(71577),i=n(69677),r=n(48213),c=n(85402),d=n(10010),u=n(39398),m=n(48689),p=n(34041),h=n(90745);const f=e=>{let{iconList:s,selectedOption:n,onSelected:a}=e;const l=""===n?null:n;return(0,t.jsxs)("div",{className:"social-dropdown-container",children:[(0,t.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,t.jsxs)("div",{className:"formfield-container",children:[(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,t.jsx)("div",{className:"input-side",children:(0,t.jsxs)(p.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:l,value:l,onSelect:e=>{a&&a(e)},children:[s.map((e=>{const{platform:s,icon:n,key:a}=e;return(0,t.jsxs)(p.Z.Option,{className:"social-option",value:a,children:[(0,t.jsx)("span",{className:"option-icon",children:(0,t.jsx)("img",{src:n,alt:"",className:"option-icon"})}),(0,t.jsx)("span",{className:"option-label",children:s})]},"platform-".concat(a))})),(0,t.jsx)(p.Z.Option,{className:"social-option",value:h.z_,children:"Other..."},"platform-".concat(h.z_))]})})]})]})};var x=n(64777),g=n(99519),v=n(37174),j=n(79139),y=n(41983),N=n(73615);const{Title:b}=l.Z;function k(){const[e,s]=(0,a.useState)([]),[n,l]=(0,a.useState)([]),[p,k]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(!1),[E,P]=(0,a.useState)(-1),[_,T]=(0,a.useState)(h.wC),[O,z]=(0,a.useState)(null),I=(0,a.useContext)(g.aC),{serverConfig:L,setFieldInConfigState:M}=I||{},{instanceDetails:U}=L,{socialHandles:V}=U;let A=null;const H=s=>e.find((e=>e.key===s))||!1,D=""!==_.platform&&!e.find((e=>e.key===_.platform));(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,x.rQ)(x.$i,{auth:!1}),n=Object.keys(e).map((s=>({key:s,...e[s]})));s(n)}catch(e){console.log(e)}})()}),[]),(0,a.useEffect)((()=>{U.socialHandles&&l(V)}),[U]);const K=()=>{z(null),A=null,clearTimeout(A)},Q=()=>{k(!1),P(-1),S(!1),Z(!1),T({...h.wC})},F=()=>{Q()},X=(e,s)=>{T({..._,[e]:s})},B=async e=>{await(0,h.Si)({apiPath:h.c9,data:{value:e},onSuccess:()=>{M({fieldName:"socialHandles",value:e,path:"instanceDetails"}),Z(!1),F(),z((0,y.kg)(y.zv)),A=setTimeout(K,h.sI)},onError:e=>{z((0,y.kg)(y.Un,"There was an error: ".concat(e))),Z(!1),A=setTimeout(K,h.sI)}})},J=[{title:"Social Link",dataIndex:"",key:"combo",render:(e,s)=>{const{platform:n,url:a}=s,l=H(n);if(!l)return(0,t.jsx)("div",{className:"social-handle-cell",children:(0,t.jsxs)("p",{className:"option-label",children:[(0,t.jsx)("strong",{children:n}),(0,t.jsx)("span",{className:"handle-url",title:a,children:a})]})});const{icon:o,platform:i}=l;return(0,t.jsxs)("div",{className:"social-handle-cell",children:[(0,t.jsx)("span",{className:"option-icon",children:(0,t.jsx)("img",{src:o,alt:"",className:"option-icon"})}),(0,t.jsxs)("p",{className:"option-label",children:[(0,t.jsx)("strong",{children:i}),(0,t.jsx)("span",{className:"handle-url",title:a,children:a})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,s,a)=>(0,t.jsxs)("div",{className:"actions",children:[(0,t.jsx)(o.Z,{size:"small",onClick:()=>{const e=n[a];P(a),T({...e}),k(!0),H(e.platform)||S(!0)},children:"Edit"}),(0,t.jsx)(o.Z,{icon:(0,t.jsx)(d.Z,{}),size:"small",hidden:0===a,onClick:()=>(e=>{if(e<=0||e>=n.length)return;const s=[...n],t=s[e-1];s[e-1]=s[e],s[e]=t,B(s)})(a)}),(0,t.jsx)(o.Z,{icon:(0,t.jsx)(u.Z,{}),size:"small",hidden:a===n.length-1,onClick:()=>(e=>{if(e<0||e>=n.length-1)return;const s=[...n],t=s[e+1];s[e+1]=s[e],s[e]=t,B(s)})(a)}),(0,t.jsx)(o.Z,{className:"delete-button",icon:(0,t.jsx)(m.Z,{}),size:"small",onClick:()=>(e=>{const s=[...n];s.splice(e,1),B(s)})(a)})]})}],R={disabled:(q=_.url,G=_.platform,!("xmpp"===G?(0,v.Kf)(q,"xmpp"):"matrix"===G?(0,v.bu)(q):(0,v.jv)(q)))};var q,G;const Y=(0,t.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,t.jsx)("div",{className:"label-side"}),(0,t.jsx)("div",{className:"input-side",children:(0,t.jsx)(i.Z,{placeholder:"Other platform name",defaultValue:_.platform,onChange:e=>{const{value:s}=e.target;X("platform",s)}})})]});return(0,t.jsxs)("div",{className:"social-links-edit-container",children:[(0,t.jsx)(b,{level:3,className:"section-title",children:"Your Social Handles"}),(0,t.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,t.jsx)(N.E,{status:O}),(0,t.jsx)(r.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:J,dataSource:n}),(0,t.jsx)(c.Z,{title:"Edit Social Handle",open:p,onOk:()=>{Z(!0);const e=n.length?[...n]:[];-1===E?e.push(_):e.splice(E,1,_),B(e)},onCancel:F,confirmLoading:C,okButtonProps:R,children:(0,t.jsxs)("div",{className:"social-handle-modal-content",children:[(0,t.jsx)(f,{iconList:e,selectedOption:D?h.z_:_.platform,onSelected:e=>{e===h.z_?(S(!0),X("platform","")):(S(!1),X("platform",e))}}),w&&Y,(0,t.jsx)("br",{}),(0,t.jsx)(j.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[_.platform]||"Url to page",value:_.url,onChange:e=>{let{value:s}=e;X("url",s)},useTrim:!0,type:"url",pattern:v.ax}),(0,t.jsx)(N.E,{status:O})]})}),(0,t.jsx)("br",{}),(0,t.jsx)(o.Z,{type:"primary",onClick:()=>{Q(),k(!0)},children:"Add a new social link"})]})}},87945:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return i}});var t=n(85893),a=(n(67294),n(6880)),l=n(49817);const{Title:o}=a.Z;function i(){return(0,t.jsxs)("div",{className:"config-social-items",children:[(0,t.jsx)(o,{children:"Social Items"}),(0,t.jsx)(l.Z,{})]})}},41983:function(e,s,n){"use strict";n.d(s,{Jk:function(){return d},Un:function(){return r},dG:function(){return m},kg:function(){return h},zv:function(){return u}});var t=n(85893),a=n(89739),l=n(21640),o=n(50888),i=n(28058);const r="error",c="invalid",d="proessing",u="success",m="warning",p={[u]:{type:u,icon:(0,t.jsx)(a.Z,{style:{color:"green"}}),message:"Success!"},[r]:{type:r,icon:(0,t.jsx)(l.Z,{style:{color:"red"}}),message:"An error occurred."},[c]:{type:c,icon:(0,t.jsx)(l.Z,{style:{color:"red"}}),message:"An error occurred."},[d]:{type:d,icon:(0,t.jsx)(o.Z,{}),message:""},[m]:{type:m,icon:(0,t.jsx)(i.Z,{style:{color:"#fc0"}}),message:""}};function h(e,s){return e&&p[e]?s?{type:e,icon:p[e].icon,message:s}:p[e]:null}},99519:function(e,s,n){"use strict";n.d(s,{aC:function(){return d}});var t=n(85893),a=n(67294),l=n(45697),o=n.n(l),i=n(64777);const r={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[n(90745).gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},c={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},d=a.createContext({...c,serverConfig:r,setFieldInConfigState:e=>null}),u=e=>{let{children:s}=e;const[n,l]=(0,a.useState)(c),[o,u]=(0,a.useState)(r),m=async()=>{try{const e=await(0,i.rQ)(i.Q_);l({...e})}catch(e){}};(0,a.useEffect)((()=>{let e=null;return m(),e=setInterval(m,i.NE),(async()=>{try{const e=await(0,i.rQ)(i.bl);u(e)}catch(e){}})(),()=>{clearInterval(e)}}),[]);const p={...n,serverConfig:o,setFieldInConfigState:e=>{let{fieldName:s,value:n,path:t}=e;const a=t?{...o,[t]:{...o[t],[s]:n}}:{...o,[s]:n};u(a)}};return(0,t.jsx)(d.Provider,{value:p,children:s})};u.propTypes={children:o().element.isRequired},s.ZP=u}},function(e){e.O(0,[5596,481,173,1407,4083,6880,3174,1577,6386,3013,3698,2459,8213,9915,715,5402,1908,8131,745,9774,2888,179],(function(){return s=81009,e(e.s=s);var s}));var s=e.O();_N_E=s}]);
//# sourceMappingURL=config-social-items-65285b43105a152e.js.map