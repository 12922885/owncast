(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{81009:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return a(87945)}])},49817:function(e,l,a){"use strict";a.d(l,{Z:function(){return S}});var s=a(85893),t=a(67294),n=a(85818),i=a(71577),o=a(79531),c=a(54398),r=a(85402),d=a(5152),m=a.n(d),u=a(34041),p=a(90745);let h=e=>{let{iconList:l,selectedOption:a,onSelected:t}=e,n=e=>{t&&t(e)},i=""===a?null:a;return(0,s.jsxs)("div",{className:"social-dropdown-container",children:[(0,s.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,s.jsxs)("div",{className:"formfield-container",children:[(0,s.jsx)("div",{className:"label-side",children:(0,s.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,s.jsx)("div",{className:"input-side",children:(0,s.jsxs)(u.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:i,value:i,onSelect:n,children:[l.map(e=>{let{platform:l,icon:a,key:t}=e;return(0,s.jsxs)(u.Z.Option,{className:"social-option",value:t,children:[(0,s.jsx)("span",{className:"option-icon",children:(0,s.jsx)("img",{src:a,alt:"",className:"option-icon"})}),(0,s.jsx)("span",{className:"option-label",children:l})]},"platform-".concat(t))}),(0,s.jsx)(u.Z.Option,{className:"social-option",value:p.z_,children:"Other..."},"platform-".concat(p.z_))]})})]})]})};var f=a(64777),x=a(99519),j=a(37174),N=a(79139),v=a(41983),b=a(73615);let{Title:k}=n.Z,w=m()(()=>Promise.all([a.e(2074),a.e(8244)]).then(a.t.bind(a,18244,23)),{loadableGenerated:{webpack:()=>[18244]},ssr:!1}),g=m()(()=>Promise.all([a.e(2074),a.e(2802)]).then(a.t.bind(a,22802,23)),{loadableGenerated:{webpack:()=>[22802]},ssr:!1}),y=m()(()=>Promise.all([a.e(2074),a.e(7949)]).then(a.t.bind(a,77949,23)),{loadableGenerated:{webpack:()=>[77949]},ssr:!1});function S(){var e,l;let[a,n]=(0,t.useState)([]),[d,m]=(0,t.useState)([]),[u,S]=(0,t.useState)(!1),[_,Z]=(0,t.useState)(!1),[C,E]=(0,t.useState)(!1),[z,O]=(0,t.useState)(-1),[P,T]=(0,t.useState)(p.wC),[I,H]=(0,t.useState)(null),L=(0,t.useContext)(x.aC),{serverConfig:A,setFieldInConfigState:G}=L||{},{instanceDetails:U}=A,{socialHandles:K}=U,V=async()=>{try{let e=await (0,f.rQ)(f.$i,{auth:!1}),l=Object.keys(e).map(l=>({key:l,...e[l]}));n(l)}catch(a){console.log(a)}},X=e=>a.find(l=>l.key===e)||!1,B=""!==P.platform&&!a.find(e=>e.key===P.platform);(0,t.useEffect)(()=>{V()},[]),(0,t.useEffect)(()=>{U.socialHandles&&m(K)},[U]);let D=()=>{H(null),clearTimeout(null)},Q=()=>{S(!1),O(-1),Z(!1),E(!1),T({...p.wC})},R=()=>{Q()},Y=(e,l)=>{T({...P,[e]:l})},$=e=>{e===p.z_?(Z(!0),Y("platform","")):(Z(!1),Y("platform",e))},q=e=>{let{value:l}=e.target;Y("platform",l)},F=e=>{let{value:l}=e;Y("url",l)},J=async e=>{await (0,p.Si)({apiPath:p.c9,data:{value:e},onSuccess:()=>{G({fieldName:"socialHandles",value:e,path:"instanceDetails"}),E(!1),R(),H((0,v.kg)(v.zv)),setTimeout(D,p.sI)},onError:e=>{H((0,v.kg)(v.Un,"There was an error: ".concat(e))),E(!1),setTimeout(D,p.sI)}})},M=()=>{E(!0);let e=d.length?[...d]:[];-1===z?e.push(P):e.splice(z,1,P),J(e)},W=e=>{let l=[...d];l.splice(e,1),J(l)},ee=e=>{if(e<=0||e>=d.length)return;let l=[...d],a=l[e-1];l[e-1]=l[e],l[e]=a,J(l)},el=e=>{if(e<0||e>=d.length-1)return;let l=[...d],a=l[e+1];l[e+1]=l[e],l[e]=a,J(l)},ea={disabled:(e=P.url,"xmpp"===(l=P.platform)?!(0,j.Kf)(e,"xmpp"):"matrix"===l?!(0,j.bu)(e):!(0,j.jv)(e))},es=(0,s.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,s.jsx)("div",{className:"label-side"}),(0,s.jsx)("div",{className:"input-side",children:(0,s.jsx)(o.Z,{placeholder:"Other platform name",defaultValue:P.platform,onChange:q})})]});return(0,s.jsxs)("div",{className:"social-links-edit-container",children:[(0,s.jsx)(k,{level:3,className:"section-title",children:"Your Social Handles"}),(0,s.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,s.jsx)(b.E,{status:I}),(0,s.jsx)(c.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:[{title:"Social Link",dataIndex:"",key:"combo",render:(e,l)=>{let{platform:a,url:t}=l,n=X(a);if(!n)return(0,s.jsx)("div",{className:"social-handle-cell",children:(0,s.jsxs)("p",{className:"option-label",children:[(0,s.jsx)("strong",{children:a}),(0,s.jsx)("span",{className:"handle-url",title:t,children:t})]})});let{icon:i,platform:o}=n;return(0,s.jsxs)("div",{className:"social-handle-cell",children:[(0,s.jsx)("span",{className:"option-icon",children:(0,s.jsx)("img",{src:i,alt:"",className:"option-icon"})}),(0,s.jsxs)("p",{className:"option-label",children:[(0,s.jsx)("strong",{children:o}),(0,s.jsx)("span",{className:"handle-url",title:t,children:t})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,l,a)=>(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)(i.Z,{size:"small",onClick:()=>{let e=d[a];O(a),T({...e}),S(!0),X(e.platform)||Z(!0)},children:"Edit"}),(0,s.jsx)(i.Z,{icon:(0,s.jsx)(g,{}),size:"small",hidden:0===a,onClick:()=>ee(a)}),(0,s.jsx)(i.Z,{icon:(0,s.jsx)(w,{}),size:"small",hidden:a===d.length-1,onClick:()=>el(a)}),(0,s.jsx)(i.Z,{className:"delete-button",icon:(0,s.jsx)(y,{}),size:"small",onClick:()=>W(a)})]})}],dataSource:d}),(0,s.jsx)(r.Z,{title:"Edit Social Handle",open:u,onOk:M,onCancel:R,confirmLoading:C,okButtonProps:ea,children:(0,s.jsxs)("div",{className:"social-handle-modal-content",children:[(0,s.jsx)(h,{iconList:a,selectedOption:B?p.z_:P.platform,onSelected:$}),_&&es,(0,s.jsx)("br",{}),(0,s.jsx)(N.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[P.platform]||"Url to page",value:P.url,onChange:F,useTrim:!0,type:"url",pattern:j.ax}),(0,s.jsx)(b.E,{status:I})]})}),(0,s.jsx)("br",{}),(0,s.jsx)(i.Z,{type:"primary",onClick:()=>{Q(),S(!0)},children:"Add a new social link"})]})}},87945:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return o}});var s=a(85893);a(67294);var t=a(85818),n=a(49817);let{Title:i}=t.Z;function o(){return(0,s.jsxs)("div",{className:"config-social-items",children:[(0,s.jsx)(i,{children:"Social Items"}),(0,s.jsx)(n.Z,{})]})}}},function(e){e.O(0,[5818,6386,3698,3013,4398,1382,9774,2888,179],function(){return e(e.s=81009)}),_N_E=e.O()}]);
//# sourceMappingURL=config-social-items-bcc0814e25212a57.js.map