(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(1413),o=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},a=n(42135),c=function(e,t){return o.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};c.displayName="DeleteOutlined";var u=o.forwardRef(c)},54005:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return n(4437)}])},4437:function(e,t,n){"use strict";n.r(t);var r=n(47568),o=n(29815),i=n(70655),a=n(85893),c=n(48689),u=n(84485),l=n(85402),s=n(69677),d=n(32808),f=n(26713),h=n(71577),p=n(10355),v=n(67294),y=n(25521),x=n(25964),g=n(83192),m=n(35159),j=n(19411),Z=u.Z.Title,b=u.Z.Paragraph,w=null,k=function(e){var t=e.onOk,n=e.onCancel,r=e.visible,o=(0,v.useState)(""),i=o[0],c=o[1],u=(0,v.useState)(""),f=u[0],h=u[1],p=(0,v.useState)(""),y=p[0],x=p[1],g=(0,v.useState)(""),m=g[0],Z=g[1],b=(0,v.useState)(""),w=b[0],k=b[1],C=(0,v.useState)(!1),_=C[0],S=C[1],I={disabled:!function(){try{if("https:"!==new URL(i).protocol)return!1}catch(e){return!1}return(0,j.Z)(i)&&""!==f}()};return(0,a.jsx)(l.Z,{title:"Create New Action",visible:r,onOk:function(){t(i,f,y,m,w,_),c(""),h(""),x(""),Z(""),k(""),S(!1)},onCancel:n,okButtonProps:I,children:(0,a.jsxs)("div",{children:["Add the URL for the external action you want to present."," ",(0,a.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:i,required:!0,placeholder:"https://myserver.com/action (required)",onChange:function(e){return c(e.currentTarget.value.trim())},type:"url",pattern:j.a})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:f,required:!0,placeholder:"Your action title (required)",onChange:function(e){return h(e.currentTarget.value)}})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:y,placeholder:"Optional description",onChange:function(e){return x(e.currentTarget.value)}})}),(0,a.jsx)("p",{children:(0,a.jsx)(s.Z,{value:m,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:function(e){return Z(e.currentTarget.value)}})}),(0,a.jsxs)("p",{children:[(0,a.jsx)(s.Z,{type:"color",value:w,onChange:function(e){return k(e.currentTarget.value)}}),"Optional background color of the action button."]}),(0,a.jsx)(d.Z,{checked:_,defaultChecked:_,onChange:function(e){S(e.target.checked)},children:"Open in a new tab instead of within your page."})]})})};t.default=function(){var e=(0,v.useContext)(m.aC)||{},t=e.serverConfig,n=e.setFieldInConfigState,u=t.externalActions,l=(0,v.useState)([]),s=l[0],d=l[1],j=(0,v.useState)(!1),C=j[0],_=j[1],S=(0,v.useState)(null),I=S[0],E=S[1],O=function(){E(null),w=null,clearTimeout(w)};function T(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t={},[4,(0,x.Si)((t.apiPath=x.os,t.data={value:e},t.onSuccess=function(){n({fieldName:"externalActions",value:e,path:""}),E((0,g.kg)(g.zv,"Updated.")),w=setTimeout(O,x.sI)},t.onError=function(e){console.log(e),E((0,g.kg)(g.Un,e)),w=setTimeout(O,x.sI)},t))];case 1:return r.sent(),[2]}}))}))).apply(this,arguments)}function N(){return(N=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){t=(0,o.Z)(s),n=s.findIndex((function(t){return t.url===e.url})),t.splice(n,1);try{d(t),T(t)}catch(i){console.error(i)}return[2]}))}))).apply(this,arguments)}function U(){return(U=(0,r.Z)((function(e,t,n,r,a,c){var u,l,f,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),u=(0,o.Z)(s),f={},l=u.concat((f.url=e,f.title=t,f.description=n,f.icon=r,f.color=a,f.openExternally=c,f)),d(l),[4,T(l)];case 1:return i.sent(),[3,3];case 2:return h=i.sent(),console.error(h),[3,3];case 3:return[2]}}))}))).apply(this,arguments)}(0,v.useEffect)((function(){d(u||[])}),[u]);var R=[{title:"",key:"delete",render:function(e,t){return(0,a.jsx)(f.Z,{size:"middle",children:(0,a.jsx)(h.Z,{onClick:function(){return function(e){return N.apply(this,arguments)}(t)},icon:(0,a.jsx)(c.Z,{})})})}},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:function(e){return e?(0,a.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null}},{title:"Color",dataIndex:"color",key:"color",render:function(e){return e?(0,a.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null}},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:function(e){return e?"In a new tab":"In a modal"}}];return(0,a.jsxs)("div",{children:[(0,a.jsx)(Z,{children:"External Actions"}),(0,a.jsx)(b,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,a.jsxs)(b,{children:["Read more about how to use actions, with examples, at"," ",(0,a.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,a.jsx)(p.Z,{rowKey:function(e){return"".concat(e.title,"-").concat(e.url)},columns:R,dataSource:s,pagination:!1}),(0,a.jsx)("br",{}),(0,a.jsx)(h.Z,{type:"primary",onClick:function(){_(!0)},children:"Create New Action"}),(0,a.jsx)(y.E,{status:I}),(0,a.jsx)(k,{visible:C,onOk:function(e,t,n,r,o,i){_(!1),function(e,t,n,r,o,i){U.apply(this,arguments)}(e,t,n,r,o,i)},onCancel:function(){_(!1)}})]})}},20943:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},13375:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},29815:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(20943);var o=n(13375);var i=n(91566);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,o.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91566:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(20943);function o(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[7330,7266,355,9774,2888,179],(function(){return t=54005,e(e.s=t);var t}));var t=e.O();_N_E=t}]);