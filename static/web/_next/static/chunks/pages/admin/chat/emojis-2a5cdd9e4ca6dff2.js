(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559],{10887:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return t(14518)}])},14518:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var o=t(85893),r=t(48689),i=t(6880),s=t(26713),c=t(71577),a=t(48213),u=t(77916),l=t(67294),d=t(73615),m=t(64777),f=t(60956),j=t(41983),p=t(90745);const{Title:g,Paragraph:y}=i.Z;var h=()=>{const[e,n]=(0,l.useState)([]),[t,i]=(0,l.useState)(!1),[h,w]=(0,l.useState)(null),[k,x]=(0,l.useState)(null);let Z=null;const E=()=>{w(null),clearTimeout(Z),Z=null};async function v(){i(!0);try{const e=await(0,m.rQ)("/api/emoji");n(e)}catch(e){console.error("error fetching emojis",e)}i(!1)}(0,l.useEffect)((()=>{v()}),[]);const _=[{title:"",key:"delete",render:(e,n)=>(0,o.jsx)(s.Z,{size:"middle",children:(0,o.jsx)(c.Z,{onClick:()=>async function(e){const n="/".concat(e.split("/").slice(3).join("/"));console.log(n),i(!0),w((0,j.kg)(j.Jk,"Deleting emoji..."));try{const e=await(0,m.rQ)(m.Ff,{method:"POST",data:{name:n}});if(e instanceof Error)throw e;w((0,j.kg)(j.zv,"Emoji deleted")),Z=setTimeout(E,p.sI)}catch(t){w((0,j.kg)(j.Un,"".concat(t))),i(!1),Z=setTimeout(E,p.sI)}v()}(n.url),icon:(0,o.jsx)(r.Z,{})})})},{title:"Name",key:"name",dataIndex:"name"},{title:"Emoji",key:"url",render:(e,n)=>(0,o.jsx)("img",{src:n.url,alt:n.name,style:{maxWidth:"2vw"}})}];return(0,o.jsxs)("div",{children:[(0,o.jsx)(g,{children:"Emojis"}),(0,o.jsx)(y,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename will be used as emoji name."}),(0,o.jsx)(a.Z,{rowKey:e=>e.url,dataSource:e,columns:_,pagination:!1}),(0,o.jsx)("br",{}),(0,o.jsx)(u.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:f.dr.join(","),beforeUpload:x,customRequest:async function(){i(!0);try{w((0,j.kg)(j.Jk,"Converting emoji..."));const e=await new Promise(((e,n)=>{if(!f.dr.includes(k.type)){return n("File type is not supported: ".concat(k.type))}(0,f.y3)(k,(n=>e({name:k.name,url:n})))}));w((0,j.kg)(j.Jk,"Uploading emoji..."));const n=await(0,m.rQ)(m.Qc,{method:"POST",data:{name:e.name,data:e.url}});if(n instanceof Error)throw n;w((0,j.kg)(j.zv,"Emoji uploaded successfully!")),v()}catch(e){w((0,j.kg)(j.Un,"".concat(e)))}Z=setTimeout(E,p.sI),i(!1)},disabled:t,children:(0,o.jsx)(c.Z,{type:"primary",disabled:t,children:"Upload new emoji"})}),(0,o.jsx)(d.Z,{status:h})]})}},60956:function(e,n,t){"use strict";t.d(n,{Z7:function(){return o},dr:function(){return r},kR:function(){return s},y3:function(){return i}});const o=2097152,r=["image/png","image/jpeg","image/gif"];function i(e,n){const t=new FileReader;t.addEventListener("load",(()=>n(t.result))),t.readAsDataURL(e)}function s(e){const n=Math.floor(Math.log(e)/Math.log(1024)),t=1*Number((e/Math.pow(1024,n)).toFixed(2));return"".concat(t," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n])}},41983:function(e,n,t){"use strict";t.d(n,{Jk:function(){return l},Un:function(){return a},dG:function(){return m},kg:function(){return j},zv:function(){return d}});var o=t(85893),r=t(89739),i=t(21640),s=t(50888),c=t(28058);const a="error",u="invalid",l="proessing",d="success",m="warning",f={[d]:{type:d,icon:(0,o.jsx)(r.Z,{style:{color:"green"}}),message:"Success!"},[a]:{type:a,icon:(0,o.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[u]:{type:u,icon:(0,o.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[l]:{type:l,icon:(0,o.jsx)(s.Z,{}),message:""},[m]:{type:m,icon:(0,o.jsx)(c.Z,{style:{color:"#fc0"}}),message:""}};function j(e,n){return e&&f[e]?n?{type:e,icon:f[e].icon,message:n}:f[e]:null}}},function(e){e.O(0,[5596,481,173,1407,4083,6880,3174,1577,6386,3013,3698,2459,8213,9915,7910,7916,2571,745,9774,2888,179],(function(){return n=10887,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=emojis-2a5cdd9e4ca6dff2.js.map