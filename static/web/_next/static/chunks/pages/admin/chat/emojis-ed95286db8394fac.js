(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559,1382],{48689:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),i=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},a=n(42135),c=function(e,t){return i.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};c.displayName="DeleteOutlined";var l=i.forwardRef(c)},11382:function(e,t,n){"use strict";var r=n(87462),i=n(4942),o=n(97685),a=n(94184),c=n.n(a),l=n(23279),s=n.n(l),u=n(98423),f=n(67294),d=n(53124),m=n(96159),p=n(93355),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};(0,p.b)("small","default","large");var y=null,h=function(e){var t=e.spinPrefixCls,n=e.spinning,a=void 0===n||n,l=e.delay,p=e.className,h=e.size,g=void 0===h?"default":h,j=e.tip,x=e.wrapperClassName,b=e.style,w=e.children,E=v(e,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children"]),N=f.useState(function(){return a&&(!a||!l||!!isNaN(Number(l)))}),Z=(0,o.Z)(N,2),O=Z[0],k=Z[1];return f.useEffect(function(){var e=s()(function(){k(a)},l);return e(),function(){var t;null===(t=null==e?void 0:e.cancel)||void 0===t||t.call(e)}},[l,a]),f.createElement(d.C,null,function(n){var o,a,l,s=n.direction,d=c()(t,(l={},(0,i.Z)(l,"".concat(t,"-sm"),"small"===g),(0,i.Z)(l,"".concat(t,"-lg"),"large"===g),(0,i.Z)(l,"".concat(t,"-spinning"),O),(0,i.Z)(l,"".concat(t,"-show-text"),!!j),(0,i.Z)(l,"".concat(t,"-rtl"),"rtl"===s),l),p),v=(0,u.Z)(E,["indicator","prefixCls"]),h=f.createElement("div",(0,r.Z)({},v,{style:b,className:d,"aria-live":"polite","aria-busy":O}),(o=e.indicator,a="".concat(t,"-dot"),null===o?null:(0,m.l$)(o)?(0,m.Tm)(o,{className:c()(o.props.className,a)}):(0,m.l$)(y)?(0,m.Tm)(y,{className:c()(y.props.className,a)}):f.createElement("span",{className:c()(a,"".concat(t,"-dot-spin"))},f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}))),j?f.createElement("div",{className:"".concat(t,"-text")},j):null);if(void 0!==w){var N=c()("".concat(t,"-container"),(0,i.Z)({},"".concat(t,"-blur"),O));return f.createElement("div",(0,r.Z)({},v,{className:c()("".concat(t,"-nested-loading"),x)}),O&&f.createElement("div",{key:"loading"},h),f.createElement("div",{className:N,key:"container"},w))}return h})},g=function(e){var t=e.prefixCls,n=(0,f.useContext(d.E_).getPrefixCls)("spin",t),i=(0,r.Z)((0,r.Z)({},e),{spinPrefixCls:n});return f.createElement(h,(0,r.Z)({},i))};g.setDefaultIndicator=function(e){y=e},t.Z=g},62705:function(e,t,n){var r=n(55639).Symbol;e.exports=r},44239:function(e,t,n){var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},27561:function(e,t,n){var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},31957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},89607:function(e,t,n){var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(i){}var l=a.call(e);return r&&(t?e[c]=n:delete e[c]),l}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:function(e,t,n){var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var r=n(13218),i=n(7771),o=n(14841),a=Math.max,c=Math.min;e.exports=function(e,t,n){var l,s,u,f,d,m,p=0,v=!1,y=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var n=l,r=s;return l=s=void 0,p=t,f=e.apply(r,n)}function j(e){var n=e-m,r=e-p;return void 0===m||n>=t||n<0||y&&r>=u}function x(){var e,n,r,o=i();if(j(o))return b(o);d=setTimeout(x,(e=o-m,n=o-p,r=t-e,y?c(r,u-n):r))}function b(e){return(d=void 0,h&&l)?g(e):(l=s=void 0,f)}function w(){var e,n=i(),r=j(n);if(l=arguments,s=this,m=n,r){if(void 0===d)return p=e=m,d=setTimeout(x,t),v?g(e):f;if(y)return clearTimeout(d),d=setTimeout(x,t),g(m)}return void 0===d&&(d=setTimeout(x,t)),f}return t=o(t)||0,r(n)&&(v=!!n.leading,u=(y="maxWait"in n)?a(o(n.maxWait)||0,t):u,h="trailing"in n?!!n.trailing:h),w.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=m=s=d=void 0},w.flush=function(){return void 0===d?f:b(i())},w}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},7771:function(e,t,n){var r=n(55639);e.exports=function(){return r.Date.now()}},14841:function(e,t,n){var r=n(27561),i=n(13218),o=n(33448),a=0/0,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):c.test(e)?a:+e}},10887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(14518)}])},14518:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(85893),i=n(48689),o=n(6880),a=n(26713),c=n(71577),l=n(48213),s=n(77916),u=n(67294),f=n(73615),d=n(64777),m=n(60956),p=n(41983),v=n(90745);let{Title:y,Paragraph:h}=o.Z,g=()=>{let[e,t]=(0,u.useState)([]),[n,o]=(0,u.useState)(!1),[g,j]=(0,u.useState)(null),[x,b]=(0,u.useState)(null),w=null,E=()=>{j(null),clearTimeout(w),w=null};async function N(){o(!0);try{let e=await (0,d.rQ)("/api/emoji");t(e)}catch(n){console.error("error fetching emojis",n)}o(!1)}async function Z(e){let t="/".concat(e.split("/").slice(3).join("/"));console.log(t),o(!0),j((0,p.kg)(p.Jk,"Deleting emoji..."));try{let n=await (0,d.rQ)(d.Ff,{method:"POST",data:{name:t}});if(n instanceof Error)throw n;j((0,p.kg)(p.zv,"Emoji deleted")),w=setTimeout(E,v.sI)}catch(r){j((0,p.kg)(p.Un,"".concat(r))),o(!1),w=setTimeout(E,v.sI)}N()}async function O(){o(!0);try{j((0,p.kg)(p.Jk,"Converting emoji..."));let e=await new Promise((e,t)=>{if(!m.dr.includes(x.type)){let n="File type is not supported: ".concat(x.type);return t(n)}(0,m.y3)(x,t=>e({name:x.name,url:t}))});j((0,p.kg)(p.Jk,"Uploading emoji..."));let t=await (0,d.rQ)(d.Qc,{method:"POST",data:{name:e.name,data:e.url}});if(t instanceof Error)throw t;j((0,p.kg)(p.zv,"Emoji uploaded successfully!")),N()}catch(n){j((0,p.kg)(p.Un,"".concat(n)))}w=setTimeout(E,v.sI),o(!1)}return(0,u.useEffect)(()=>{N()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(y,{children:"Emojis"}),(0,r.jsx)(h,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename will be used as emoji name."}),(0,r.jsx)(l.Z,{rowKey:e=>e.url,dataSource:e,columns:[{title:"",key:"delete",render:(e,t)=>(0,r.jsx)(a.Z,{size:"middle",children:(0,r.jsx)(c.Z,{onClick:()=>Z(t.url),icon:(0,r.jsx)(i.Z,{})})})},{title:"Name",key:"name",dataIndex:"name"},{title:"Emoji",key:"url",render:(e,t)=>(0,r.jsx)("img",{src:t.url,alt:t.name,style:{maxWidth:"2vw"}})}],pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:m.dr.join(","),beforeUpload:b,customRequest:O,disabled:n,children:(0,r.jsx)(c.Z,{type:"primary",disabled:n,children:"Upload new emoji"})}),(0,r.jsx)(f.Z,{status:g})]})};var j=g},60956:function(e,t,n){"use strict";n.d(t,{Z7:function(){return r},dr:function(){return i},kR:function(){return a},y3:function(){return o}});let r=2097152,i=["image/png","image/jpeg","image/gif"];function o(e,t){let n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}function a(e){let t=Math.floor(Math.log(e)/Math.log(1024)),n=1*Number((e/Math.pow(1024,t)).toFixed(2));return"".concat(n," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}}},function(e){e.O(0,[6880,6386,3698,3013,8213,7910,7916,9774,2888,179],function(){return e(e.s=10887)}),_N_E=e.O()}]);
//# sourceMappingURL=emojis-ed95286db8394fac.js.map