{"version":3,"file":"static/chunks/pages/admin/chat/messages-919538e72316e914.js","mappings":"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","sources":["webpack://_N_E/?6feb","webpack://_N_E/./components/BanUserButton.tsx","webpack://_N_E/./components/ModeratorUserButton.tsx","webpack://_N_E/./components/UserPopover.tsx","webpack://_N_E/./components/UserTable.tsx","webpack://_N_E/./components/MessageVisiblityToggle.tsx","webpack://_N_E/./pages/admin/chat/messages.tsx","webpack://_N_E/./utils/apis.ts","webpack://_N_E/./utils/format.ts","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/chat/messages\",\n      function () {\n        return require(\"private-next-pages/admin/chat/messages.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/chat/messages\"])\n      });\n    }\n  ","import { Modal, Button } from 'antd';\nimport { ExclamationCircleFilled, QuestionCircleFilled, StopTwoTone } from '@ant-design/icons';\nimport { FC } from 'react';\nimport { USER_ENABLED_TOGGLE, fetchData } from '../utils/apis';\nimport { User } from '../types/chat';\n\nexport type BanUserButtonProps = {\n  user: User;\n  isEnabled: Boolean; // = this user's current status\n  label?: string;\n  onClick?: () => void;\n};\n\nexport const BanUserButton: FC<BanUserButtonProps> = ({ user, isEnabled, label, onClick }) => {\n  async function buttonClicked({ id }): Promise<Boolean> {\n    const data = {\n      userId: id,\n      enabled: !isEnabled, // set user to this value\n    };\n    try {\n      const result = await fetchData(USER_ENABLED_TOGGLE, {\n        data,\n        method: 'POST',\n        auth: true,\n      });\n      return result.success;\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n    return false;\n  }\n\n  const actionString = isEnabled ? 'ban' : 'unban';\n  const icon = isEnabled ? (\n    <ExclamationCircleFilled style={{ color: 'var(--ant-error)' }} />\n  ) : (\n    <QuestionCircleFilled style={{ color: 'var(--ant-warning)' }} />\n  );\n\n  const content = (\n    <>\n      Are you sure you want to {actionString} <strong>{user.displayName}</strong>\n      {isEnabled ? ' and remove their messages?' : '?'}\n    </>\n  );\n\n  const confirmBlockAction = () => {\n    Modal.confirm({\n      title: `Confirm ${actionString}`,\n      content,\n      onCancel: () => {},\n      onOk: () =>\n        new Promise((resolve, reject) => {\n          const result = buttonClicked(user);\n          if (result) {\n            // wait a bit before closing so the user/client tables repopulate\n            // GW: TODO: put users/clients data in global app context instead, then call a function here to update that state. (current in another branch)\n            setTimeout(() => {\n              resolve(result);\n              onClick?.();\n            }, 3000);\n          } else {\n            reject();\n          }\n        }),\n      okType: 'danger',\n      okText: isEnabled ? 'Absolutely' : null,\n      icon,\n    });\n  };\n\n  return (\n    <Button\n      type=\"primary\"\n      onClick={confirmBlockAction}\n      size=\"small\"\n      icon={isEnabled ? <StopTwoTone twoToneColor=\"#ff4d4f\" /> : null}\n      className=\"block-user-button\"\n    >\n      {label || actionString}\n    </Button>\n  );\n};\nBanUserButton.defaultProps = {\n  label: '',\n  onClick: null,\n};\n","import { Modal, Button } from 'antd';\nimport {\n  ExclamationCircleFilled,\n  QuestionCircleFilled,\n  StopTwoTone,\n  SafetyCertificateTwoTone,\n} from '@ant-design/icons';\nimport { FC } from 'react';\nimport { USER_SET_MODERATOR, fetchData } from '../utils/apis';\nimport { User } from '../types/chat';\n\nexport type ModeratorUserButtonProps = {\n  user: User;\n  onClick?: () => void;\n};\n\nexport const ModeratorUserButton: FC<ModeratorUserButtonProps> = ({ user, onClick }) => {\n  async function buttonClicked({ id }, setAsModerator: Boolean): Promise<Boolean> {\n    const data = {\n      userId: id,\n      isModerator: setAsModerator,\n    };\n    try {\n      const result = await fetchData(USER_SET_MODERATOR, {\n        data,\n        method: 'POST',\n        auth: true,\n      });\n      return result.success;\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n    }\n    return false;\n  }\n\n  const isModerator = user.scopes?.includes('MODERATOR');\n  const actionString = isModerator ? 'remove moderator' : 'add moderator';\n  const icon = isModerator ? (\n    <ExclamationCircleFilled style={{ color: 'var(--ant-error)' }} />\n  ) : (\n    <QuestionCircleFilled style={{ color: 'var(--ant-warning)' }} />\n  );\n\n  const content = (\n    <>\n      Are you sure you want to {actionString} <strong>{user.displayName}</strong>?\n    </>\n  );\n\n  const confirmBlockAction = () => {\n    Modal.confirm({\n      title: `Confirm ${actionString}`,\n      content,\n      onCancel: () => {},\n      onOk: () =>\n        new Promise((resolve, reject) => {\n          const result = buttonClicked(user, !isModerator);\n          if (result) {\n            // wait a bit before closing so the user/client tables repopulate\n            // GW: TODO: put users/clients data in global app context instead, then call a function here to update that state. (current in another branch)\n            setTimeout(() => {\n              resolve(result);\n              onClick?.();\n            }, 3000);\n          } else {\n            reject();\n          }\n        }),\n      okType: 'danger',\n      okText: isModerator ? 'Yup!' : null,\n      icon,\n    });\n  };\n\n  return (\n    <Button\n      type=\"primary\"\n      onClick={confirmBlockAction}\n      size=\"small\"\n      icon={\n        isModerator ? (\n          <StopTwoTone twoToneColor=\"#ff4d4f\" />\n        ) : (\n          <SafetyCertificateTwoTone twoToneColor=\"#22bb44\" />\n        )\n      }\n      className=\"block-user-button\"\n    >\n      {actionString}\n    </Button>\n  );\n};\n\nModeratorUserButton.defaultProps = {\n  onClick: null,\n};\n","// This displays a clickable user name (or whatever children element you provide), and displays a simple tooltip of created time. OnClick a modal with more information about the user is displayed.\n\nimport { useState, ReactNode, FC } from 'react';\nimport { Divider, Modal, Tooltip, Typography, Row, Col, Space } from 'antd';\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow';\nimport format from 'date-fns/format';\nimport { uniq } from 'lodash';\n\nimport { BanUserButton } from './BanUserButton';\nimport { ModeratorUserButton } from './ModeratorUserButton';\n\nimport { User, UserConnectionInfo } from '../types/chat';\nimport { formatDisplayDate } from './UserTable';\nimport { formatUAstring } from '../utils/format';\n\nexport type UserPopoverProps = {\n  user: User;\n  connectionInfo?: UserConnectionInfo | null;\n  children: ReactNode;\n};\n\nexport const UserPopover: FC<UserPopoverProps> = ({ user, connectionInfo, children }) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const handleShowModal = () => {\n    setIsModalOpen(true);\n  };\n  const handleCloseModal = () => {\n    setIsModalOpen(false);\n  };\n\n  const { displayName, createdAt, previousNames, nameChangedAt, disabledAt } = user;\n  const { connectedAt, messageCount, userAgent } = connectionInfo || {};\n\n  let lastNameChangeDate = null;\n  const nameList = previousNames && [...previousNames];\n\n  if (previousNames && previousNames.length > 1 && nameChangedAt) {\n    lastNameChangeDate = new Date(nameChangedAt);\n    // reverse prev names for display purposes\n    nameList.reverse();\n  }\n\n  const dateObject = new Date(createdAt);\n  const createdAtDate = format(dateObject, 'PP pp');\n\n  const lastNameChangeDuration = lastNameChangeDate\n    ? formatDistanceToNow(lastNameChangeDate)\n    : null;\n\n  return (\n    <>\n      <Tooltip\n        title={\n          <>\n            Created at: {createdAtDate}.\n            <br /> Click for more info.\n          </>\n        }\n        placement=\"bottomLeft\"\n      >\n        <button\n          type=\"button\"\n          aria-label=\"Display more details about this user\"\n          className=\"user-item-container\"\n          onClick={handleShowModal}\n        >\n          {children}\n        </button>\n      </Tooltip>\n\n      <Modal\n        destroyOnClose\n        width={600}\n        cancelText=\"Close\"\n        okButtonProps={{ style: { display: 'none' } }}\n        title={`User details: ${displayName}`}\n        open={isModalOpen}\n        onOk={handleCloseModal}\n        onCancel={handleCloseModal}\n      >\n        <div className=\"user-details\">\n          <Typography.Title level={4}>{displayName}</Typography.Title>\n          <p className=\"created-at\">User created at {createdAtDate}.</p>\n          <Row gutter={16}>\n            {connectionInfo && (\n              <Col md={lastNameChangeDate ? 12 : 24}>\n                <Typography.Title level={5}>\n                  This user is currently connected to Chat.\n                </Typography.Title>\n                <ul className=\"connection-info\">\n                  <li>\n                    <strong>Active for:</strong> {formatDistanceToNow(new Date(connectedAt))}\n                  </li>\n                  <li>\n                    <strong>Messages sent:</strong> {messageCount}\n                  </li>\n                  <li>\n                    <strong>User Agent:</strong>\n                    <br />\n                    {formatUAstring(userAgent)}\n                  </li>\n                </ul>\n              </Col>\n            )}\n            {lastNameChangeDate && (\n              <Col md={connectionInfo ? 12 : 24}>\n                <Typography.Title level={5}>This user is also seen as:</Typography.Title>\n                <ul className=\"previous-names-list\">\n                  {uniq(nameList).map((name, index) => (\n                    <li className={index === 0 ? 'latest' : ''}>\n                      <span className=\"user-name-item\">{name}</span>\n                      {index === 0 ? ` (Changed ${lastNameChangeDuration} ago)` : ''}\n                    </li>\n                  ))}\n                </ul>\n              </Col>\n            )}\n          </Row>\n          <Divider />\n          <Space direction=\"horizontal\">\n            {disabledAt ? (\n              <>\n                This user was banned on <code>{formatDisplayDate(disabledAt)}</code>.\n                <br />\n                <br />\n                <BanUserButton\n                  label=\"Unban this user\"\n                  user={user}\n                  isEnabled={false}\n                  onClick={handleCloseModal}\n                />\n              </>\n            ) : (\n              <BanUserButton\n                label=\"Ban this user\"\n                user={user}\n                isEnabled\n                onClick={handleCloseModal}\n              />\n            )}\n            <ModeratorUserButton user={user} onClick={handleCloseModal} />\n          </Space>\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nUserPopover.defaultProps = {\n  connectionInfo: null,\n};\n","import { Table } from 'antd';\nimport format from 'date-fns/format';\nimport { SortOrder } from 'antd/lib/table/interface';\nimport { FC } from 'react';\nimport { User } from '../types/chat';\nimport { UserPopover } from './UserPopover';\nimport { BanUserButton } from './BanUserButton';\n\nexport function formatDisplayDate(date: string | Date) {\n  return format(new Date(date), 'MMM d H:mma');\n}\n\nexport type UserTableProps = {\n  data: User[];\n};\n\nexport const UserTable: FC<UserTableProps> = ({ data }) => {\n  const columns = [\n    {\n      title: 'Last Known Display Name',\n      dataIndex: 'displayName',\n      key: 'displayName',\n      // eslint-disable-next-line react/destructuring-assignment\n      render: (displayName: string, user: User) => (\n        <UserPopover user={user}>\n          <span className=\"display-name\">{displayName}</span>\n        </UserPopover>\n      ),\n    },\n    {\n      title: 'Created',\n      dataIndex: 'createdAt',\n      key: 'createdAt',\n      render: (date: Date) => formatDisplayDate(date),\n      sorter: (a: any, b: any) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime(),\n      sortDirections: ['descend', 'ascend'] as SortOrder[],\n    },\n    {\n      title: 'Disabled at',\n      dataIndex: 'disabledAt',\n      key: 'disabledAt',\n      defaultSortOrder: 'descend' as SortOrder,\n      render: (date: Date) => (date ? formatDisplayDate(date) : null),\n      sorter: (a: any, b: any) =>\n        new Date(a.disabledAt).getTime() - new Date(b.disabledAt).getTime(),\n      sortDirections: ['descend', 'ascend'] as SortOrder[],\n    },\n    {\n      title: '',\n      key: 'block',\n      className: 'actions-col',\n      render: (_, user) => <BanUserButton user={user} isEnabled={!user.disabledAt} />,\n    },\n  ];\n\n  return (\n    <Table\n      pagination={{ hideOnSinglePage: true }}\n      className=\"table-container\"\n      columns={columns}\n      dataSource={data}\n      size=\"small\"\n      rowKey=\"id\"\n    />\n  );\n};\n","// Custom component for AntDesign Button that makes an api call, then displays a confirmation icon upon\nimport React, { useState, useEffect, FC } from 'react';\nimport { Button, Tooltip } from 'antd';\nimport {\n  EyeOutlined,\n  EyeInvisibleOutlined,\n  CheckCircleFilled,\n  ExclamationCircleFilled,\n} from '@ant-design/icons';\nimport { fetchData, UPDATE_CHAT_MESSGAE_VIZ } from '../utils/apis';\nimport { MessageType } from '../types/chat';\nimport { OUTCOME_TIMEOUT } from '../pages/admin/chat/messages';\nimport { isEmptyObject } from '../utils/format';\n\nexport type MessageToggleProps = {\n  isVisible: boolean;\n  message: MessageType;\n  setMessage: (message: MessageType) => void;\n};\n\nexport const MessageVisiblityToggle: FC<MessageToggleProps> = ({\n  isVisible,\n  message,\n  setMessage,\n}) => {\n  if (!message || isEmptyObject(message)) {\n    return null;\n  }\n\n  let outcomeTimeout = null;\n  const [outcome, setOutcome] = useState(0);\n\n  const { id: messageId } = message || {};\n\n  const resetOutcome = () => {\n    outcomeTimeout = setTimeout(() => {\n      setOutcome(0);\n    }, OUTCOME_TIMEOUT);\n  };\n\n  useEffect(() => () => {\n    clearTimeout(outcomeTimeout);\n  });\n\n  const updateChatMessage = async () => {\n    clearTimeout(outcomeTimeout);\n    setOutcome(0);\n    const result = await fetchData(UPDATE_CHAT_MESSGAE_VIZ, {\n      auth: true,\n      method: 'POST',\n      data: {\n        visible: !isVisible,\n        idArray: [messageId],\n      },\n    });\n\n    if (result.success && result.message === 'changed') {\n      setMessage({ ...message, visible: !isVisible });\n      setOutcome(1);\n    } else {\n      setMessage({ ...message, visible: isVisible });\n      setOutcome(-1);\n    }\n    resetOutcome();\n  };\n\n  let outcomeIcon = <CheckCircleFilled style={{ color: 'transparent' }} />;\n  if (outcome) {\n    outcomeIcon =\n      outcome > 0 ? (\n        <CheckCircleFilled style={{ color: 'var(--ant-success)' }} />\n      ) : (\n        <ExclamationCircleFilled style={{ color: 'var(--ant-warning)' }} />\n      );\n  }\n\n  const toolTipMessage = `Click to ${isVisible ? 'hide' : 'show'} this message`;\n  return (\n    <div className={`toggle-switch ${isVisible ? '' : 'hidden'}`}>\n      <span className=\"outcome-icon\">{outcomeIcon}</span>\n      <Tooltip title={toolTipMessage} placement=\"topRight\">\n        <Button\n          shape=\"circle\"\n          size=\"small\"\n          type=\"text\"\n          icon={isVisible ? <EyeOutlined /> : <EyeInvisibleOutlined />}\n          onClick={updateChatMessage}\n        />\n      </Tooltip>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Table, Typography, Button } from 'antd';\nimport { CheckCircleFilled, ExclamationCircleFilled } from '@ant-design/icons';\nimport classNames from 'classnames';\nimport { ColumnsType } from 'antd/es/table';\nimport format from 'date-fns/format';\n\nimport { MessageType } from '../../../types/chat';\nimport {\n  CHAT_HISTORY,\n  fetchData,\n  FETCH_INTERVAL,\n  UPDATE_CHAT_MESSGAE_VIZ,\n} from '../../../utils/apis';\nimport { isEmptyObject } from '../../../utils/format';\nimport { MessageVisiblityToggle } from '../../../components/MessageVisiblityToggle';\nimport { UserPopover } from '../../../components/UserPopover';\n\nconst { Title } = Typography;\n\nfunction createUserNameFilters(messages: MessageType[]) {\n  const filtered = messages.reduce((acc, curItem) => {\n    const curAuthor = curItem.user.id;\n    if (!acc.some(item => item.text === curAuthor)) {\n      acc.push({ text: curAuthor, value: curAuthor });\n    }\n    return acc;\n  }, []);\n\n  // sort by name\n  return filtered.sort((a, b) => {\n    const nameA = a.text.toUpperCase(); // ignore upper and lowercase\n    const nameB = b.text.toUpperCase(); // ignore upper and lowercase\n    if (nameA < nameB) {\n      return -1;\n    }\n    if (nameA > nameB) {\n      return 1;\n    }\n    // names must be equal\n    return 0;\n  });\n}\nexport const OUTCOME_TIMEOUT = 3000;\n\nexport default function Chat() {\n  const [messages, setMessages] = useState([]);\n  const [selectedRowKeys, setSelectedRows] = useState([]);\n  const [bulkProcessing, setBulkProcessing] = useState(false);\n  const [bulkOutcome, setBulkOutcome] = useState(null);\n  const [bulkAction, setBulkAction] = useState('');\n  let outcomeTimeout = null;\n  let chatReloadInterval = null;\n\n  const getInfo = async () => {\n    try {\n      const result = await fetchData(CHAT_HISTORY, { auth: true });\n      if (isEmptyObject(result)) {\n        setMessages([]);\n      } else {\n        setMessages(result);\n      }\n    } catch (error) {\n      console.log('==== error', error);\n    }\n  };\n\n  useEffect(() => {\n    getInfo();\n\n    chatReloadInterval = setInterval(() => {\n      getInfo();\n    }, FETCH_INTERVAL);\n\n    return () => {\n      clearTimeout(outcomeTimeout);\n      clearTimeout(chatReloadInterval);\n    };\n  }, []);\n\n  const nameFilters = createUserNameFilters(messages);\n\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: (selectedKeys: string[]) => {\n      setSelectedRows(selectedKeys);\n    },\n  };\n\n  const updateMessage = message => {\n    const messageIndex = messages.findIndex(m => m.id === message.id);\n    messages.splice(messageIndex, 1, message);\n    setMessages([...messages]);\n  };\n\n  const resetBulkOutcome = () => {\n    outcomeTimeout = setTimeout(() => {\n      setBulkOutcome(null);\n      setBulkAction('');\n    }, OUTCOME_TIMEOUT);\n  };\n  const handleSubmitBulk = async bulkVisibility => {\n    setBulkProcessing(true);\n    const result = await fetchData(UPDATE_CHAT_MESSGAE_VIZ, {\n      auth: true,\n      method: 'POST',\n      data: {\n        visible: bulkVisibility,\n        idArray: selectedRowKeys,\n      },\n    });\n\n    if (result.success && result.message === 'changed') {\n      setBulkOutcome(<CheckCircleFilled />);\n      resetBulkOutcome();\n\n      // update messages\n      const updatedList = [...messages];\n      selectedRowKeys.map(key => {\n        const messageIndex = updatedList.findIndex(m => m.id === key);\n        const newMessage = { ...messages[messageIndex], visible: bulkVisibility };\n        updatedList.splice(messageIndex, 1, newMessage);\n        return null;\n      });\n      setMessages(updatedList);\n      setSelectedRows([]);\n    } else {\n      setBulkOutcome(<ExclamationCircleFilled />);\n      resetBulkOutcome();\n    }\n    setBulkProcessing(false);\n  };\n  const handleSubmitBulkShow = () => {\n    setBulkAction('show');\n    handleSubmitBulk(true);\n  };\n  const handleSubmitBulkHide = () => {\n    setBulkAction('hide');\n    handleSubmitBulk(false);\n  };\n\n  const chatColumns: ColumnsType<MessageType> = [\n    {\n      title: 'Time',\n      dataIndex: 'timestamp',\n      key: 'timestamp',\n      className: 'timestamp-col',\n      defaultSortOrder: 'descend',\n      render: timestamp => {\n        const dateObject = new Date(timestamp);\n        return format(dateObject, 'PP pp');\n      },\n      sorter: (a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime(),\n      width: 90,\n    },\n    {\n      title: 'User',\n      dataIndex: 'user',\n      key: 'user',\n      className: 'name-col',\n      filters: nameFilters,\n      onFilter: (value, record) => record.user.id === value,\n      sorter: (a, b) => a.user.displayName.localeCompare(b.user.displayName),\n      sortDirections: ['ascend', 'descend'],\n      ellipsis: true,\n      render: user => {\n        const { displayName } = user;\n        return <UserPopover user={user}>{displayName}</UserPopover>;\n      },\n      width: 110,\n    },\n    {\n      title: 'Message',\n      dataIndex: 'body',\n      key: 'body',\n      className: 'message-col',\n      width: 320,\n      render: body => (\n        <div\n          className=\"message-contents\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: body }}\n        />\n      ),\n    },\n    {\n      title: '',\n      dataIndex: 'hiddenAt',\n      key: 'hiddenAt',\n      className: 'toggle-col',\n      filters: [\n        { text: 'Visible messages', value: true },\n        { text: 'Hidden messages', value: false },\n      ],\n      onFilter: (value, record) => record.visible === value,\n      render: (hiddenAt, record) => (\n        <MessageVisiblityToggle isVisible={!hiddenAt} message={record} setMessage={updateMessage} />\n      ),\n      width: 30,\n    },\n  ];\n\n  const bulkDivClasses = classNames({\n    'bulk-editor': true,\n    active: selectedRowKeys.length,\n  });\n\n  return (\n    <div className=\"chat-messages\">\n      <Title>Chat Messages</Title>\n      <p>Manage the messages from viewers that show up on your stream.</p>\n      <div className={bulkDivClasses}>\n        <span className=\"label\">Check multiple messages to change their visibility to: </span>\n\n        <Button\n          type=\"primary\"\n          size=\"small\"\n          shape=\"round\"\n          className=\"button\"\n          loading={bulkAction === 'show' && bulkProcessing}\n          icon={bulkAction === 'show' && bulkOutcome}\n          disabled={!selectedRowKeys.length || (bulkAction && bulkAction !== 'show')}\n          onClick={handleSubmitBulkShow}\n        >\n          Show\n        </Button>\n        <Button\n          type=\"primary\"\n          size=\"small\"\n          shape=\"round\"\n          className=\"button\"\n          loading={bulkAction === 'hide' && bulkProcessing}\n          icon={bulkAction === 'hide' && bulkOutcome}\n          disabled={!selectedRowKeys.length || (bulkAction && bulkAction !== 'hide')}\n          onClick={handleSubmitBulkHide}\n        >\n          Hide\n        </Button>\n      </div>\n      <Table\n        size=\"small\"\n        className=\"table-container\"\n        pagination={{ defaultPageSize: 100, showSizeChanger: true }}\n        scroll={{ y: 540 }}\n        rowClassName={record => (record.hiddenAt ? 'hidden' : '')}\n        dataSource={messages}\n        columns={chatColumns}\n        rowKey={row => row.id}\n        rowSelection={rowSelection}\n      />\n    </div>\n  );\n}\n","/* eslint-disable prefer-destructuring */\nconst ADMIN_USERNAME = process.env.NEXT_PUBLIC_ADMIN_USERNAME;\nconst ADMIN_STREAMKEY = process.env.NEXT_PUBLIC_ADMIN_STREAMKEY;\nexport const NEXT_PUBLIC_API_HOST = process.env.NEXT_PUBLIC_API_HOST;\n\nconst API_LOCATION = `${NEXT_PUBLIC_API_HOST}api/admin/`;\n\nexport const FETCH_INTERVAL = 15000;\n\n// Current inbound broadcaster info\nexport const STATUS = `${API_LOCATION}status`;\n\n// Disconnect inbound stream\nexport const DISCONNECT = `${API_LOCATION}disconnect`;\n\n// Change the current streaming key in memory\nexport const STREAMKEY_CHANGE = `${API_LOCATION}changekey`;\n\n// Current server config\nexport const SERVER_CONFIG = `${API_LOCATION}serverconfig`;\n\n// Base url to update config settings\nexport const SERVER_CONFIG_UPDATE_URL = `${API_LOCATION}config`;\n\n// Get viewer count over time\nexport const VIEWERS_OVER_TIME = `${API_LOCATION}viewersOverTime`;\n\n// Get active viewer details\nexport const ACTIVE_VIEWER_DETAILS = `${API_LOCATION}viewers`;\n\n// Get currently connected chat clients\nexport const CONNECTED_CLIENTS = `${API_LOCATION}chat/clients`;\n\n// Get list of disabled/blocked chat users\nexport const DISABLED_USERS = `${API_LOCATION}chat/users/disabled`;\n\n// Disable/enable a single user\nexport const USER_ENABLED_TOGGLE = `${API_LOCATION}chat/users/setenabled`;\n\n// Get banned IP addresses\nexport const BANNED_IPS = `${API_LOCATION}chat/users/ipbans`;\n\n// Remove IP ban\nexport const BANNED_IP_REMOVE = `${API_LOCATION}chat/users/ipbans/remove`;\n\n// Disable/enable a single user\nexport const USER_SET_MODERATOR = `${API_LOCATION}chat/users/setmoderator`;\n\n// Get list of moderators\nexport const MODERATORS = `${API_LOCATION}chat/users/moderators`;\n\n// Get hardware stats\nexport const HARDWARE_STATS = `${API_LOCATION}hardwarestats`;\n\n// Get all logs\nexport const LOGS_ALL = `${API_LOCATION}logs`;\n\n// Get warnings + errors\nexport const LOGS_WARN = `${API_LOCATION}logs/warnings`;\n\n// Get chat history\nexport const CHAT_HISTORY = `${API_LOCATION}chat/messages`;\n\n// Get chat history\nexport const UPDATE_CHAT_MESSGAE_VIZ = `/api/admin/chat/messagevisibility`;\n\n// Upload a new custom emoji\nexport const UPLOAD_EMOJI = `${API_LOCATION}emoji/upload`;\n\n// Delete a custom emoji\nexport const DELETE_EMOJI = `${API_LOCATION}emoji/delete`;\n\n// Get all access tokens\nexport const ACCESS_TOKENS = `${API_LOCATION}accesstokens`;\n\n// Delete a single access token\nexport const DELETE_ACCESS_TOKEN = `${API_LOCATION}accesstokens/delete`;\n\n// Create a new access token\nexport const CREATE_ACCESS_TOKEN = `${API_LOCATION}accesstokens/create`;\n\n// Get webhooks\nexport const WEBHOOKS = `${API_LOCATION}webhooks`;\n\n// Delete a single webhook\nexport const DELETE_WEBHOOK = `${API_LOCATION}webhooks/delete`;\n\n// Create a single webhook\nexport const CREATE_WEBHOOK = `${API_LOCATION}webhooks/create`;\n\n// hard coded social icons list\nexport const SOCIAL_PLATFORMS_LIST = `${NEXT_PUBLIC_API_HOST}api/socialplatforms`;\n\n// set external action links\nexport const EXTERNAL_ACTIONS = `${API_LOCATION}api/externalactions`;\n\n// send a message to the fediverse\nexport const FEDERATION_MESSAGE_SEND = `${API_LOCATION}federation/send`;\n\n// Get followers\nexport const FOLLOWERS = `${API_LOCATION}followers`;\n\n// Get followers pending approval\nexport const FOLLOWERS_PENDING = `${API_LOCATION}followers/pending`;\n\n// Get followers who were blocked or rejected\nexport const FOLLOWERS_BLOCKED = `${API_LOCATION}followers/blocked`;\n\n// Approve, reject a follow request\nexport const SET_FOLLOWER_APPROVAL = `${API_LOCATION}followers/approve`;\n\n// List of inbound federated actions that took place.\nexport const FEDERATION_ACTIONS = `${API_LOCATION}federation/actions`;\n\nexport const API_STREAM_HEALTH_METRICS = `${API_LOCATION}metrics/video`;\n\n// Save an array of stream keys\nexport const UPDATE_STREAM_KEYS = `${API_LOCATION}config/streamkeys`;\n\nexport const API_YP_RESET = `${API_LOCATION}yp/reset`;\n\nexport const TEMP_UPDATER_API = LOGS_ALL;\n\nconst GITHUB_RELEASE_URL = 'https://api.github.com/repos/owncast/owncast/releases/latest';\n\ninterface FetchOptions {\n  data?: any;\n  method?: string;\n  auth?: boolean;\n}\n\nexport async function fetchData(url: string, options?: FetchOptions) {\n  const { data, method = 'GET', auth = true } = options || {};\n\n  // eslint-disable-next-line no-undef\n  const requestOptions: RequestInit = {\n    method,\n  };\n\n  if (data) {\n    requestOptions.body = JSON.stringify(data);\n  }\n\n  if (auth && ADMIN_USERNAME && ADMIN_STREAMKEY) {\n    const encoded = btoa(`${ADMIN_USERNAME}:${ADMIN_STREAMKEY}`);\n    requestOptions.headers = {\n      Authorization: `Basic ${encoded}`,\n    };\n    requestOptions.mode = 'cors';\n    requestOptions.credentials = 'include';\n  }\n\n  try {\n    const response = await fetch(url, requestOptions);\n    const json = await response.json();\n\n    if (!response.ok) {\n      const message = json.message || `An error has occurred: ${response.status}`;\n      throw new Error(message);\n    }\n    return json;\n  } catch (error) {\n    console.error(error);\n    return error;\n    // console.log(error)\n    // throw new Error(error)\n  }\n}\n\nexport async function getUnauthedData(url: string, options?: FetchOptions) {\n  const opts = {\n    method: 'GET',\n    auth: false,\n    ...options,\n  };\n  return fetchData(url, opts);\n}\n\nexport async function fetchExternalData(url: string) {\n  try {\n    const response = await fetch(url, {\n      referrerPolicy: 'no-referrer', // Send no referrer header for privacy reasons.\n      referrer: '',\n    });\n    if (!response.ok) {\n      const message = `An error has occured: ${response.status}`;\n      throw new Error(message);\n    }\n    const json = await response.json();\n    return json;\n  } catch (error) {\n    console.log(error);\n  }\n  return {};\n}\n\nexport async function getGithubRelease() {\n  return fetchExternalData(GITHUB_RELEASE_URL);\n}\n\n// Stolen from https://gist.github.com/prenagha/98bbb03e27163bc2f5e4\nconst VPAT = /^\\d+(\\.\\d+){0,2}$/;\nfunction upToDate(local, remote) {\n  if (!local || !remote || local.length === 0 || remote.length === 0) return false;\n  if (local === remote) return true;\n  if (VPAT.test(local) && VPAT.test(remote)) {\n    const lparts = local.split('.');\n    while (lparts.length < 3) lparts.push('0');\n    const rparts = remote.split('.');\n    while (rparts.length < 3) rparts.push('0');\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < 3; i++) {\n      const l = parseInt(lparts[i], 10);\n      const r = parseInt(rparts[i], 10);\n      if (l === r)\n        // eslint-disable-next-line no-continue\n        continue;\n      return l > r;\n    }\n    return true;\n  }\n  return local >= remote;\n}\n\n// Make a request to the server status API and the Github releases API\n// and return a release if it's newer than the server version.\nexport async function upgradeVersionAvailable(currentVersion) {\n  const recentRelease = await getGithubRelease();\n  let recentReleaseVersion = recentRelease.tag_name;\n\n  if (recentReleaseVersion.substr(0, 1) === 'v') {\n    recentReleaseVersion = recentReleaseVersion.substr(1);\n  }\n\n  if (!upToDate(currentVersion, recentReleaseVersion)) {\n    return recentReleaseVersion;\n  }\n\n  return null;\n}\n","import UAParser from 'ua-parser-js';\n\nexport function formatIPAddress(ipAddress: string): string {\n  const ipAddressComponents = ipAddress.split(':');\n\n  // Wipe out the port component\n  ipAddressComponents[ipAddressComponents.length - 1] = '';\n\n  let ip = ipAddressComponents.join(':');\n  ip = ip.slice(0, ip.length - 1);\n  if (ip === '[::1]' || ip === '127.0.0.1') {\n    return 'Localhost';\n  }\n\n  return ip;\n}\n\n// check if obj is {}\nexport function isEmptyObject(obj) {\n  return !obj || (Object.keys(obj).length === 0 && obj.constructor === Object);\n}\n\nexport function padLeft(text, pad, size) {\n  return String(pad.repeat(size) + text).slice(-size);\n}\n\nexport function parseSecondsToDurationString(seconds = 0) {\n  const finiteSeconds = Number.isFinite(+seconds) ? Math.abs(seconds) : 0;\n\n  const days = Math.floor(finiteSeconds / 86400);\n  const daysString = days > 0 ? `${days} day${days > 1 ? 's' : ''} ` : '';\n\n  const hours = Math.floor((finiteSeconds / 3600) % 24);\n  const hoursString = hours || days ? padLeft(`${hours}:`, '0', 3) : '';\n\n  const mins = Math.floor((finiteSeconds / 60) % 60);\n  const minString = padLeft(`${mins}:`, '0', 3);\n\n  const secs = Math.floor(finiteSeconds % 60);\n  const secsString = padLeft(`${secs}`, '0', 2);\n\n  return daysString + hoursString + minString + secsString;\n}\n\nexport function makeAndStringFromArray(arr: string[]): string {\n  if (arr.length === 1) return arr[0];\n  const firsts = arr.slice(0, arr.length - 1);\n  const last = arr[arr.length - 1];\n  return `${firsts.join(', ')} and ${last}`;\n}\n\nexport function formatUAstring(uaString: string) {\n  const parser = UAParser(uaString);\n  const { device, os, browser } = parser;\n  const { major: browserVersion, name } = browser;\n  const { version: osVersion, name: osName } = os;\n  const { model, type } = device;\n\n  if (uaString === 'libmpv') {\n    return 'mpv media player';\n  }\n  // Fallback to just displaying the raw agent string.\n  if (!name || !browserVersion || !osName) {\n    return uaString;\n  }\n\n  const deviceString = model || type ? ` (${model || type})` : '';\n  return `${name} ${browserVersion} on ${osName} ${osVersion}\n  ${deviceString}`;\n}\n"],"names":["window","__NEXT_P","push","__webpack_require__","BanUserButton","user","isEnabled","label","onClick","param","buttonClicked","id","result","fetchData","USER_ENABLED_TOGGLE","data","userId","enabled","method","auth","success","e","console","error","actionString","icon","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","ExclamationCircleFilled","style","color","QuestionCircleFilled","content","jsxs","Fragment","strong","displayName","confirmBlockAction","Modal","title","concat","onCancel","onOk","Promise","resolve","reject","setTimeout","okType","okText","Button","type","size","StopTwoTone","twoToneColor","className","defaultProps","ModeratorUserButton","setAsModerator","USER_SET_MODERATOR","isModerator","scopes","includes","jsx_runtime","SafetyCertificateTwoTone","UserPopover","connectionInfo","children","isModalOpen","setIsModalOpen","useState","handleShowModal","handleCloseModal","createdAt","previousNames","nameChangedAt","disabledAt","connectedAt","messageCount","userAgent","lastNameChangeDate","nameList","length","Date","reverse","dateObject","createdAtDate","format","lastNameChangeDuration","formatDistanceToNow","Tooltip","br","placement","button","aria-label","destroyOnClose","width","cancelText","okButtonProps","display","open","div","Typography","level","p","Row","gutter","Col","md","ul","li","formatUAstring","uniq","map","name","index","span","Divider","Space","direction","code","formatDisplayDate","date","UserTable","Table","pagination","hideOnSinglePage","columns","dataIndex","key","render","sorter","a","b","getTime","sortDirections","defaultSortOrder","_","dataSource","rowKey","MessageVisiblityToggle","isVisible","message","setMessage","isEmptyObject","outcomeTimeout","outcome","setOutcome","messageId","resetOutcome","OUTCOME_TIMEOUT","useEffect","clearTimeout","updateChatMessage","UPDATE_CHAT_MESSGAE_VIZ","visible","idArray","outcomeIcon","CheckCircleFilled","shape","EyeOutlined","EyeInvisibleOutlined","Title","Chat","messages","setMessages","selectedRowKeys","setSelectedRows","bulkProcessing","setBulkProcessing","bulkOutcome","setBulkOutcome","bulkAction","setBulkAction","chatReloadInterval","getInfo","CHAT_HISTORY","log","setInterval","FETCH_INTERVAL","nameFilters","createUserNameFilters","filtered","reduce","acc","curItem","curAuthor","some","item","text","value","sort","nameA","toUpperCase","nameB","updateMessage","messageIndex","findIndex","m","splice","resetBulkOutcome","handleSubmitBulk","bulkVisibility","updatedList","newMessage","handleSubmitBulkShow","handleSubmitBulkHide","bulkDivClasses","classNames","active","loading","disabled","defaultPageSize","showSizeChanger","scroll","y","rowClassName","record","hiddenAt","timestamp","filters","onFilter","localeCompare","ellipsis","body","dangerouslySetInnerHTML","__html","row","rowSelection","onChange","selectedKeys","ADMIN_USERNAME","process","env","NEXT_PUBLIC_ADMIN_USERNAME","ADMIN_STREAMKEY","NEXT_PUBLIC_ADMIN_STREAMKEY","NEXT_PUBLIC_API_HOST","API_LOCATION","STATUS","SERVER_CONFIG","SERVER_CONFIG_UPDATE_URL","VIEWERS_OVER_TIME","ACTIVE_VIEWER_DETAILS","CONNECTED_CLIENTS","DISABLED_USERS","BANNED_IPS","BANNED_IP_REMOVE","MODERATORS","HARDWARE_STATS","LOGS_ALL","LOGS_WARN","UPLOAD_EMOJI","DELETE_EMOJI","ACCESS_TOKENS","DELETE_ACCESS_TOKEN","CREATE_ACCESS_TOKEN","WEBHOOKS","DELETE_WEBHOOK","CREATE_WEBHOOK","SOCIAL_PLATFORMS_LIST","FEDERATION_MESSAGE_SEND","FOLLOWERS","FOLLOWERS_PENDING","FOLLOWERS_BLOCKED","SET_FOLLOWER_APPROVAL","FEDERATION_ACTIONS","API_STREAM_HEALTH_METRICS","UPDATE_STREAM_KEYS","API_YP_RESET","url","options","requestOptions","JSON","stringify","encoded","btoa","headers","Authorization","mode","credentials","response","fetch","json","ok","status","getUnauthedData","opts","fetchExternalData","referrerPolicy","referrer","getGithubRelease","VPAT","upgradeVersionAvailable","currentVersion","recentRelease","recentReleaseVersion","tag_name","substr","upToDate","local","remote","test","lparts","split","rparts","i","l","parseInt","r","formatIPAddress","ipAddress","ipAddressComponents","ip","join","slice","obj","Object","keys","constructor","padLeft","pad","String","repeat","parseSecondsToDurationString","seconds","finiteSeconds","Number","isFinite","Math","abs","days","floor","daysString","hours","hoursString","minString","secsString","uaString","parser","UAParser","device","os","browser","major","browserVersion","version","osVersion","osName","model","deviceString"],"sourceRoot":""}