(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559],{10887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(14518)}])},14518:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var o=n(85893),r=n(48689),i=n(6880),s=n(26713),a=n(71577),c=n(48213),u=n(77916),l=n(67294),d=n(73615),m=n(64777),f=n(60956),j=n(41983),p=n(90745);let{Title:g,Paragraph:y}=i.Z,h=()=>{let[e,t]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[h,w]=(0,l.useState)(null),[k,x]=(0,l.useState)(null),Z=null,E=()=>{w(null),clearTimeout(Z),Z=null};async function _(){i(!0);try{let e=await (0,m.rQ)("/api/emoji");t(e)}catch(n){console.error("error fetching emojis",n)}i(!1)}async function v(e){let t="/".concat(e.split("/").slice(3).join("/"));console.log(t),i(!0),w((0,j.kg)(j.Jk,"Deleting emoji..."));try{let n=await (0,m.rQ)(m.Ff,{method:"POST",data:{name:t}});if(n instanceof Error)throw n;w((0,j.kg)(j.zv,"Emoji deleted")),Z=setTimeout(E,p.sI)}catch(o){w((0,j.kg)(j.Un,"".concat(o))),i(!1),Z=setTimeout(E,p.sI)}_()}async function T(){i(!0);try{w((0,j.kg)(j.Jk,"Converting emoji..."));let e=await new Promise((e,t)=>{if(!f.dr.includes(k.type)){let n="File type is not supported: ".concat(k.type);return t(n)}(0,f.y3)(k,t=>e({name:k.name,url:t}))});w((0,j.kg)(j.Jk,"Uploading emoji..."));let t=await (0,m.rQ)(m.Qc,{method:"POST",data:{name:e.name,data:e.url}});if(t instanceof Error)throw t;w((0,j.kg)(j.zv,"Emoji uploaded successfully!")),_()}catch(n){w((0,j.kg)(j.Un,"".concat(n)))}Z=setTimeout(E,p.sI),i(!1)}return(0,l.useEffect)(()=>{_()},[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(g,{children:"Emojis"}),(0,o.jsx)(y,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename will be used as emoji name."}),(0,o.jsx)(c.Z,{rowKey:e=>e.url,dataSource:e,columns:[{title:"",key:"delete",render:(e,t)=>(0,o.jsx)(s.Z,{size:"middle",children:(0,o.jsx)(a.Z,{onClick:()=>v(t.url),icon:(0,o.jsx)(r.Z,{})})})},{title:"Name",key:"name",dataIndex:"name"},{title:"Emoji",key:"url",render:(e,t)=>(0,o.jsx)("img",{src:t.url,alt:t.name,style:{maxWidth:"2vw"}})}],pagination:!1}),(0,o.jsx)("br",{}),(0,o.jsx)(u.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:f.dr.join(","),beforeUpload:x,customRequest:T,disabled:n,children:(0,o.jsx)(a.Z,{type:"primary",disabled:n,children:"Upload new emoji"})}),(0,o.jsx)(d.Z,{status:h})]})};var w=h},60956:function(e,t,n){"use strict";n.d(t,{Z7:function(){return o},dr:function(){return r},kR:function(){return s},y3:function(){return i}});let o=2097152,r=["image/png","image/jpeg","image/gif"];function i(e,t){let n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}function s(e){let t=Math.floor(Math.log(e)/Math.log(1024)),n=1*Number((e/Math.pow(1024,t)).toFixed(2));return"".concat(n," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}},41983:function(e,t,n){"use strict";n.d(t,{Jk:function(){return l},Un:function(){return c},dG:function(){return m},kg:function(){return j},zv:function(){return d}});var o=n(85893),r=n(89739),i=n(21640),s=n(50888),a=n(28058);let c="error",u="invalid",l="proessing",d="success",m="warning",f={[d]:{type:d,icon:(0,o.jsx)(r.Z,{style:{color:"green"}}),message:"Success!"},[c]:{type:c,icon:(0,o.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[u]:{type:u,icon:(0,o.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[l]:{type:l,icon:(0,o.jsx)(s.Z,{}),message:""},[m]:{type:m,icon:(0,o.jsx)(a.Z,{style:{color:"#fc0"}}),message:""}};function j(e,t){return e&&f[e]?t?{type:e,icon:f[e].icon,message:t}:f[e]:null}}},function(e){e.O(0,[5596,481,173,1407,4083,6880,3174,1577,6386,3013,3698,2459,8213,9915,7910,7916,2571,745,9774,2888,179],function(){return e(e.s=10887)}),_N_E=e.O()}]);
//# sourceMappingURL=emojis-6954e7542187683a.js.map