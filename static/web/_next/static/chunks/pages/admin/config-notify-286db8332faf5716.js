(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4440],{7148:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-notify",function(){return s(26590)}])},46551:function(e,n,s){"use strict";s.d(n,{$7:function(){return g},Kx:function(){return p},Sk:function(){return m},xA:function(){return f}});var t=s(85893),a=s(71577),i=s(94184),l=s.n(i),r=s(67294),o=s(90745),c=s(41983),d=s(99519),u=s(73615),h=s(79139);let p="default",m="textarea",f="url",g=e=>{let{apiPath:n,configPath:s="",initialValue:i,useTrim:p,useTrimLead:m,...f}=e,[g,x]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),y=(0,r.useContext)(d.aC),{setFieldInConfigState:j}=y||{},k=null,{fieldName:w,required:C,tip:N,status:S,value:T,onChange:E,onSubmit:Z}=f,P=()=>{x(null),b(!1),clearTimeout(k),k=null};(0,r.useEffect)(()=>{C&&(""===T||null===T)||T===i?b(!1):(P(),b(!0))},[T]);let L=e=>{let{fieldName:n,value:s}=e;if(E){let t=s;p?t=s.trim():m&&(t=s.replace(/^\s+/g,"")),E({fieldName:n,value:t})}},U=e=>{let{value:n}=e;E&&C&&""===n&&E({fieldName:w,value:i})},_=async()=>{(C&&""!==T||T!==i)&&(x((0,c.kg)(c.Jk)),await (0,o.Si)({apiPath:n,data:{value:T},onSuccess:()=>{j({fieldName:w,value:T,path:s}),x((0,c.kg)(c.zv))},onError:e=>{x((0,c.kg)(c.Un,"There was an error: ".concat(e)))}}),k=setTimeout(P,o.sI),Z&&Z())},M=l()({"textfield-with-submit-container":!0,submittable:v});return(0,t.jsxs)("div",{className:M,children:[(0,t.jsx)("div",{className:"textfield-component",children:(0,t.jsx)(h.nv,{...f,onSubmit:null,onBlur:U,onChange:L})}),(0,t.jsxs)("div",{className:"formfield-container lower-container",children:[(0,t.jsx)("p",{className:"label-spacer"}),(0,t.jsxs)("div",{className:"lower-content",children:[(0,t.jsx)("div",{className:"field-tip",children:N}),(0,t.jsx)(u.E,{status:S||g}),(0,t.jsx)("div",{className:"update-button-container",children:(0,t.jsx)(a.Z,{type:"primary",size:"small",className:"submit-button",onClick:_,disabled:!v,children:"Update"})})]})]})]})};g.defaultProps={configPath:"",initialValue:""}},6979:function(e,n,s){"use strict";s.d(n,{Z:function(){return d}});var t=s(85893),a=s(67294),i=s(94594),l=s(41983),r=s(73615),o=s(90745),c=s(99519);let d=e=>{let{apiPath:n,checked:s,reversed:d=!1,configPath:u="",disabled:h=!1,fieldName:p,label:m,tip:f,useSubmit:g,onChange:x}=e,[v,b]=(0,a.useState)(null),y=null,j=(0,a.useContext)(c.aC),{setFieldInConfigState:k}=j||{},w=()=>{b(null),clearTimeout(y),y=null},C=async e=>{if(g){b((0,l.kg)(l.Jk));let s=d?!e:e;await (0,o.Si)({apiPath:n,data:{value:s},onSuccess:()=>{k({fieldName:p,value:s,path:u}),b((0,l.kg)(l.zv))},onError:e=>{b((0,l.kg)(l.Un,"There was an error: ".concat(e)))}}),y=setTimeout(w,o.sI)}x&&x(e)},N=null!==v&&v.type===l.Jk;return(0,t.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[m&&(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:m})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)(i.Z,{className:"switch field-".concat(p),loading:N,onChange:C,defaultChecked:s,checked:s,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:h}),(0,t.jsx)(r.E,{status:v})]}),(0,t.jsx)("p",{className:"field-tip",children:f})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},26590:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return Z}});var t=s(85893),a=s(6880),i=s(14670),l=s(71230),r=s(15746),o=s(71577),c=s(67294),d=s(41664),u=s.n(d),h=s(99519),p=s(79139),m=s(73615),f=s(90745),g=s(6979),x=s(41983);let{Title:v}=a.Z,b=()=>{let e=(0,c.useContext)(h.aC),{serverConfig:n,setFieldInConfigState:s}=e||{},{notifications:a}=n||{},{discord:i}=a||{},{enabled:l,webhook:r,goLiveMessage:d}=i||{},[u,b]=(0,c.useState)({}),[y,j]=(0,c.useState)(null),[k,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{b({enabled:l,webhook:r,goLiveMessage:d})},[a,i]);let C=()=>""!==r&&""!==d,N=e=>{let{fieldName:n,value:s}=e;b({...u,[n]:s}),w(C())},S=()=>{j(null),clearTimeout(null)},T=async()=>{await (0,f.Si)({apiPath:"/notifications/discord",data:{value:u},onSuccess:()=>{s({fieldName:"discord",value:u,path:"notifications"}),j((0,x.kg)(x.zv,"Updated.")),setTimeout(S,f.sI)},onError:e=>{j((0,x.kg)(x.Un,e)),setTimeout(S,f.sI)}})},E=e=>{N({fieldName:"enabled",value:e})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{children:"Discord"}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Let your Discord channel know each time you go live."}),(0,t.jsxs)("p",{className:"description reduced-margins",children:[(0,t.jsx)("a",{href:"https://support.discord.com/hc/en-us/articles/228383668",target:"_blank",rel:"noreferrer",children:"Create a webhook"})," ","under ",(0,t.jsx)("i",{children:"Edit Channel / Integrations"})," on your Discord channel and provide it below."]}),(0,t.jsx)(g.Z,{apiPath:"",fieldName:"discordEnabled",label:"Enable Discord",checked:u.enabled,onChange:E}),(0,t.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.oy.webhookUrl,required:!0,value:u.webhook,onChange:N})}),(0,t.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.oy.goLiveMessage,required:!0,value:u.goLiveMessage,onChange:N})}),(0,t.jsx)(o.Z,{type:"primary",onClick:T,style:{display:k?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Save"}),(0,t.jsx)(m.E,{status:y})]})},{Title:y}=a.Z,j=()=>{let e=(0,c.useContext)(h.aC),{serverConfig:n,setFieldInConfigState:s}=e||{},{notifications:a}=n||{},{browser:i}=a||{},{enabled:l,goLiveMessage:r}=i||{},[d,u]=(0,c.useState)({}),[v,b]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1);(0,c.useEffect)(()=>{u({enabled:l,goLiveMessage:r})},[a,i]);let w=()=>!0,C=e=>{let{fieldName:n,value:s}=e;console.log(n,s),u({...d,[n]:s}),k(w())},N=e=>{C({fieldName:"enabled",value:e})},S=()=>{b(null),clearTimeout(null)},T=async()=>{await (0,f.Si)({apiPath:"/notifications/browser",data:{value:d},onSuccess:()=>{s({fieldName:"browser",value:d,path:"notifications"}),b((0,x.kg)(x.zv,"Updated.")),setTimeout(S,f.sI)},onError:e=>{b((0,x.kg)(x.Un,e)),setTimeout(S,f.sI)}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{children:"Browser Alerts"}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Viewers can opt into being notified when you go live with their browser."}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Not all browsers support this."}),(0,t.jsx)(g.Z,{apiPath:"",fieldName:"enabled",label:"Enable browser notifications",onChange:N,checked:d.enabled}),(0,t.jsx)("div",{style:{display:d.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.mv.goLiveMessage,required:!0,type:p.Sk,value:d.goLiveMessage,onChange:C})}),(0,t.jsx)(o.Z,{type:"primary",style:{display:j?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},onClick:T,children:"Save"}),(0,t.jsx)(m.E,{status:v})]})};var k=s(46551);let{Title:w}=a.Z,C=()=>{let e=(0,c.useContext)(h.aC),{serverConfig:n,setFieldInConfigState:s}=e||{},{notifications:a}=n||{},{twitter:i}=a||{},[l,r]=(0,c.useState)({}),[d,u]=(0,c.useState)(null),[v,b]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let{enabled:e,apiKey:n,apiSecret:s,accessToken:t,accessTokenSecret:a,bearerToken:l,goLiveMessage:o}=i||{};r({enabled:e,apiKey:n,apiSecret:s,accessToken:t,accessTokenSecret:a,bearerToken:l,goLiveMessage:o})},[i]);let y=()=>{let{apiKey:e,apiSecret:n,accessToken:s,accessTokenSecret:t,bearerToken:a,goLiveMessage:i}=l;return!!e&&!!n&&!!s&&!!t&&!!a&&!!i};(0,c.useEffect)(()=>{b(y())},[l]);let j=e=>{let{fieldName:n,value:s}=e;r({...l,[n]:s})},C=e=>{let n=l.enabled;return j({fieldName:"enabled",value:e}),e!==n},N=()=>{u(null),clearTimeout(null),b(!1)},S=async()=>{await (0,f.Si)({apiPath:"/notifications/twitter",data:{value:l},onSuccess:()=>{s({fieldName:"twitter",value:l,path:"notifications"}),u((0,x.kg)(x.zv,"Updated.")),setTimeout(N,f.sI)},onError:e=>{u((0,x.kg)(x.Un,e)),setTimeout(N,f.sI)}})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{children:"Twitter"}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Let your Twitter followers know each time you go live."}),(0,t.jsxs)("div",{style:{display:l.enabled?"block":"none"},children:[(0,t.jsxs)("p",{className:"description reduced-margins",children:[(0,t.jsx)("a",{href:"https://owncast.online/docs/notifications",target:"_blank",rel:"noreferrer",children:"Read how to configure your Twitter account"})," ","to support posting from Owncast."]}),(0,t.jsxs)("p",{className:"description reduced-margins",children:[(0,t.jsx)("a",{href:"https://developer.twitter.com/en/portal/dashboard",target:"_blank",rel:"noreferrer",children:"And then get your Twitter developer credentials"})," ","to fill in below."]})]}),(0,t.jsx)(g.Z,{apiPath:"",fieldName:"enabled",label:"Enable Twitter",onChange:C,checked:l.enabled}),(0,t.jsx)("div",{style:{display:l.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.$Z.apiKey,required:!0,value:l.apiKey,onChange:j})}),(0,t.jsx)("div",{style:{display:l.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.$Z.apiSecret,type:p.A8,required:!0,value:l.apiSecret,onChange:j})}),(0,t.jsx)("div",{style:{display:l.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.$Z.accessToken,required:!0,value:l.accessToken,onChange:j})}),(0,t.jsx)("div",{style:{display:l.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.$Z.accessTokenSecret,type:p.A8,required:!0,value:l.accessTokenSecret,onChange:j})}),(0,t.jsx)("div",{style:{display:l.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.$Z.bearerToken,required:!0,value:l.bearerToken,onChange:j})}),(0,t.jsx)("div",{style:{display:l.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...f.$Z.goLiveMessage,type:k.Kx,required:!0,value:l.goLiveMessage,onChange:j})}),(0,t.jsx)(o.Z,{type:"primary",onClick:S,style:{display:v?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Save"}),(0,t.jsx)(m.E,{status:d})]})},{Title:N}=a.Z,S=()=>{let e=(0,c.useContext)(h.aC),{serverConfig:n}=e||{},{federation:s}=n||{},{enabled:a}=s||{},[i,l]=(0,c.useState)({});return(0,c.useEffect)(()=>{l({enabled:a})},[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N,{children:"Fediverse Social"}),(0,t.jsx)("p",{className:"description",children:"Enabling the Fediverse social features will not just alert people to when you go live, but also enable other functionality."}),(0,t.jsxs)("p",{children:["Fediverse social features:"," ",(0,t.jsx)("span",{style:{color:s.enabled?"green":"red"},children:i.enabled?"Enabled":"Disabled"})]}),(0,t.jsx)(u(),{passHref:!0,href:"/config-federation",children:(0,t.jsx)(o.Z,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Configure"})})]})};var T=s(37174);let{Title:E}=a.Z;function Z(){let[e,n]=(0,c.useState)(null),s=(0,c.useContext)(h.aC),{serverConfig:a}=s||{},{yp:d}=a,{instanceUrl:p}=d,[m,g]=(0,c.useState)(!1);(0,c.useEffect)(()=>{n({instanceUrl:p})},[d]);let x=()=>{m&&n({...e,enabled:!1})},v=s=>{let{fieldName:t,value:a}=s;g((0,T.jv)(a)),n({...e,[t]:a})},y=""!==p,w=!y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{message:"You must set your server URL before you can enable this feature.",type:"warning",showIcon:!0}),(0,t.jsx)("br",{}),(0,t.jsx)(k.$7,{fieldName:"instanceUrl",...f.yi,value:(null==e?void 0:e.instanceUrl)||"",initialValue:d.instanceUrl,type:k.xA,onChange:v,onSubmit:x,required:!0})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E,{children:"Notifications"}),(0,t.jsxs)("p",{className:"description",children:["Let your viewers know when you go live by supporting any of the below notification channels."," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/notifications/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more about live notifications."})]}),w,(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(r.Z,{span:10,className:"form-module ".concat(y?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(j,{})}),(0,t.jsx)(r.Z,{span:10,className:"form-module ".concat(y?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(C,{})}),(0,t.jsx)(r.Z,{span:10,className:"form-module ".concat(y?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(b,{})}),(0,t.jsx)(r.Z,{span:10,className:"form-module ".concat(y?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(S,{})}),(0,t.jsxs)(r.Z,{span:10,className:"form-module ".concat(y?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:[(0,t.jsx)(E,{children:"Custom"}),(0,t.jsx)("p",{className:"description",children:"Build your own notifications by using custom webhooks."}),(0,t.jsx)(u(),{passHref:!0,href:"/webhooks",children:(0,t.jsx)(o.Z,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Create"})})]})]})]})}},41983:function(e,n,s){"use strict";s.d(n,{Jk:function(){return d},Un:function(){return o},dG:function(){return h},kg:function(){return m},zv:function(){return u}});var t=s(85893),a=s(89739),i=s(21640),l=s(50888),r=s(28058);let o="error",c="invalid",d="proessing",u="success",h="warning",p={[u]:{type:u,icon:(0,t.jsx)(a.Z,{style:{color:"green"}}),message:"Success!"},[o]:{type:o,icon:(0,t.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[c]:{type:c,icon:(0,t.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[d]:{type:d,icon:(0,t.jsx)(l.Z,{}),message:""},[h]:{type:h,icon:(0,t.jsx)(r.Z,{style:{color:"#fc0"}}),message:""}};function m(e,n){return e&&p[e]?n?{type:e,icon:p[e].icon,message:n}:p[e]:null}},99519:function(e,n,s){"use strict";s.d(n,{aC:function(){return u}});var t=s(85893),a=s(67294),i=s(45697),l=s.n(i),r=s(64777),o=s(90745);let c={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[o.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},d={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},u=a.createContext({...d,serverConfig:c,setFieldInConfigState:e=>null}),h=e=>{let{children:n}=e,[s,i]=(0,a.useState)(d),[l,o]=(0,a.useState)(c),h=async()=>{try{let e=await (0,r.rQ)(r.Q_);i({...e})}catch(n){}},p=async()=>{try{let e=await (0,r.rQ)(r.bl);o(e)}catch(n){}},m=e=>{let{fieldName:n,value:s,path:t}=e,a=t?{...l,[t]:{...l[t],[n]:s}}:{...l,[n]:s};o(a)};(0,a.useEffect)(()=>{let e=null;return h(),e=setInterval(h,r.NE),p(),()=>{clearInterval(e)}},[]);let f={...s,serverConfig:l,setFieldInConfigState:m};return(0,t.jsx)(u.Provider,{value:f,children:n})};h.propTypes={children:l().element.isRequired},n.ZP=h}},function(e){e.O(0,[5596,481,173,1407,4083,6880,1577,9915,1664,5899,745,9774,2888,179],function(){return e(e.s=7148)}),_N_E=e.O()}]);
//# sourceMappingURL=config-notify-286db8332faf5716.js.map