{"version":3,"file":"static/chunks/pages/admin/webhooks-df4a780571d889b3.js","mappings":"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","sources":["webpack://_N_E/?1954","webpack://_N_E/./pages/admin/webhooks.tsx","webpack://_N_E/./utils/apis.ts","webpack://_N_E/./utils/urls.ts","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/webhooks\",\n      function () {\n        return require(\"private-next-pages/admin/webhooks.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/webhooks\"])\n      });\n    }\n  ","/* eslint-disable react/destructuring-assignment */\nimport { DeleteOutlined } from '@ant-design/icons';\nimport {\n  Button,\n  Checkbox,\n  Col,\n  Input,\n  Modal,\n  Row,\n  Space,\n  Table,\n  Tag,\n  Tooltip,\n  Typography,\n} from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { CREATE_WEBHOOK, DELETE_WEBHOOK, fetchData, WEBHOOKS } from '../../utils/apis';\nimport { isValidUrl, DEFAULT_TEXTFIELD_URL_PATTERN } from '../../utils/urls';\n\nconst { Title, Paragraph } = Typography;\n\nconst availableEvents = {\n  CHAT: { name: 'Chat messages', description: 'When a user sends a chat message', color: 'purple' },\n  USER_JOINED: { name: 'User joined', description: 'When a user joins the chat', color: 'green' },\n  NAME_CHANGE: {\n    name: 'User name changed',\n    description: 'When a user changes their name',\n    color: 'blue',\n  },\n  'VISIBILITY-UPDATE': {\n    name: 'Message visibility changed',\n    description: 'When a message visibility changes, likely due to moderation',\n    color: 'red',\n  },\n  STREAM_STARTED: { name: 'Stream started', description: 'When a stream starts', color: 'orange' },\n  STREAM_STOPPED: { name: 'Stream stopped', description: 'When a stream stops', color: 'cyan' },\n};\n\nfunction convertEventStringToTag(eventString: string) {\n  if (!eventString || !availableEvents[eventString]) {\n    return null;\n  }\n\n  const event = availableEvents[eventString];\n\n  return (\n    <Tooltip key={eventString} title={event.description}>\n      <Tag color={event.color}>{event.name}</Tag>\n    </Tooltip>\n  );\n}\ninterface Props {\n  onCancel: () => void;\n  onOk: any; // todo: make better type\n  open: boolean;\n}\n\nconst NewWebhookModal = (props: Props) => {\n  const { onOk, onCancel, open } = props;\n\n  const [selectedEvents, setSelectedEvents] = useState([]);\n  const [webhookUrl, setWebhookUrl] = useState('');\n\n  const events = Object.keys(availableEvents).map(key => ({\n    value: key,\n    label: availableEvents[key].description,\n  }));\n\n  function onChange(checkedValues) {\n    setSelectedEvents(checkedValues);\n  }\n\n  function selectAll() {\n    setSelectedEvents(Object.keys(availableEvents));\n  }\n\n  function save() {\n    onOk(webhookUrl, selectedEvents);\n\n    // Reset the modal\n    setWebhookUrl('');\n    setSelectedEvents(null);\n  }\n\n  const okButtonProps = {\n    disabled: selectedEvents?.length === 0 || !isValidUrl(webhookUrl),\n  };\n\n  const checkboxes = events.map(singleEvent => (\n    <Col span={8} key={singleEvent.value}>\n      <Checkbox value={singleEvent.value}>{singleEvent.label}</Checkbox>\n    </Col>\n  ));\n\n  return (\n    <Modal\n      title=\"Create New Webhook\"\n      open={open}\n      onOk={save}\n      onCancel={onCancel}\n      okButtonProps={okButtonProps}\n    >\n      <div>\n        <Input\n          value={webhookUrl}\n          placeholder=\"https://myserver.com/webhook\"\n          onChange={input => setWebhookUrl(input.currentTarget.value.trim())}\n          type=\"url\"\n          pattern={DEFAULT_TEXTFIELD_URL_PATTERN}\n        />\n      </div>\n\n      <p>Select the events that will be sent to this webhook.</p>\n      <Checkbox.Group style={{ width: '100%' }} value={selectedEvents} onChange={onChange}>\n        <Row>{checkboxes}</Row>\n      </Checkbox.Group>\n      <p>\n        <Button type=\"primary\" onClick={selectAll}>\n          Select all\n        </Button>\n      </p>\n    </Modal>\n  );\n};\n\nconst Webhooks = () => {\n  const [webhooks, setWebhooks] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  function handleError(error) {\n    console.error('error', error);\n  }\n\n  async function getWebhooks() {\n    try {\n      const result = await fetchData(WEBHOOKS);\n      setWebhooks(result);\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  useEffect(() => {\n    getWebhooks();\n  }, []);\n\n  async function handleDelete(id) {\n    try {\n      await fetchData(DELETE_WEBHOOK, { method: 'POST', data: { id } });\n      getWebhooks();\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  async function handleSave(url: string, events: string[]) {\n    try {\n      const newHook = await fetchData(CREATE_WEBHOOK, {\n        method: 'POST',\n        data: { url, events },\n      });\n      setWebhooks(webhooks.concat(newHook));\n    } catch (error) {\n      handleError(error);\n    }\n  }\n\n  const showCreateModal = () => {\n    setIsModalOpen(true);\n  };\n\n  const handleModalSaveButton = (url, events) => {\n    setIsModalOpen(false);\n    handleSave(url, events);\n  };\n\n  const handleModalCancelButton = () => {\n    setIsModalOpen(false);\n  };\n\n  const columns = [\n    {\n      title: '',\n      key: 'delete',\n      render: (text, record) => (\n        <Space size=\"middle\">\n          <Button onClick={() => handleDelete(record.id)} icon={<DeleteOutlined />} />\n        </Space>\n      ),\n    },\n    {\n      title: 'URL',\n      dataIndex: 'url',\n      key: 'url',\n    },\n    {\n      title: 'Events',\n      dataIndex: 'events',\n      key: 'events',\n      render: events => (\n        <>\n          {\n            // eslint-disable-next-line arrow-body-style\n            events.map(event => {\n              return convertEventStringToTag(event);\n            })\n          }\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <div>\n      <Title>Webhooks</Title>\n      <Paragraph>\n        A webhook is a callback made to an external API in response to an event that takes place\n        within Owncast. This can be used to build chat bots or sending automatic notifications that\n        you&apos;ve started streaming.\n      </Paragraph>\n      <Paragraph>\n        Read more about how to use webhooks, with examples, at{' '}\n        <a\n          href=\"https://owncast.online/docs/integrations/?source=admin\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          our documentation\n        </a>\n        .\n      </Paragraph>\n\n      <Table\n        rowKey={record => record.id}\n        columns={columns}\n        dataSource={webhooks}\n        pagination={false}\n      />\n      <br />\n      <Button type=\"primary\" onClick={showCreateModal}>\n        Create Webhook\n      </Button>\n      <NewWebhookModal\n        open={isModalOpen}\n        onOk={handleModalSaveButton}\n        onCancel={handleModalCancelButton}\n      />\n    </div>\n  );\n};\nexport default Webhooks;\n","/* eslint-disable prefer-destructuring */\nconst ADMIN_USERNAME = process.env.NEXT_PUBLIC_ADMIN_USERNAME;\nconst ADMIN_STREAMKEY = process.env.NEXT_PUBLIC_ADMIN_STREAMKEY;\nexport const NEXT_PUBLIC_API_HOST = process.env.NEXT_PUBLIC_API_HOST;\n\nconst API_LOCATION = `${NEXT_PUBLIC_API_HOST}api/admin/`;\n\nexport const FETCH_INTERVAL = 15000;\n\n// Current inbound broadcaster info\nexport const STATUS = `${API_LOCATION}status`;\n\n// Disconnect inbound stream\nexport const DISCONNECT = `${API_LOCATION}disconnect`;\n\n// Change the current streaming key in memory\nexport const STREAMKEY_CHANGE = `${API_LOCATION}changekey`;\n\n// Current server config\nexport const SERVER_CONFIG = `${API_LOCATION}serverconfig`;\n\n// Base url to update config settings\nexport const SERVER_CONFIG_UPDATE_URL = `${API_LOCATION}config`;\n\n// Get viewer count over time\nexport const VIEWERS_OVER_TIME = `${API_LOCATION}viewersOverTime`;\n\n// Get active viewer details\nexport const ACTIVE_VIEWER_DETAILS = `${API_LOCATION}viewers`;\n\n// Get currently connected chat clients\nexport const CONNECTED_CLIENTS = `${API_LOCATION}chat/clients`;\n\n// Get list of disabled/blocked chat users\nexport const DISABLED_USERS = `${API_LOCATION}chat/users/disabled`;\n\n// Disable/enable a single user\nexport const USER_ENABLED_TOGGLE = `${API_LOCATION}chat/users/setenabled`;\n\n// Get banned IP addresses\nexport const BANNED_IPS = `${API_LOCATION}chat/users/ipbans`;\n\n// Remove IP ban\nexport const BANNED_IP_REMOVE = `${API_LOCATION}chat/users/ipbans/remove`;\n\n// Disable/enable a single user\nexport const USER_SET_MODERATOR = `${API_LOCATION}chat/users/setmoderator`;\n\n// Get list of moderators\nexport const MODERATORS = `${API_LOCATION}chat/users/moderators`;\n\n// Get hardware stats\nexport const HARDWARE_STATS = `${API_LOCATION}hardwarestats`;\n\n// Get all logs\nexport const LOGS_ALL = `${API_LOCATION}logs`;\n\n// Get warnings + errors\nexport const LOGS_WARN = `${API_LOCATION}logs/warnings`;\n\n// Get chat history\nexport const CHAT_HISTORY = `${API_LOCATION}chat/messages`;\n\n// Get chat history\nexport const UPDATE_CHAT_MESSGAE_VIZ = `/api/admin/chat/messagevisibility`;\n\n// Upload a new custom emoji\nexport const UPLOAD_EMOJI = `${API_LOCATION}emoji/upload`;\n\n// Delete a custom emoji\nexport const DELETE_EMOJI = `${API_LOCATION}emoji/delete`;\n\n// Get all access tokens\nexport const ACCESS_TOKENS = `${API_LOCATION}accesstokens`;\n\n// Delete a single access token\nexport const DELETE_ACCESS_TOKEN = `${API_LOCATION}accesstokens/delete`;\n\n// Create a new access token\nexport const CREATE_ACCESS_TOKEN = `${API_LOCATION}accesstokens/create`;\n\n// Get webhooks\nexport const WEBHOOKS = `${API_LOCATION}webhooks`;\n\n// Delete a single webhook\nexport const DELETE_WEBHOOK = `${API_LOCATION}webhooks/delete`;\n\n// Create a single webhook\nexport const CREATE_WEBHOOK = `${API_LOCATION}webhooks/create`;\n\n// hard coded social icons list\nexport const SOCIAL_PLATFORMS_LIST = `${NEXT_PUBLIC_API_HOST}api/socialplatforms`;\n\n// set external action links\nexport const EXTERNAL_ACTIONS = `${API_LOCATION}api/externalactions`;\n\n// send a message to the fediverse\nexport const FEDERATION_MESSAGE_SEND = `${API_LOCATION}federation/send`;\n\n// Get followers\nexport const FOLLOWERS = `${API_LOCATION}followers`;\n\n// Get followers pending approval\nexport const FOLLOWERS_PENDING = `${API_LOCATION}followers/pending`;\n\n// Get followers who were blocked or rejected\nexport const FOLLOWERS_BLOCKED = `${API_LOCATION}followers/blocked`;\n\n// Approve, reject a follow request\nexport const SET_FOLLOWER_APPROVAL = `${API_LOCATION}followers/approve`;\n\n// List of inbound federated actions that took place.\nexport const FEDERATION_ACTIONS = `${API_LOCATION}federation/actions`;\n\nexport const API_STREAM_HEALTH_METRICS = `${API_LOCATION}metrics/video`;\n\n// Save an array of stream keys\nexport const UPDATE_STREAM_KEYS = `${API_LOCATION}config/streamkeys`;\n\nexport const API_YP_RESET = `${API_LOCATION}yp/reset`;\n\nexport const TEMP_UPDATER_API = LOGS_ALL;\n\nconst GITHUB_RELEASE_URL = 'https://api.github.com/repos/owncast/owncast/releases/latest';\n\ninterface FetchOptions {\n  data?: any;\n  method?: string;\n  auth?: boolean;\n}\n\nexport async function fetchData(url: string, options?: FetchOptions) {\n  const { data, method = 'GET', auth = true } = options || {};\n\n  // eslint-disable-next-line no-undef\n  const requestOptions: RequestInit = {\n    method,\n  };\n\n  if (data) {\n    requestOptions.body = JSON.stringify(data);\n  }\n\n  if (auth && ADMIN_USERNAME && ADMIN_STREAMKEY) {\n    const encoded = btoa(`${ADMIN_USERNAME}:${ADMIN_STREAMKEY}`);\n    requestOptions.headers = {\n      Authorization: `Basic ${encoded}`,\n    };\n    requestOptions.mode = 'cors';\n    requestOptions.credentials = 'include';\n  }\n\n  try {\n    const response = await fetch(url, requestOptions);\n    const json = await response.json();\n\n    if (!response.ok) {\n      const message = json.message || `An error has occurred: ${response.status}`;\n      throw new Error(message);\n    }\n    return json;\n  } catch (error) {\n    console.error(error);\n    return error;\n    // console.log(error)\n    // throw new Error(error)\n  }\n}\n\nexport async function getUnauthedData(url: string, options?: FetchOptions) {\n  const opts = {\n    method: 'GET',\n    auth: false,\n    ...options,\n  };\n  return fetchData(url, opts);\n}\n\nexport async function fetchExternalData(url: string) {\n  try {\n    const response = await fetch(url, {\n      referrerPolicy: 'no-referrer', // Send no referrer header for privacy reasons.\n      referrer: '',\n    });\n    if (!response.ok) {\n      const message = `An error has occured: ${response.status}`;\n      throw new Error(message);\n    }\n    const json = await response.json();\n    return json;\n  } catch (error) {\n    console.log(error);\n  }\n  return {};\n}\n\nexport async function getGithubRelease() {\n  return fetchExternalData(GITHUB_RELEASE_URL);\n}\n\n// Stolen from https://gist.github.com/prenagha/98bbb03e27163bc2f5e4\nconst VPAT = /^\\d+(\\.\\d+){0,2}$/;\nfunction upToDate(local, remote) {\n  if (!local || !remote || local.length === 0 || remote.length === 0) return false;\n  if (local === remote) return true;\n  if (VPAT.test(local) && VPAT.test(remote)) {\n    const lparts = local.split('.');\n    while (lparts.length < 3) lparts.push('0');\n    const rparts = remote.split('.');\n    while (rparts.length < 3) rparts.push('0');\n    // eslint-disable-next-line no-plusplus\n    for (let i = 0; i < 3; i++) {\n      const l = parseInt(lparts[i], 10);\n      const r = parseInt(rparts[i], 10);\n      if (l === r)\n        // eslint-disable-next-line no-continue\n        continue;\n      return l > r;\n    }\n    return true;\n  }\n  return local >= remote;\n}\n\n// Make a request to the server status API and the Github releases API\n// and return a release if it's newer than the server version.\nexport async function upgradeVersionAvailable(currentVersion) {\n  const recentRelease = await getGithubRelease();\n  let recentReleaseVersion = recentRelease.tag_name;\n\n  if (recentReleaseVersion.substr(0, 1) === 'v') {\n    recentReleaseVersion = recentReleaseVersion.substr(1);\n  }\n\n  if (!upToDate(currentVersion, recentReleaseVersion)) {\n    return recentReleaseVersion;\n  }\n\n  return null;\n}\n","// to use with <input type=\"url\"> fields, as the default pattern only checks for `:`,\nexport const DEFAULT_TEXTFIELD_URL_PATTERN = 'https?://.*';\n\n/**\n * Determines if a URL is valid\n * @param {string} url - A URL to validate.\n * @param {string[]} validProtocols - An array of valid protocols. Defaults to web.\n * @returns {boolean} - True if the URI is valid, false otherwise.\n */\nexport function isValidUrl(url: string, validProtocols: string[] = ['http:', 'https:']): boolean {\n  try {\n    const validationObject = new URL(url);\n\n    if (\n      validationObject.protocol === '' ||\n      validationObject.hostname === '' ||\n      !validProtocols.includes(validationObject.protocol)\n    ) {\n      return false;\n    }\n  } catch (e) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Determines if an account is valid by simply checking for a protocol, username\n * and server, delimited by a colon. For example: @username:example.com\n * @param {string} account - An account to validate.\n * @param {string} protocol - The protocol we expect the account to be using.\n * @returns {boolean} - True if the account is valid, false otherwise.\n */\nexport function isValidAccount(account: string, protocol: string): boolean {\n  if (account.startsWith('@')) {\n    // eslint-disable-next-line no-param-reassign\n    account = account.slice(1);\n  }\n\n  const components = account.split(/:|@/);\n  const [service, user, host] = components;\n\n  console.log({ account, protocol, service, user, host });\n  if (service !== protocol) {\n    return false;\n  }\n\n  if (components.length !== 3 || !service || !user || !host) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Determines if an account is valid by simply checking for a protocol, username\n * and server, delimited by a colon. For example: @username:example.com\n * @param {string} account - An account to validate.\n * @returns {boolean} - True if the account is valid, false otherwise.\n */\nexport function isValidMatrixAccount(account: string): boolean {\n  if (account.startsWith('matrix:')) {\n    // eslint-disable-next-line no-param-reassign\n    account = account.slice(7);\n  } else {\n    return false;\n  }\n\n  if (account.startsWith('@')) {\n    // eslint-disable-next-line no-param-reassign\n    account = account.slice(1);\n  }\n\n  const components = account.split(':');\n  const [user, host] = components;\n\n  if (components.length !== 2 || !user || !host) {\n    return false;\n  }\n\n  return true;\n}\n"],"names":["window","__NEXT_P","push","__webpack_require__","Title","Paragraph","Typography","availableEvents","CHAT","name","description","color","USER_JOINED","NAME_CHANGE","STREAM_STARTED","STREAM_STOPPED","NewWebhookModal","onOk","onCancel","open","props","selectedEvents","setSelectedEvents","useState","webhookUrl","setWebhookUrl","events","Object","keys","map","key","value","label","okButtonProps","disabled","length","isValidUrl","checkboxes","singleEvent","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Col","span","Checkbox","jsxs","Modal","title","div","Input","placeholder","onChange","input","currentTarget","trim","type","pattern","DEFAULT_TEXTFIELD_URL_PATTERN","p","style","width","checkedValues","Row","Button","onClick","Webhooks","webhooks","setWebhooks","isModalOpen","setIsModalOpen","handleError","error","console","getWebhooks","result","fetchData","WEBHOOKS","handleDelete","id","DELETE_WEBHOOK","method","data","handleSave","url","newHook","CREATE_WEBHOOK","concat","useEffect","showCreateModal","handleModalSaveButton","handleModalCancelButton","a","href","target","rel","Table","rowKey","record","columns","render","text","Space","size","icon","DeleteOutlined","dataIndex","Fragment","event","convertEventStringToTag","eventString","Tooltip","Tag","dataSource","pagination","br","__webpack_exports__","ADMIN_USERNAME","process","env","NEXT_PUBLIC_ADMIN_USERNAME","ADMIN_STREAMKEY","NEXT_PUBLIC_ADMIN_STREAMKEY","NEXT_PUBLIC_API_HOST","API_LOCATION","FETCH_INTERVAL","STATUS","SERVER_CONFIG","SERVER_CONFIG_UPDATE_URL","VIEWERS_OVER_TIME","ACTIVE_VIEWER_DETAILS","CONNECTED_CLIENTS","DISABLED_USERS","USER_ENABLED_TOGGLE","BANNED_IPS","BANNED_IP_REMOVE","USER_SET_MODERATOR","MODERATORS","HARDWARE_STATS","LOGS_ALL","LOGS_WARN","CHAT_HISTORY","UPDATE_CHAT_MESSGAE_VIZ","UPLOAD_EMOJI","DELETE_EMOJI","ACCESS_TOKENS","DELETE_ACCESS_TOKEN","CREATE_ACCESS_TOKEN","SOCIAL_PLATFORMS_LIST","FEDERATION_MESSAGE_SEND","FOLLOWERS","FOLLOWERS_PENDING","FOLLOWERS_BLOCKED","SET_FOLLOWER_APPROVAL","FEDERATION_ACTIONS","API_STREAM_HEALTH_METRICS","UPDATE_STREAM_KEYS","API_YP_RESET","options","auth","requestOptions","body","JSON","stringify","encoded","btoa","headers","Authorization","mode","credentials","response","fetch","json","ok","message","status","getUnauthedData","opts","fetchExternalData","referrerPolicy","referrer","log","getGithubRelease","VPAT","upgradeVersionAvailable","currentVersion","recentRelease","recentReleaseVersion","tag_name","substr","upToDate","local","remote","test","lparts","split","rparts","i","l","parseInt","r","validProtocols","validationObject","URL","protocol","hostname","includes","e","isValidAccount","account","startsWith","slice","components","service","user","host","isValidMatrixAccount"],"sourceRoot":""}