(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1591],{42011:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-chat",function(){return n(91616)}])},80894:function(e,s,n){"use strict";n.d(s,{Q:function(){return u},Y:function(){return d}});var t=n(85893),a=n(67294),l=n(84485),i=n(20550),r=n(52018),c=n(39664);let{Title:o}=l.Z,u="#5a67d8",d=e=>{let{title:s,description:n,placeholder:l,maxLength:d,values:m,handleDeleteIndex:g,handleCreateString:f,submitStatus:h,continuousStatusMessage:v}=e,[p,b]=(0,a.useState)(""),x=e=>{let{value:s}=e;b(s)},N=()=>{let e=p.trim();f(e),b("")};return(0,t.jsxs)("div",{className:"edit-string-array-container",children:[(0,t.jsx)(o,{level:3,className:"section-title",children:s}),(0,t.jsx)("p",{className:"description",children:n}),(0,t.jsx)("div",{className:"edit-current-strings",children:null==m?void 0:m.map((e,s)=>{let n=()=>{g(s)};return(0,t.jsx)(i.Z,{closable:!0,onClose:n,color:u,children:e},"tag-".concat(e,"-").concat(s))})}),v&&(0,t.jsx)("div",{className:"continuous-status-section",children:(0,t.jsx)(c.E,{status:v})}),(0,t.jsx)("div",{className:"add-new-string-section",children:(0,t.jsx)(r.nv,{fieldName:"string-input",value:p,onChange:x,onPressEnter:N,maxLength:d,placeholder:l,status:h})})]})};d.defaultProps={maxLength:50,description:null,submitStatus:null,continuousStatusMessage:null}},10135:function(e,s,n){"use strict";n.d(s,{$7:function(){return v},Kx:function(){return g},Sk:function(){return f},xA:function(){return h}});var t=n(85893),a=n(71577),l=n(94184),i=n.n(l),r=n(67294),c=n(90745),o=n(41983),u=n(99519),d=n(39664),m=n(52018);let g="default",f="textarea",h="url",v=e=>{let{apiPath:s,configPath:n="",initialValue:l,useTrim:g,useTrimLead:f,...h}=e,[v,p]=(0,r.useState)(null),[b,x]=(0,r.useState)(!1),N=(0,r.useContext)(u.aC),{setFieldInConfigState:j}=N||{},k=null,{fieldName:C,required:S,tip:w,status:y,value:U,onChange:E,onSubmit:P}=h,M=()=>{p(null),x(!1),clearTimeout(k),k=null};(0,r.useEffect)(()=>{S&&(""===U||null===U)||U===l?x(!1):(M(),x(!0))},[U]);let T=e=>{let{fieldName:s,value:n}=e;if(E){let t=n;g?t=n.trim():f&&(t=n.replace(/^\s+/g,"")),E({fieldName:s,value:t})}},_=e=>{let{value:s}=e;E&&S&&""===s&&E({fieldName:C,value:l})},Z=async()=>{(S&&""!==U||U!==l)&&(p((0,o.kg)(o.Jk)),await (0,c.Si)({apiPath:s,data:{value:U},onSuccess:()=>{j({fieldName:C,value:U,path:n}),p((0,o.kg)(o.zv))},onError:e=>{p((0,o.kg)(o.Un,"There was an error: ".concat(e)))}}),k=setTimeout(M,c.sI),P&&P())},D=i()({"textfield-with-submit-container":!0,submittable:b});return(0,t.jsxs)("div",{className:D,children:[(0,t.jsx)("div",{className:"textfield-component",children:(0,t.jsx)(m.nv,{...h,onSubmit:null,onBlur:_,onChange:T})}),(0,t.jsxs)("div",{className:"formfield-container lower-container",children:[(0,t.jsx)("p",{className:"label-spacer"}),(0,t.jsxs)("div",{className:"lower-content",children:[(0,t.jsx)("div",{className:"field-tip",children:w}),(0,t.jsx)(d.E,{status:y||v}),(0,t.jsx)("div",{className:"update-button-container",children:(0,t.jsx)(a.Z,{type:"primary",size:"small",className:"submit-button",onClick:Z,disabled:!b,children:"Update"})})]})]})]})};v.defaultProps={configPath:"",initialValue:""}},73706:function(e,s,n){"use strict";n.d(s,{Z:function(){return u}});var t=n(85893),a=n(67294),l=n(94594),i=n(41983),r=n(39664),c=n(90745),o=n(99519);let u=e=>{let{apiPath:s,checked:n,reversed:u=!1,configPath:d="",disabled:m=!1,fieldName:g,label:f,tip:h,useSubmit:v,onChange:p}=e,[b,x]=(0,a.useState)(null),N=null,j=(0,a.useContext)(o.aC),{setFieldInConfigState:k}=j||{},C=()=>{x(null),clearTimeout(N),N=null},S=async e=>{if(v){x((0,i.kg)(i.Jk));let n=u?!e:e;await (0,c.Si)({apiPath:s,data:{value:n},onSuccess:()=>{k({fieldName:g,value:n,path:d}),x((0,i.kg)(i.zv))},onError:e=>{x((0,i.kg)(i.Un,"There was an error: ".concat(e)))}}),N=setTimeout(C,c.sI)}p&&p(e)},w=null!==b&&b.type===i.Jk;return(0,t.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[f&&(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:f})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)(l.Z,{className:"switch field-".concat(g),loading:w,onChange:S,defaultChecked:n,checked:n,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:m}),(0,t.jsx)(r.E,{status:b})]}),(0,t.jsx)("p",{className:"field-tip",children:h})]})]})};u.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},91616:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return g}});var t=n(85893),a=n(84485),l=n(67294),i=n(52018),r=n(10135),c=n(73706),o=n(80894),u=n(41983),d=n(90745),m=n(99519);function g(){var e;let{Title:s}=a.Z,[n,g]=(0,l.useState)(null),[f,h]=(0,l.useState)(null),[v,p]=(0,l.useState)(null),b=(0,l.useContext)(m.aC),{serverConfig:x,setFieldInConfigState:N}=b||{},{chatDisabled:j,chatJoinMessagesEnabled:k,forbiddenUsernames:C,instanceDetails:S,suggestedUsernames:w,chatEstablishedUserMode:y}=x,{welcomeMessage:U}=S,E=e=>{let{fieldName:s,value:t}=e;g({...n,[s]:t})};function P(){h(null)}function M(){(0,d.Si)({apiPath:d.CJ,data:{value:n.forbiddenUsernames},onSuccess:()=>{N({fieldName:"forbiddenUsernames",value:n.forbiddenUsernames}),h((0,u.kg)(u.zv)),setTimeout(P,d.sI)},onError:e=>{h((0,u.kg)(u.Un,e)),setTimeout(P,d.sI)}})}function T(){p(null)}function _(){(0,d.Si)({apiPath:d.cf,data:{value:n.suggestedUsernames},onSuccess:()=>{N({fieldName:"suggestedUsernames",value:n.suggestedUsernames}),p((0,u.kg)(u.zv)),setTimeout(T,d.sI)},onError:e=>{h((0,u.kg)(u.Un,e)),setTimeout(T,d.sI)}})}return((0,l.useEffect)(()=>{g({chatDisabled:j,chatJoinMessagesEnabled:k,forbiddenUsernames:C,suggestedUsernames:w,welcomeMessage:U,chatEstablishedUserMode:y})},[x]),n)?(0,t.jsxs)("div",{className:"config-server-details-form",children:[(0,t.jsx)(s,{children:"Chat Settings"}),(0,t.jsxs)("div",{className:"form-module config-server-details-container",children:[(0,t.jsx)(c.Z,{fieldName:"chatDisabled",...d.yj,checked:!n.chatDisabled,reversed:!0,onChange:function(e){E({fieldName:"chatDisabled",value:!e})}}),(0,t.jsx)(c.Z,{fieldName:"chatJoinMessagesEnabled",...d.kB,checked:n.chatJoinMessagesEnabled,onChange:function(e){E({fieldName:"chatJoinMessagesEnabled",value:e})}}),(0,t.jsx)(c.Z,{fieldName:"establishedUserMode",...d.dj,checked:n.chatEstablishedUserMode,onChange:function(e){E({fieldName:"chatEstablishedUserMode",value:e})}}),(0,t.jsx)(r.$7,{fieldName:"welcomeMessage",...d.IX,type:i.Sk,value:n.welcomeMessage,initialValue:U,onChange:E}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)(o.Y,{title:d.Dg.label,placeholder:d.Dg.placeholder,description:d.Dg.tip,values:n.forbiddenUsernames,handleDeleteIndex:function(e){n.forbiddenUsernames.splice(e,1),M()},handleCreateString:function(e){n.forbiddenUsernames.push(e),E({fieldName:"forbiddenUsernames",value:n.forbiddenUsernames}),M()},submitStatus:f}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),(0,t.jsx)(o.Y,{title:d.AN.label,placeholder:d.AN.placeholder,description:d.AN.tip,values:n.suggestedUsernames,handleDeleteIndex:function(e){n.suggestedUsernames.splice(e,1),_()},handleCreateString:function(e){n.suggestedUsernames.push(e),E({fieldName:"suggestedUsernames",value:n.suggestedUsernames}),_()},submitStatus:v,continuousStatusMessage:0===(e=n.suggestedUsernames.length)?(0,u.kg)("success",d.AN.no_entries):e>0&&e<10?(0,u.kg)("warning",d.AN.min_not_reached):null})]})]}):null}},41983:function(e,s,n){"use strict";n.d(s,{Jk:function(){return u},Un:function(){return c},dG:function(){return m},kg:function(){return f},zv:function(){return d}});var t=n(85893),a=n(89739),l=n(21640),i=n(50888),r=n(28058);let c="error",o="invalid",u="proessing",d="success",m="warning",g={[d]:{type:d,icon:(0,t.jsx)(a.Z,{style:{color:"green"}}),message:"Success!"},[c]:{type:c,icon:(0,t.jsx)(l.Z,{style:{color:"red"}}),message:"An error occurred."},[o]:{type:o,icon:(0,t.jsx)(l.Z,{style:{color:"red"}}),message:"An error occurred."},[u]:{type:u,icon:(0,t.jsx)(i.Z,{}),message:""},[m]:{type:m,icon:(0,t.jsx)(r.Z,{style:{color:"#fc0"}}),message:""}};function f(e,s){return e&&g[e]?s?{type:e,icon:g[e].icon,message:s}:g[e]:null}},99519:function(e,s,n){"use strict";n.d(s,{aC:function(){return d}});var t=n(85893),a=n(67294),l=n(45697),i=n.n(l),r=n(64777),c=n(90745);let o={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[c.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},u={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},d=a.createContext({...u,serverConfig:o,setFieldInConfigState:e=>null}),m=e=>{let{children:s}=e,[n,l]=(0,a.useState)(u),[i,c]=(0,a.useState)(o),m=async()=>{try{let e=await (0,r.rQ)(r.Q_);l({...e})}catch(s){}},g=async()=>{try{let e=await (0,r.rQ)(r.bl);c(e)}catch(s){}},f=e=>{let{fieldName:s,value:n,path:t}=e,a=t?{...i,[t]:{...i[t],[s]:n}}:{...i,[s]:n};c(a)};(0,a.useEffect)(()=>{let e=null;return m(),e=setInterval(m,r.NE),g(),()=>{clearInterval(e)}},[]);let h={...n,serverConfig:i,setFieldInConfigState:f};return(0,t.jsx)(d.Provider,{value:h,children:s})};m.propTypes={children:i().element.isRequired},s.ZP=m}},function(e){e.O(0,[481,5596,1407,173,611,1577,3763,4485,5212,7033,252,745,9774,2888,179],function(){return e(e.s=42011)}),_N_E=e.O()}]);
//# sourceMappingURL=config-chat-47c0ea0b9aea8632.js.map