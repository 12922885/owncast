(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2532],{18957:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-federation",function(){return n(37990)}])},80894:function(e,s,n){"use strict";n.d(s,{Q:function(){return d},Y:function(){return u}});var t=n(85893),a=n(67294),r=n(84485),l=n(20550),i=n(52018),o=n(39664);let{Title:c}=r.Z,d="#5a67d8",u=e=>{let{title:s,description:n,placeholder:r,maxLength:u,values:h,handleDeleteIndex:f,handleCreateString:m,submitStatus:p,continuousStatusMessage:g}=e,[v,b]=(0,a.useState)(""),x=e=>{let{value:s}=e;b(s)},w=()=>{let e=v.trim();m(e),b("")};return(0,t.jsxs)("div",{className:"edit-string-array-container",children:[(0,t.jsx)(c,{level:3,className:"section-title",children:s}),(0,t.jsx)("p",{className:"description",children:n}),(0,t.jsx)("div",{className:"edit-current-strings",children:null==h?void 0:h.map((e,s)=>{let n=()=>{f(s)};return(0,t.jsx)(l.Z,{closable:!0,onClose:n,color:d,children:e},"tag-".concat(e,"-").concat(s))})}),g&&(0,t.jsx)("div",{className:"continuous-status-section",children:(0,t.jsx)(o.E,{status:g})}),(0,t.jsx)("div",{className:"add-new-string-section",children:(0,t.jsx)(i.nv,{fieldName:"string-input",value:v,onChange:x,onPressEnter:w,maxLength:u,placeholder:r,status:p})})]})};u.defaultProps={maxLength:50,description:null,submitStatus:null,continuousStatusMessage:null}},10135:function(e,s,n){"use strict";n.d(s,{$7:function(){return g},Kx:function(){return f},Sk:function(){return m},xA:function(){return p}});var t=n(85893),a=n(71577),r=n(94184),l=n.n(r),i=n(67294),o=n(90745),c=n(41983),d=n(99519),u=n(39664),h=n(52018);let f="default",m="textarea",p="url",g=e=>{let{apiPath:s,configPath:n="",initialValue:r,useTrim:f,useTrimLead:m,...p}=e,[g,v]=(0,i.useState)(null),[b,x]=(0,i.useState)(!1),w=(0,i.useContext)(d.aC),{setFieldInConfigState:y}=w||{},j=null,{fieldName:k,required:N,tip:S,status:C,value:P,onChange:Z,onSubmit:E}=p,T=()=>{v(null),x(!1),clearTimeout(j),j=null};(0,i.useEffect)(()=>{N&&(""===P||null===P)||P===r?x(!1):(T(),x(!0))},[P]);let U=e=>{let{fieldName:s,value:n}=e;if(Z){let t=n;f?t=n.trim():m&&(t=n.replace(/^\s+/g,"")),Z({fieldName:s,value:t})}},L=e=>{let{value:s}=e;Z&&N&&""===s&&Z({fieldName:k,value:r})},_=async()=>{(N&&""!==P||P!==r)&&(v((0,c.kg)(c.Jk)),await (0,o.Si)({apiPath:s,data:{value:P},onSuccess:()=>{y({fieldName:k,value:P,path:n}),v((0,c.kg)(c.zv))},onError:e=>{v((0,c.kg)(c.Un,"There was an error: ".concat(e)))}}),j=setTimeout(T,o.sI),E&&E())},F=l()({"textfield-with-submit-container":!0,submittable:b});return(0,t.jsxs)("div",{className:F,children:[(0,t.jsx)("div",{className:"textfield-component",children:(0,t.jsx)(h.nv,{...p,onSubmit:null,onBlur:L,onChange:U})}),(0,t.jsxs)("div",{className:"formfield-container lower-container",children:[(0,t.jsx)("p",{className:"label-spacer"}),(0,t.jsxs)("div",{className:"lower-content",children:[(0,t.jsx)("div",{className:"field-tip",children:S}),(0,t.jsx)(u.E,{status:C||g}),(0,t.jsx)("div",{className:"update-button-container",children:(0,t.jsx)(a.Z,{type:"primary",size:"small",className:"submit-button",onClick:_,disabled:!b,children:"Update"})})]})]})]})};g.defaultProps={configPath:"",initialValue:""}},73706:function(e,s,n){"use strict";n.d(s,{Z:function(){return d}});var t=n(85893),a=n(67294),r=n(94594),l=n(41983),i=n(39664),o=n(90745),c=n(99519);let d=e=>{let{apiPath:s,checked:n,reversed:d=!1,configPath:u="",disabled:h=!1,fieldName:f,label:m,tip:p,useSubmit:g,onChange:v}=e,[b,x]=(0,a.useState)(null),w=null,y=(0,a.useContext)(c.aC),{setFieldInConfigState:j}=y||{},k=()=>{x(null),clearTimeout(w),w=null},N=async e=>{if(g){x((0,l.kg)(l.Jk));let n=d?!e:e;await (0,o.Si)({apiPath:s,data:{value:n},onSuccess:()=>{j({fieldName:f,value:n,path:u}),x((0,l.kg)(l.zv))},onError:e=>{x((0,l.kg)(l.Un,"There was an error: ".concat(e)))}}),w=setTimeout(k,o.sI)}v&&v(e)},S=null!==b&&b.type===l.Jk;return(0,t.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[m&&(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:m})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)(r.Z,{className:"switch field-".concat(f),loading:S,onChange:N,defaultChecked:n,checked:n,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:h}),(0,t.jsx)(i.E,{status:b})]}),(0,t.jsx)("p",{className:"field-tip",children:p})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},37990:function(e,s,n){"use strict";n.r(s);var t=n(85893),a=n(30878),r=n(71577),l=n(84485),i=n(14670),o=n(71230),c=n(15746),d=n(67294),u=n(45697),h=n.n(u),f=n(52018),m=n(10135),p=n(73706),g=n(80894),v=n(90745),b=n(99519),x=n(41983);let w=e=>{let{cancelPressed:s,okPressed:n}=e;return(0,t.jsxs)(a.Z,{width:"70%",title:"Enable Social Features",visible:!0,onCancel:s,footer:(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Z,{onClick:s,children:"Do not enable"}),(0,t.jsx)(r.Z,{type:"primary",onClick:n,children:"Enable Social Features"})]}),children:[(0,t.jsx)(l.Z.Title,{level:3,children:"How do Owncast's social features work?"}),(0,t.jsxs)(l.Z.Paragraph,{children:["Owncast's social features are accomplished by having your server join The"," ",(0,t.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",rel:"noopener noreferrer",target:"_blank",children:"Fediverse"}),", a decentralized, open, collection of independent servers, like yours."]}),"Please"," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank",children:"read more"})," ","about these features, the details behind them, and how they work.",(0,t.jsx)(l.Z.Paragraph,{}),(0,t.jsx)(l.Z.Title,{level:3,children:"What do you need to know?"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"These features are brand new. Given the variability of interfacing with the rest of the world, bugs are possible. Please report anything that you think isn't working quite right."}),(0,t.jsx)("li",{children:"You must always host your Owncast server with SSL using a https url."}),(0,t.jsx)("li",{children:"You should not change your server name URL or social username once people begin following you, as your server will be seen as a completely different user on the Fediverse, and the old user will disappear."}),(0,t.jsxs)("li",{children:["Turning on ",(0,t.jsx)("i",{children:"Private mode"})," will allow you to manually approve each follower and limit the visibility of your posts to followers only."]})]}),(0,t.jsx)(l.Z.Title,{level:3,children:"Learn more about The Fediverse"}),(0,t.jsxs)(l.Z.Paragraph,{children:["If these concepts are new you should discover more about what this functionality has to offer. Visit"," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank",children:"our documentation"})," ","to be pointed at some resources that will help get you started on The Fediverse."]})]})};w.propTypes={cancelPressed:h().func.isRequired,okPressed:h().func.isRequired};let y=()=>{let{Title:e}=l.Z,[s,n]=(0,d.useState)(null),[a,r]=(0,d.useState)(!1),u=(0,d.useContext)(b.aC),{serverConfig:h,setFieldInConfigState:y}=u||{},[j,k]=(0,d.useState)(null),{federation:N,yp:S,instanceDetails:C}=h,{enabled:P,isPrivate:Z,username:E,goLiveMessage:T,showEngagement:U,blockedDomains:L}=N,{instanceUrl:_}=S,{nsfw:F}=C,R=e=>{let{fieldName:t,value:a}=e;n({...s,[t]:a})},D=e=>{e?r(!0):n({...s,enabled:!1})},I=()=>{let e=""!==s.instanceUrl,t=s.instanceUrl.startsWith("https://");e&&t||((0,v.Si)({apiPath:v.Kl.apiPath,data:{value:!1}}),n({...s,enabled:!1}))};function M(){k(null)}function O(){try{(0,v.Si)({apiPath:v.pE,data:{value:s.blockedDomains},onSuccess:()=>{y({fieldName:"forbiddenUsernames",value:s.forbiddenUsernames}),k(x.zv),setTimeout(M,v.sI)},onError:e=>{k((0,x.kg)(x.Un,e)),setTimeout(M,v.sI)}})}catch(e){console.error(e),k(x.Un)}}if((0,d.useEffect)(()=>{n({enabled:P,isPrivate:Z,username:E,goLiveMessage:T,showEngagement:U,blockedDomains:L,nsfw:F,instanceUrl:S.instanceUrl})},[h,S]),!s)return null;let V=""!==_,K=_.startsWith("https://"),q=!K&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{message:"You must set your server URL before you can enable this feature.",type:"warning",showIcon:!0}),(0,t.jsx)("br",{}),(0,t.jsx)(m.$7,{fieldName:"instanceUrl",...v.yi,value:s.instanceUrl,initialValue:S.instanceUrl,type:f.xA,onChange:R,onSubmit:I,required:!0})]}),z=(0,t.jsx)(i.Z,{message:"Only Owncast instances available on the default SSL port 443 support this feature.",type:"warning",showIcon:!0}),A=_&&""!==new URL(_).port&&"443"!==new URL(_).port;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{children:"Configure Social Features"}),(0,t.jsx)("p",{children:"Owncast provides the ability for people to follow and engage with your instance. It's a great way to promote alerting, sharing and engagement of your stream."}),(0,t.jsx)("p",{children:"Once enabled you'll alert your followers when you go live as well as gain the ability to compose custom posts to share any information you like."}),(0,t.jsx)("p",{children:(0,t.jsx)("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank",children:"Read more about the specifics of these social features."})}),(0,t.jsxs)(o.Z,{children:[(0,t.jsxs)(c.Z,{span:15,className:"form-module",style:{marginRight:"15px"},children:[q,A&&z,(0,t.jsx)(p.Z,{fieldName:"enabled",onChange:D,...v.Kl,checked:s.enabled,disabled:A||!V||!K}),(0,t.jsx)(p.Z,{fieldName:"isPrivate",...v.LC,checked:s.isPrivate,disabled:!P}),(0,t.jsx)(p.Z,{fieldName:"nsfw",useSubmit:!0,...v.B_,checked:s.nsfw,disabled:A||!V}),(0,t.jsx)(m.$7,{required:!0,fieldName:"username",type:f.Kx,...v.Xc,value:s.username,initialValue:E,onChange:R,disabled:!P}),(0,t.jsx)(m.$7,{fieldName:"goLiveMessage",...v.BF,type:f.Sk,value:s.goLiveMessage,initialValue:T,onChange:R,disabled:!P}),(0,t.jsx)(p.Z,{fieldName:"showEngagement",...v.FE,checked:s.showEngagement,disabled:!P})]}),(0,t.jsx)(c.Z,{span:8,className:"form-module",children:(0,t.jsx)(g.Y,{title:v.dR.label,placeholder:v.dR.placeholder,description:v.dR.tip,values:s.blockedDomains,handleDeleteIndex:function(e){s.blockedDomains.splice(e,1),O()},handleCreateString:function(e){let n;try{let t=new URL(e);n=t.host}catch(a){n=e}s.blockedDomains.push(n),R({fieldName:"blockedDomains",value:s.blockedDomains}),O()},submitStatus:(0,x.kg)(j)})})]}),a&&(0,t.jsx)(w,{cancelPressed:function(){r(!1),n({...s,enabled:!1})},okPressed:function(){r(!1),n({...s,enabled:!0})}})]})};s.default=y},41983:function(e,s,n){"use strict";n.d(s,{Jk:function(){return d},Un:function(){return o},dG:function(){return h},kg:function(){return m},zv:function(){return u}});var t=n(85893),a=n(89739),r=n(21640),l=n(50888),i=n(28058);let o="error",c="invalid",d="proessing",u="success",h="warning",f={[u]:{type:u,icon:(0,t.jsx)(a.Z,{style:{color:"green"}}),message:"Success!"},[o]:{type:o,icon:(0,t.jsx)(r.Z,{style:{color:"red"}}),message:"An error occurred."},[c]:{type:c,icon:(0,t.jsx)(r.Z,{style:{color:"red"}}),message:"An error occurred."},[d]:{type:d,icon:(0,t.jsx)(l.Z,{}),message:""},[h]:{type:h,icon:(0,t.jsx)(i.Z,{style:{color:"#fc0"}}),message:""}};function m(e,s){return e&&f[e]?s?{type:e,icon:f[e].icon,message:s}:f[e]:null}},99519:function(e,s,n){"use strict";n.d(s,{aC:function(){return u}});var t=n(85893),a=n(67294),r=n(45697),l=n.n(r),i=n(64777),o=n(90745);let c={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[o.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},d={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},u=a.createContext({...d,serverConfig:c,setFieldInConfigState:e=>null}),h=e=>{let{children:s}=e,[n,r]=(0,a.useState)(d),[l,o]=(0,a.useState)(c),h=async()=>{try{let e=await (0,i.rQ)(i.Q_);r({...e})}catch(s){}},f=async()=>{try{let e=await (0,i.rQ)(i.bl);o(e)}catch(s){}},m=e=>{let{fieldName:s,value:n,path:t}=e,a=t?{...l,[t]:{...l[t],[s]:n}}:{...l,[s]:n};o(a)};(0,a.useEffect)(()=>{let e=null;return h(),e=setInterval(h,i.NE),f(),()=>{clearInterval(e)}},[]);let p={...n,serverConfig:l,setFieldInConfigState:m};return(0,t.jsx)(u.Provider,{value:p,children:s})};h.propTypes={children:l().element.isRequired},s.ZP=h}},function(e){e.O(0,[481,5596,1407,173,611,1577,3763,4485,5212,7033,6754,878,3816,745,9774,2888,179],function(){return e(e.s=18957)}),_N_E=e.O()}]);
//# sourceMappingURL=config-federation-36edf672d8ad719d.js.map