(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(1413),o=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=t(42135),c=function(e,n){return o.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:a}))};c.displayName="DeleteOutlined";var u=o.forwardRef(c)},54005:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return t(4437)}])},4437:function(e,n,t){"use strict";t.r(n);var r=t(47568),o=t(29815),a=t(34051),i=t.n(a),c=t(85893),u=t(48689),l=t(84485),s=t(85402),d=t(69677),f=t(32808),p=t(26713),h=t(71577),v=t(10355),x=t(67294),y=t(25521),m=t(25964),g=t(83192),j=t(35159),w=t(19411),Z=l.Z.Title,k=l.Z.Paragraph,b=null,C=function(e){var n=e.onOk,t=e.onCancel,r=e.visible,o=(0,x.useState)(""),a=o[0],i=o[1],u=(0,x.useState)(""),l=u[0],p=u[1],h=(0,x.useState)(""),v=h[0],y=h[1],m=(0,x.useState)(""),g=m[0],j=m[1],Z=(0,x.useState)(""),k=Z[0],b=Z[1],C=(0,x.useState)(!1),S=C[0],I=C[1],E={disabled:!function(){try{if("https:"!==new URL(a).protocol)return!1}catch(e){return!1}return(0,w.Z)(a)&&""!==l}()};return(0,c.jsx)(s.Z,{title:"Create New Action",visible:r,onOk:function(){n(a,l,v,g,k,S),i(""),p(""),y(""),j(""),b(""),I(!1)},onCancel:t,okButtonProps:E,children:(0,c.jsxs)("div",{children:["Add the URL for the external action you want to present."," ",(0,c.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,c.jsx)("p",{children:(0,c.jsx)(d.Z,{value:a,required:!0,placeholder:"https://myserver.com/action (required)",onChange:function(e){return i(e.currentTarget.value.trim())},type:"url",pattern:w.a})}),(0,c.jsx)("p",{children:(0,c.jsx)(d.Z,{value:l,required:!0,placeholder:"Your action title (required)",onChange:function(e){return p(e.currentTarget.value)}})}),(0,c.jsx)("p",{children:(0,c.jsx)(d.Z,{value:v,placeholder:"Optional description",onChange:function(e){return y(e.currentTarget.value)}})}),(0,c.jsx)("p",{children:(0,c.jsx)(d.Z,{value:g,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:function(e){return j(e.currentTarget.value)}})}),(0,c.jsxs)("p",{children:[(0,c.jsx)(d.Z,{type:"color",value:k,onChange:function(e){return b(e.currentTarget.value)}}),"Optional background color of the action button."]}),(0,c.jsx)(f.Z,{checked:S,defaultChecked:S,onChange:function(e){I(e.target.checked)},children:"Open in a new tab instead of within your page."})]})})};n.default=function(){var e=(0,x.useContext)(j.aC)||{},n=e.serverConfig,t=e.setFieldInConfigState,a=n.externalActions,l=(0,x.useState)([]),s=l[0],d=l[1],f=(0,x.useState)(!1),w=f[0],S=f[1],I=(0,x.useState)(null),E=I[0],O=I[1],T=function(){O(null),b=null,clearTimeout(b)};function _(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.Si)({apiPath:m.os,data:{value:n},onSuccess:function(){t({fieldName:"externalActions",value:n,path:""}),O((0,g.kg)(g.zv,"Updated.")),b=setTimeout(T,m.sI)},onError:function(e){console.log(e),O((0,g.kg)(g.Un,e)),b=setTimeout(T,m.sI)}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=(0,r.Z)(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,o.Z)(s),r=s.findIndex((function(e){return e.url===n.url})),t.splice(r,1);try{d(t),_(t)}catch(a){console.error(a)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=(0,r.Z)(i().mark((function e(n,t,r,a,c,u){var l,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=(0,o.Z)(s),f=l.concat({url:n,title:t,description:r,icon:a,color:c,openExternally:u}),d(f),e.next=6,_(f);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,x.useEffect)((function(){d(a||[])}),[a]);var R=[{title:"",key:"delete",render:function(e,n){return(0,c.jsx)(p.Z,{size:"middle",children:(0,c.jsx)(h.Z,{onClick:function(){return function(e){return N.apply(this,arguments)}(n)},icon:(0,c.jsx)(u.Z,{})})})}},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:function(e){return e?(0,c.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null}},{title:"Color",dataIndex:"color",key:"color",render:function(e){return e?(0,c.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null}},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:function(e){return e?"In a new tab":"In a modal"}}];return(0,c.jsxs)("div",{children:[(0,c.jsx)(Z,{children:"External Actions"}),(0,c.jsx)(k,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,c.jsxs)(k,{children:["Read more about how to use actions, with examples, at"," ",(0,c.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,c.jsx)(v.Z,{rowKey:function(e){return"".concat(e.title,"-").concat(e.url)},columns:R,dataSource:s,pagination:!1}),(0,c.jsx)("br",{}),(0,c.jsx)(h.Z,{type:"primary",onClick:function(){S(!0)},children:"Create New Action"}),(0,c.jsx)(y.E,{status:E}),(0,c.jsx)(C,{visible:w,onOk:function(e,n,t,r,o,a){S(!1),function(e,n,t,r,o,a){U.apply(this,arguments)}(e,n,t,r,o,a)},onCancel:function(){S(!1)}})]})}},20943:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,{Z:function(){return r}})},13375:function(e,n,t){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}t.d(n,{Z:function(){return r}})},29815:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(20943);var o=t(13375);var a=t(91566);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,o.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91566:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(20943);function o(e,n){if(e){if("string"===typeof e)return(0,r.Z)(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?(0,r.Z)(e,n):void 0}}}},function(e){e.O(0,[7330,7266,355,9774,2888,179],(function(){return n=54005,e(e.s=n);var n}));var n=e.O();_N_E=n}]);