(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4311],{86045:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-public-details",function(){return a(68585)}])},87652:function(e,s,a){"use strict";a.d(s,{h:function(){return S}});var t=a(85893),l=a(67294),n=a(84485),i=a(71577),r=a(69677),o=a(93626),c=a(85402),d=a(10010),u=a(39398),m=a(48689),h=a(38939),p=a(90745);let x=e=>{let{iconList:s,selectedOption:a,onSelected:l}=e,n=e=>{l&&l(e)},i=""===a?null:a;return(0,t.jsxs)("div",{className:"social-dropdown-container",children:[(0,t.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,t.jsxs)("div",{className:"formfield-container",children:[(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,t.jsx)("div",{className:"input-side",children:(0,t.jsxs)(h.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:i,value:i,onSelect:n,children:[s.map(e=>{let{platform:s,icon:a,key:l}=e;return(0,t.jsxs)(h.Z.Option,{className:"social-option",value:l,children:[(0,t.jsx)("span",{className:"option-icon",children:(0,t.jsx)("img",{src:a,alt:"",className:"option-icon"})}),(0,t.jsx)("span",{className:"option-label",children:s})]},"platform-".concat(l))}),(0,t.jsx)(h.Z.Option,{className:"social-option",value:p.z_,children:"Other..."},"platform-".concat(p.z_))]})})]})]})};var j=a(64777),f=a(99519),g=a(37174),v=a(40117),N=a(41983),y=a(39664);let{Title:k}=n.Z,S=()=>{let[e,s]=(0,l.useState)([]),[a,n]=(0,l.useState)([]),[h,S]=(0,l.useState)(!1),[w,C]=(0,l.useState)(!1),[b,Z]=(0,l.useState)(!1),[E,T]=(0,l.useState)(-1),[P,_]=(0,l.useState)(p.wC),[z,L]=(0,l.useState)(null),U=(0,l.useContext)(f.aC),{serverConfig:O,setFieldInConfigState:I}=U||{},{instanceDetails:A}=O,{socialHandles:V}=A,D=async()=>{try{let e=await (0,j.rQ)(j.$i,{auth:!1}),a=Object.keys(e).map(s=>({key:s,...e[s]}));s(a)}catch(t){console.log(t)}},M=s=>e.find(e=>e.key===s)||!1,R=""!==P.platform&&!e.find(e=>e.key===P.platform);(0,l.useEffect)(()=>{D()},[]),(0,l.useEffect)(()=>{A.socialHandles&&n(V)},[A]);let F=()=>{L(null),clearTimeout(null)},J=()=>{S(!1),T(-1),C(!1),Z(!1),_({...p.wC})},$=()=>{J()},H=(e,s)=>{_({...P,[e]:s})},Q=e=>{e===p.z_?(C(!0),H("platform","")):(C(!1),H("platform",e))},Y=e=>{let{value:s}=e.target;H("platform",s)},G=e=>{let{value:s}=e;H("url",s)},X=async e=>{await (0,p.Si)({apiPath:p.c9,data:{value:e},onSuccess(){I({fieldName:"socialHandles",value:e,path:"instanceDetails"}),Z(!1),$(),L((0,N.kg)(N.zv)),setTimeout(F,p.sI)},onError(e){L((0,N.kg)(N.Un,"There was an error: ".concat(e))),Z(!1),setTimeout(F,p.sI)}})},B=()=>{Z(!0);let e=a.length?[...a]:[];-1===E?e.push(P):e.splice(E,1,P),X(e)},q=e=>{let s=[...a];s.splice(e,1),X(s)},K=e=>{if(e<=0||e>=a.length)return;let s=[...a],t=s[e-1];s[e-1]=s[e],s[e]=t,X(s)},W=e=>{if(e<0||e>=a.length-1)return;let s=[...a],t=s[e+1];s[e+1]=s[e],s[e]=t,X(s)},ee={disabled:!(0,g.Z)(P.url)},es=(0,t.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,t.jsx)("div",{className:"label-side"}),(0,t.jsx)("div",{className:"input-side",children:(0,t.jsx)(r.Z,{placeholder:"Other platform name",defaultValue:P.platform,onChange:Y})})]});return(0,t.jsxs)("div",{className:"social-links-edit-container",children:[(0,t.jsx)(k,{level:3,className:"section-title",children:"Your Social Handles"}),(0,t.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,t.jsx)(y.E,{status:z}),(0,t.jsx)(o.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:[{title:"Social Link",dataIndex:"",key:"combo",render(e,s){let{platform:a,url:l}=s,n=M(a);if(!n)return(0,t.jsx)("div",{className:"social-handle-cell",children:(0,t.jsxs)("p",{className:"option-label",children:[(0,t.jsx)("strong",{children:a}),(0,t.jsx)("span",{className:"handle-url",title:l,children:l})]})});let{icon:i,platform:r}=n;return(0,t.jsxs)("div",{className:"social-handle-cell",children:[(0,t.jsx)("span",{className:"option-icon",children:(0,t.jsx)("img",{src:i,alt:"",className:"option-icon"})}),(0,t.jsxs)("p",{className:"option-label",children:[(0,t.jsx)("strong",{children:r}),(0,t.jsx)("span",{className:"handle-url",title:l,children:l})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,s,l)=>(0,t.jsxs)("div",{className:"actions",children:[(0,t.jsx)(i.Z,{size:"small",onClick(){let e=a[l];T(l),_({...e}),S(!0),M(e.platform)||C(!0)},children:"Edit"}),(0,t.jsx)(i.Z,{icon:(0,t.jsx)(d.Z,{}),size:"small",hidden:0===l,onClick:()=>K(l)}),(0,t.jsx)(i.Z,{icon:(0,t.jsx)(u.Z,{}),size:"small",hidden:l===a.length-1,onClick:()=>W(l)}),(0,t.jsx)(i.Z,{className:"delete-button",icon:(0,t.jsx)(m.Z,{}),size:"small",onClick:()=>q(l)})]})}],dataSource:a}),(0,t.jsx)(c.Z,{title:"Edit Social Handle",open:h,onOk:B,onCancel:$,confirmLoading:b,okButtonProps:ee,children:(0,t.jsxs)("div",{className:"social-handle-modal-content",children:[(0,t.jsx)(x,{iconList:e,selectedOption:R?p.z_:P.platform,onSelected:Q}),w&&es,(0,t.jsx)("br",{}),(0,t.jsx)(v.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[P.platform]||"Url to page",value:P.url,onChange:G,useTrim:!0,type:"url",pattern:g.a}),(0,t.jsx)(y.E,{status:z})]})}),(0,t.jsx)("br",{}),(0,t.jsx)(i.Z,{type:"primary",onClick(){J(),S(!0)},children:"Add a new social link"})]})}},80894:function(e,s,a){"use strict";a.d(s,{Q:function(){return d},Y:function(){return u}});var t=a(85893),l=a(67294),n=a(84485),i=a(20550),r=a(40117),o=a(39664);let{Title:c}=n.Z,d="#5a67d8",u=e=>{let{title:s,description:a,placeholder:n,maxLength:u,values:m,handleDeleteIndex:h,handleCreateString:p,submitStatus:x,continuousStatusMessage:j}=e,[f,g]=(0,l.useState)(""),v=e=>{let{value:s}=e;g(s)},N=()=>{let e=f.trim();p(e),g("")};return(0,t.jsxs)("div",{className:"edit-string-array-container",children:[(0,t.jsx)(c,{level:3,className:"section-title",children:s}),(0,t.jsx)("p",{className:"description",children:a}),(0,t.jsx)("div",{className:"edit-current-strings",children:null==m?void 0:m.map((e,s)=>{let a=()=>{h(s)};return(0,t.jsx)(i.Z,{closable:!0,onClose:a,color:d,children:e},"tag-".concat(e,"-").concat(s))})}),j&&(0,t.jsx)("div",{className:"continuous-status-section",children:(0,t.jsx)(o.E,{status:j})}),(0,t.jsx)("div",{className:"add-new-string-section",children:(0,t.jsx)(r.nv,{fieldName:"string-input",value:f,onChange:v,onPressEnter:N,maxLength:u,placeholder:n,status:x})})]})};u.defaultProps={maxLength:50,description:null,submitStatus:null,continuousStatusMessage:null}},73706:function(e,s,a){"use strict";a.d(s,{Z:function(){return d}});var t=a(85893),l=a(67294),n=a(94594),i=a(41983),r=a(39664),o=a(90745),c=a(99519);let d=e=>{let{apiPath:s,checked:a,reversed:d=!1,configPath:u="",disabled:m=!1,fieldName:h,label:p,tip:x,useSubmit:j,onChange:f}=e,[g,v]=(0,l.useState)(null),N=null,y=(0,l.useContext)(c.aC),{setFieldInConfigState:k}=y||{},S=()=>{v(null),clearTimeout(N),N=null},w=async e=>{if(j){v((0,i.kg)(i.Jk));let a=d?!e:e;await (0,o.Si)({apiPath:s,data:{value:a},onSuccess(){k({fieldName:h,value:a,path:u}),v((0,i.kg)(i.zv))},onError(e){v((0,i.kg)(i.Un,"There was an error: ".concat(e)))}}),N=setTimeout(S,o.sI)}f&&f(e)},C=null!==g&&g.type===i.Jk;return(0,t.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[p&&(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:p})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)(n.Z,{className:"switch field-".concat(h),loading:C,onChange:w,defaultChecked:a,checked:a,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:m}),(0,t.jsx)(r.E,{status:g})]}),(0,t.jsx)("p",{className:"field-tip",children:x})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},68585:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return A}});var t=a(85893),l=a(67294),n=a(84485),i=a(10135),r=a(99519),o=a(90745),c=a(73706),d=a(77916),u=a(71577),m=a(50888),h=a(88484),p=a(39664),x=a(41983),j=a(64777);let f=["image/png","image/jpeg","image/gif"],g=()=>{var e;let[s,a]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),[c,g]=(0,l.useState)(0),v=(0,l.useContext)(r.aC),{setFieldInConfigState:N,serverConfig:y}=v||{},k=null==y?void 0:null===(e=y.instanceDetails)||void 0===e?void 0:e.logo,[S,w]=(0,l.useState)(null),C=null,{apiPath:b,tip:Z}=o.ZQ,E=()=>{w(null),clearTimeout(C),C=null},T=e=>(i(!0),new Promise((s,t)=>{if(!f.includes(e.type)){let l="File type is not supported: ".concat(e.type);return w((0,x.kg)(x.Un,"There was an error: ".concat(l))),C=setTimeout(E,o.sI),i(!1),t()}!function(e,s){let a=new FileReader;a.addEventListener("load",()=>s(a.result)),a.readAsDataURL(e)}(e,e=>(a(e),s()))})),P=async()=>{s!==k&&(w((0,x.kg)(x.Jk)),await (0,o.Si)({apiPath:b,data:{value:s},onSuccess(){N({fieldName:"logo",value:s,path:""}),w((0,x.kg)(x.zv)),i(!1),g(Math.floor(100*Math.random()))},onError(e){w((0,x.kg)(x.Un,"There was an error: ".concat(e))),i(!1)}}),C=setTimeout(E,o.sI))},_="".concat(j.WB,"logo?random=").concat(c);return(0,t.jsxs)("div",{className:"formfield-container logo-upload-container",children:[(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:"Logo"})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("img",{src:_,alt:"avatar",className:"logo-preview"}),(0,t.jsx)(d.Z,{name:"logo",listType:"picture",className:"avatar-uploader",showUploadList:!1,accept:f.join(","),beforeUpload:T,customRequest:P,disabled:n,children:n?(0,t.jsx)(m.Z,{style:{color:"white"}}):(0,t.jsx)(u.Z,{icon:(0,t.jsx)(h.Z,{})})})]}),(0,t.jsx)(p.E,{status:S}),(0,t.jsx)("p",{className:"field-tip",children:Z})]})]})},{Title:v}=n.Z,N=()=>{let[e,s]=(0,l.useState)(null),a=(0,l.useContext)(r.aC),{serverConfig:n}=a||{},{instanceDetails:d,yp:u}=n,{instanceUrl:m}=u;if((0,l.useEffect)(()=>{s({...d,...u})},[d,u]),!e)return null;let h=()=>{""===e.instanceUrl&&!0===u.enabled&&(0,o.Si)({apiPath:o.AP,data:{value:!1}})},p=a=>{let{fieldName:t,value:l}=a;s({...e,[t]:l})},x=""!==m;return(0,t.jsxs)("div",{className:"edit-general-settings",children:[(0,t.jsx)(v,{level:3,className:"section-title",children:"Configure Instance Details"}),(0,t.jsx)("br",{}),(0,t.jsx)(i.$7,{fieldName:"name",...o.RE,value:e.name,initialValue:d.name,onChange:p}),(0,t.jsx)(i.$7,{fieldName:"instanceUrl",...o.cj,value:e.instanceUrl,initialValue:u.instanceUrl,type:i.xA,onChange:p,onSubmit:h}),(0,t.jsx)(i.$7,{fieldName:"summary",...o.rs,type:i.Sk,value:e.summary,initialValue:d.summary,onChange:p}),(0,t.jsx)(i.$7,{fieldName:"offlineMessage",...o.rd,type:i.Sk,value:e.offlineMessage,initialValue:d.offlineMessage,onChange:p}),(0,t.jsx)(g,{}),(0,t.jsx)(c.Z,{fieldName:"hideViewerCount",useSubmit:!0,...o._X,checked:e.hideViewerCount,onChange:function(e){p({fieldName:"hideViewerCount",value:e})}}),(0,t.jsx)("br",{}),(0,t.jsxs)("p",{className:"description",children:["Increase your audience by appearing in the"," ",(0,t.jsx)("a",{href:"https://directory.owncast.online",target:"_blank",rel:"noreferrer",children:(0,t.jsx)("strong",{children:"Owncast Directory"})}),". This is an external service run by the Owncast project."," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/directory/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more"}),"."]}),!u.instanceUrl&&(0,t.jsxs)("p",{className:"description",children:["You must set your ",(0,t.jsx)("strong",{children:"Server URL"})," above to enable the directory."]}),(0,t.jsxs)("div",{className:"config-yp-container",children:[(0,t.jsx)(c.Z,{fieldName:"enabled",useSubmit:!0,...o.P,checked:e.enabled,disabled:!x}),(0,t.jsx)(c.Z,{fieldName:"nsfw",useSubmit:!0,...o.EY,checked:e.nsfw,disabled:!x})]})]})};var y=a(20550),k=a(40117),S=a(80894);let{Title:w}=n.Z,C=()=>{let[e,s]=(0,l.useState)(""),[a,n]=(0,l.useState)(null),i=(0,l.useContext)(r.aC),{serverConfig:c,setFieldInConfigState:d}=i||{},{instanceDetails:u}=c,{tags:m=[]}=u,{apiPath:h,maxLength:p,placeholder:j,configPath:f}=o.y_,g=null;(0,l.useEffect)(()=>()=>{clearTimeout(g)},[]);let v=()=>{n(null),clearTimeout(g=null)},N=async e=>{n((0,x.kg)(x.Jk)),await (0,o.Si)({apiPath:h,data:{value:e},onSuccess(){d({fieldName:"tags",value:e,path:f}),n((0,x.kg)(x.zv,"Tags updated.")),s(""),g=setTimeout(v,o.sI)},onError(e){n((0,x.kg)(x.Un,e)),g=setTimeout(v,o.sI)}})},C=e=>{let{value:t}=e;a||n(null),s(t)},b=()=>{v();let s=e.trim();if(""===s){n((0,x.kg)(x.dG,"Please enter a tag"));return}if(m.some(e=>e.toLowerCase()===s.toLowerCase())){n((0,x.kg)(x.dG,"This tag is already used!"));return}let a=[...m,s];N(a)},Z=e=>{v();let s=[...m];s.splice(e,1),N(s)};return(0,t.jsxs)("div",{className:"tag-editor-container",children:[(0,t.jsx)(w,{level:3,className:"section-title",children:"Add Tags"}),(0,t.jsx)("p",{className:"description",children:"This is a great way to categorize your Owncast server on the Directory!"}),(0,t.jsx)("div",{className:"edit-current-strings",children:m.map((e,s)=>{let a=()=>{Z(s)};return(0,t.jsx)(y.Z,{closable:!0,onClose:a,color:S.Q,children:e},"tag-".concat(e,"-").concat(s))})}),(0,t.jsx)("div",{className:"add-new-string-section",children:(0,t.jsx)(k.nv,{fieldName:"tag-input",value:e,className:"new-tag-input",onChange:C,onPressEnter:b,maxLength:p,placeholder:j,status:a})})]})};var b=a(87652),Z=a(87685),E=a(58909),T=a(48825),P=a(76538);let{Title:_}=n.Z,z=()=>{let[e,s]=(0,l.useState)(""),[a,n]=(0,l.useState)(null),[i,c]=(0,l.useState)(!1),d=(0,l.useContext)(r.aC),{serverConfig:m,setFieldInConfigState:h}=d||{},{instanceDetails:j}=m,{extraPageContent:f}=j,g=null,v=()=>{n(null),c(!1),clearTimeout(g),g=null};async function N(){n((0,x.kg)(x.Jk)),await (0,o.Si)({apiPath:o.AA,data:{value:e},onSuccess(s){h({fieldName:"extraPageContent",value:e,path:"instanceDetails"}),n((0,x.kg)(x.zv,s))},onError(e){n((0,x.kg)(x.Un,e))}}),g=setTimeout(v,o.sI)}return(0,l.useEffect)(()=>{s(f)},[j]),(0,t.jsxs)("div",{className:"edit-page-content",children:[(0,t.jsx)(_,{level:3,className:"section-title",children:"Custom Page Content"}),(0,t.jsxs)("p",{className:"description",children:["Edit the content of your page by using simple"," ",(0,t.jsx)("a",{href:"https://www.markdownguide.org/basic-syntax/",target:"_blank",rel:"noopener noreferrer",children:"Markdown syntax"}),"."]}),(0,t.jsx)(Z.ZP,{value:e,placeholder:"Enter your custom page content here...",theme:E.F,onChange:function(e){s(e),e===f||i?e===f&&i&&c(!1):c(!0)},extensions:[(0,T.markdown)({base:T.markdownLanguage,codeLanguages:P.M})]}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:"page-content-actions",children:[i&&(0,t.jsx)(u.Z,{type:"primary",onClick:N,children:"Save"}),(0,t.jsx)(p.E,{status:a})]})]})};var L=a(61426);let{Title:U}=n.Z,O=()=>{let[e,s]=(0,l.useState)("/* Enter custom CSS here */"),[a,n]=(0,l.useState)(null),[i,c]=(0,l.useState)(!1),d=(0,l.useContext)(r.aC),{serverConfig:m,setFieldInConfigState:h}=d||{},{instanceDetails:j}=m,{customStyles:f}=j,g=null,v=()=>{n(null),c(!1),clearTimeout(g),g=null};async function N(){n((0,x.kg)(x.Jk)),await (0,o.Si)({apiPath:o.d$,data:{value:e},onSuccess(s){h({fieldName:"customStyles",value:e,path:"instanceDetails"}),n((0,x.kg)(x.zv,s))},onError(e){n((0,x.kg)(x.Un,e))}}),g=setTimeout(v,o.sI)}(0,l.useEffect)(()=>{s(f)},[j]);let y=l.useCallback(e=>{s(e),e===f||i?e===f&&i&&c(!1):c(!0)},[]);return(0,t.jsxs)("div",{className:"edit-custom-css",children:[(0,t.jsx)(U,{level:3,className:"section-title",children:"Customize your page styling with CSS"}),(0,t.jsxs)("p",{className:"description",children:["Customize the look and feel of your Owncast instance by overriding the CSS styles of various components on the page. Refer to the"," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/website/",rel:"noopener noreferrer",target:"_blank",children:"CSS & Components guide"}),"."]}),(0,t.jsx)("p",{className:"description",children:"Please input plain CSS text, as this will be directly injected onto your page during load."}),(0,t.jsx)(Z.ZP,{value:e,placeholder:"/* Enter custom CSS here */",theme:E.F,height:"200px",extensions:[(0,L.css)()],onChange:y}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:"page-content-actions",children:[i&&(0,t.jsx)(u.Z,{type:"primary",onClick:N,children:"Save"}),(0,t.jsx)(p.E,{status:a})]})]})},{Title:I}=n.Z;function A(){return(0,t.jsxs)("div",{className:"config-public-details-page",children:[(0,t.jsx)(I,{children:"General Settings"}),(0,t.jsxs)("p",{className:"description",children:["The following are displayed on your site to describe your stream and its content."," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/website/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more."})]}),(0,t.jsxs)("div",{className:"top-container",children:[(0,t.jsx)("div",{className:"form-module instance-details-container",children:(0,t.jsx)(N,{})}),(0,t.jsxs)("div",{className:"form-module social-items-container ",children:[(0,t.jsx)("div",{className:"form-module tags-module",children:(0,t.jsx)(C,{})}),(0,t.jsx)("div",{className:"form-module social-handles-container",children:(0,t.jsx)(b.h,{})})]})]}),(0,t.jsx)("div",{className:"form-module page-content-module",children:(0,t.jsx)(z,{})}),(0,t.jsx)("div",{className:"form-module page-content-module",children:(0,t.jsx)(O,{})})]})}}},function(e){e.O(0,[5762,8939,3903,4267,3626,7910,1140,9774,2888,179],function(){return e(e.s=86045)}),_N_E=e.O()}]);