(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4440],{7148:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-notify",function(){return s(26590)}])},46551:function(e,n,s){"use strict";s.d(n,{$7:function(){return m},Kx:function(){return p},Sk:function(){return f},xA:function(){return g}});var t=s(85893),a=s(71577),i=s(94184),r=s.n(i),l=s(67294),o=s(90745),c=s(41983),d=s(99519),u=s(73615),h=s(79139);const p="default",f="textarea",g="url",m=e=>{let{apiPath:n,configPath:s="",initialValue:i,useTrim:p,useTrimLead:f,...g}=e;const[m,v]=(0,l.useState)(null),[b,x]=(0,l.useState)(!1),y=(0,l.useContext)(d.aC),{setFieldInConfigState:j}=y||{};let k=null;const{fieldName:w,required:C,tip:S,status:N,value:T,onChange:E,onSubmit:Z}=g,P=()=>{v(null),x(!1),clearTimeout(k),k=null};(0,l.useEffect)((()=>{C&&(""===T||null===T)||T===i?x(!1):(P(),x(!0))}),[T]);const L=r()({"textfield-with-submit-container":!0,submittable:b});return(0,t.jsxs)("div",{className:L,children:[(0,t.jsx)("div",{className:"textfield-component",children:(0,t.jsx)(h.nv,{...g,onSubmit:null,onBlur:e=>{let{value:n}=e;E&&C&&""===n&&E({fieldName:w,value:i})},onChange:e=>{let{fieldName:n,value:s}=e;if(E){let e=s;p?e=s.trim():f&&(e=s.replace(/^\s+/g,"")),E({fieldName:n,value:e})}}})}),(0,t.jsxs)("div",{className:"formfield-container lower-container",children:[(0,t.jsx)("p",{className:"label-spacer"}),(0,t.jsxs)("div",{className:"lower-content",children:[(0,t.jsx)("div",{className:"field-tip",children:S}),(0,t.jsx)(u.E,{status:N||m}),(0,t.jsx)("div",{className:"update-button-container",children:(0,t.jsx)(a.Z,{type:"primary",size:"small",className:"submit-button",onClick:async()=>{(C&&""!==T||T!==i)&&(v((0,c.kg)(c.Jk)),await(0,o.Si)({apiPath:n,data:{value:T},onSuccess:()=>{j({fieldName:w,value:T,path:s}),v((0,c.kg)(c.zv))},onError:e=>{v((0,c.kg)(c.Un,"There was an error: ".concat(e)))}}),k=setTimeout(P,o.sI),Z&&Z())},disabled:!b,children:"Update"})})]})]})]})};m.defaultProps={configPath:"",initialValue:""}},6979:function(e,n,s){"use strict";s.d(n,{Z:function(){return d}});var t=s(85893),a=s(67294),i=s(94594),r=s(41983),l=s(73615),o=s(90745),c=s(99519);const d=e=>{let{apiPath:n,checked:s,reversed:d=!1,configPath:u="",disabled:h=!1,fieldName:p,label:f,tip:g,useSubmit:m,onChange:v}=e;const[b,x]=(0,a.useState)(null);let y=null;const j=(0,a.useContext)(c.aC),{setFieldInConfigState:k}=j||{},w=()=>{x(null),clearTimeout(y),y=null},C=null!==b&&b.type===r.Jk;return(0,t.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[f&&(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:f})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)(i.Z,{className:"switch field-".concat(p),loading:C,onChange:async e=>{if(m){x((0,r.kg)(r.Jk));const s=d?!e:e;await(0,o.Si)({apiPath:n,data:{value:s},onSuccess:()=>{k({fieldName:p,value:s,path:u}),x((0,r.kg)(r.zv))},onError:e=>{x((0,r.kg)(r.Un,"There was an error: ".concat(e)))}}),y=setTimeout(w,o.sI)}v&&v(e)},defaultChecked:s,checked:s,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:h}),(0,t.jsx)(l.E,{status:b})]}),(0,t.jsx)("p",{className:"field-tip",children:g})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},26590:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return Z}});var t=s(85893),a=s(6880),i=s(14670),r=s(71230),l=s(15746),o=s(71577),c=s(67294),d=s(41664),u=s.n(d),h=s(99519),p=s(79139),f=s(73615),g=s(90745),m=s(6979),v=s(41983);const{Title:b}=a.Z;var x=()=>{const e=(0,c.useContext)(h.aC),{serverConfig:n,setFieldInConfigState:s}=e||{},{notifications:a}=n||{},{discord:i}=a||{},{enabled:r,webhook:l,goLiveMessage:d}=i||{},[u,x]=(0,c.useState)({}),[y,j]=(0,c.useState)(null),[k,w]=(0,c.useState)(!1);(0,c.useEffect)((()=>{x({enabled:r,webhook:l,goLiveMessage:d})}),[a,i]);const C=e=>{let{fieldName:n,value:s}=e;x({...u,[n]:s}),w(""!==l&&""!==d)};let S=null;const N=()=>{j(null),S=null,clearTimeout(S)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{children:"Discord"}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Let your Discord channel know each time you go live."}),(0,t.jsxs)("p",{className:"description reduced-margins",children:[(0,t.jsx)("a",{href:"https://support.discord.com/hc/en-us/articles/228383668",target:"_blank",rel:"noreferrer",children:"Create a webhook"})," ","under ",(0,t.jsx)("i",{children:"Edit Channel / Integrations"})," on your Discord channel and provide it below."]}),(0,t.jsx)(m.Z,{apiPath:"",fieldName:"discordEnabled",label:"Enable Discord",checked:u.enabled,onChange:e=>{C({fieldName:"enabled",value:e})}}),(0,t.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.oy.webhookUrl,required:!0,value:u.webhook,onChange:C})}),(0,t.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.oy.goLiveMessage,required:!0,value:u.goLiveMessage,onChange:C})}),(0,t.jsx)(o.Z,{type:"primary",onClick:async()=>{const e=u;await(0,g.Si)({apiPath:"/notifications/discord",data:{value:e},onSuccess:()=>{s({fieldName:"discord",value:e,path:"notifications"}),j((0,v.kg)(v.zv,"Updated.")),S=setTimeout(N,g.sI)},onError:e=>{j((0,v.kg)(v.Un,e)),S=setTimeout(N,g.sI)}})},style:{display:k?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Save"}),(0,t.jsx)(f.E,{status:y})]})};const{Title:y}=a.Z;var j=()=>{const e=(0,c.useContext)(h.aC),{serverConfig:n,setFieldInConfigState:s}=e||{},{notifications:a}=n||{},{browser:i}=a||{},{enabled:r,goLiveMessage:l}=i||{},[d,u]=(0,c.useState)({}),[b,x]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1);(0,c.useEffect)((()=>{u({enabled:r,goLiveMessage:l})}),[a,i]);const w=e=>{let{fieldName:n,value:s}=e;console.log(n,s),u({...d,[n]:s}),k(!0)};let C=null;const S=()=>{x(null),C=null,clearTimeout(C)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{children:"Browser Alerts"}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Viewers can opt into being notified when you go live with their browser."}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Not all browsers support this."}),(0,t.jsx)(m.Z,{apiPath:"",fieldName:"enabled",label:"Enable browser notifications",onChange:e=>{w({fieldName:"enabled",value:e})},checked:d.enabled}),(0,t.jsx)("div",{style:{display:d.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.mv.goLiveMessage,required:!0,type:p.Sk,value:d.goLiveMessage,onChange:w})}),(0,t.jsx)(o.Z,{type:"primary",style:{display:j?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},onClick:async()=>{const e=d;await(0,g.Si)({apiPath:"/notifications/browser",data:{value:e},onSuccess:()=>{s({fieldName:"browser",value:e,path:"notifications"}),x((0,v.kg)(v.zv,"Updated.")),C=setTimeout(S,g.sI)},onError:e=>{x((0,v.kg)(v.Un,e)),C=setTimeout(S,g.sI)}})},children:"Save"}),(0,t.jsx)(f.E,{status:b})]})},k=s(46551);const{Title:w}=a.Z;var C=()=>{const e=(0,c.useContext)(h.aC),{serverConfig:n,setFieldInConfigState:s}=e||{},{notifications:a}=n||{},{twitter:i}=a||{},[r,l]=(0,c.useState)({}),[d,u]=(0,c.useState)(null),[b,x]=(0,c.useState)(!1);(0,c.useEffect)((()=>{const{enabled:e,apiKey:n,apiSecret:s,accessToken:t,accessTokenSecret:a,bearerToken:r,goLiveMessage:o}=i||{};l({enabled:e,apiKey:n,apiSecret:s,accessToken:t,accessTokenSecret:a,bearerToken:r,goLiveMessage:o})}),[i]);(0,c.useEffect)((()=>{x((()=>{const{apiKey:e,apiSecret:n,accessToken:s,accessTokenSecret:t,bearerToken:a,goLiveMessage:i}=r;return!!e&&!!n&&!!s&&!!t&&!!a&&!!i})())}),[r]);const y=e=>{let{fieldName:n,value:s}=e;l({...r,[n]:s})};let j=null;const C=()=>{u(null),j=null,clearTimeout(j),x(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{children:"Twitter"}),(0,t.jsx)("p",{className:"description reduced-margins",children:"Let your Twitter followers know each time you go live."}),(0,t.jsxs)("div",{style:{display:r.enabled?"block":"none"},children:[(0,t.jsxs)("p",{className:"description reduced-margins",children:[(0,t.jsx)("a",{href:"https://owncast.online/docs/notifications",target:"_blank",rel:"noreferrer",children:"Read how to configure your Twitter account"})," ","to support posting from Owncast."]}),(0,t.jsxs)("p",{className:"description reduced-margins",children:[(0,t.jsx)("a",{href:"https://developer.twitter.com/en/portal/dashboard",target:"_blank",rel:"noreferrer",children:"And then get your Twitter developer credentials"})," ","to fill in below."]})]}),(0,t.jsx)(m.Z,{apiPath:"",fieldName:"enabled",label:"Enable Twitter",onChange:e=>{const n=r.enabled;return y({fieldName:"enabled",value:e}),e!==n},checked:r.enabled}),(0,t.jsx)("div",{style:{display:r.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.$Z.apiKey,required:!0,value:r.apiKey,onChange:y})}),(0,t.jsx)("div",{style:{display:r.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.$Z.apiSecret,type:p.A8,required:!0,value:r.apiSecret,onChange:y})}),(0,t.jsx)("div",{style:{display:r.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.$Z.accessToken,required:!0,value:r.accessToken,onChange:y})}),(0,t.jsx)("div",{style:{display:r.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.$Z.accessTokenSecret,type:p.A8,required:!0,value:r.accessTokenSecret,onChange:y})}),(0,t.jsx)("div",{style:{display:r.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.$Z.bearerToken,required:!0,value:r.bearerToken,onChange:y})}),(0,t.jsx)("div",{style:{display:r.enabled?"block":"none"},children:(0,t.jsx)(p.nv,{...g.$Z.goLiveMessage,type:k.Kx,required:!0,value:r.goLiveMessage,onChange:y})}),(0,t.jsx)(o.Z,{type:"primary",onClick:async()=>{const e=r;await(0,g.Si)({apiPath:"/notifications/twitter",data:{value:e},onSuccess:()=>{s({fieldName:"twitter",value:e,path:"notifications"}),u((0,v.kg)(v.zv,"Updated.")),j=setTimeout(C,g.sI)},onError:e=>{u((0,v.kg)(v.Un,e)),j=setTimeout(C,g.sI)}})},style:{display:b?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Save"}),(0,t.jsx)(f.E,{status:d})]})};const{Title:S}=a.Z;var N=()=>{const e=(0,c.useContext)(h.aC),{serverConfig:n}=e||{},{federation:s}=n||{},{enabled:a}=s||{},[i,r]=(0,c.useState)({});return(0,c.useEffect)((()=>{r({enabled:a})}),[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{children:"Fediverse Social"}),(0,t.jsx)("p",{className:"description",children:"Enabling the Fediverse social features will not just alert people to when you go live, but also enable other functionality."}),(0,t.jsxs)("p",{children:["Fediverse social features:"," ",(0,t.jsx)("span",{style:{color:s.enabled?"green":"red"},children:i.enabled?"Enabled":"Disabled"})]}),(0,t.jsx)(u(),{passHref:!0,href:"/config-federation",children:(0,t.jsx)(o.Z,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Configure"})})]})},T=s(37174);const{Title:E}=a.Z;function Z(){const[e,n]=(0,c.useState)(null),s=(0,c.useContext)(h.aC),{serverConfig:a}=s||{},{yp:d}=a,{instanceUrl:p}=d,[f,m]=(0,c.useState)(!1);(0,c.useEffect)((()=>{n({instanceUrl:p})}),[d]);const v=""!==p,b=!v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Z,{message:"You must set your server URL before you can enable this feature.",type:"warning",showIcon:!0}),(0,t.jsx)("br",{}),(0,t.jsx)(k.$7,{fieldName:"instanceUrl",...g.yi,value:(null===e||void 0===e?void 0:e.instanceUrl)||"",initialValue:d.instanceUrl,type:k.xA,onChange:s=>{let{fieldName:t,value:a}=s;m((0,T.jv)(a)),n({...e,[t]:a})},onSubmit:()=>{f&&n({...e,enabled:!1})},required:!0})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E,{children:"Notifications"}),(0,t.jsxs)("p",{className:"description",children:["Let your viewers know when you go live by supporting any of the below notification channels."," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/notifications/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more about live notifications."})]}),b,(0,t.jsxs)(r.Z,{children:[(0,t.jsx)(l.Z,{span:10,className:"form-module ".concat(v?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(j,{})}),(0,t.jsx)(l.Z,{span:10,className:"form-module ".concat(v?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(C,{})}),(0,t.jsx)(l.Z,{span:10,className:"form-module ".concat(v?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(x,{})}),(0,t.jsx)(l.Z,{span:10,className:"form-module ".concat(v?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,t.jsx)(N,{})}),(0,t.jsxs)(l.Z,{span:10,className:"form-module ".concat(v?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:[(0,t.jsx)(E,{children:"Custom"}),(0,t.jsx)("p",{className:"description",children:"Build your own notifications by using custom webhooks."}),(0,t.jsx)(u(),{passHref:!0,href:"/webhooks",children:(0,t.jsx)(o.Z,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Create"})})]})]})]})}},41983:function(e,n,s){"use strict";s.d(n,{Jk:function(){return d},Un:function(){return o},dG:function(){return h},kg:function(){return f},zv:function(){return u}});var t=s(85893),a=s(89739),i=s(21640),r=s(50888),l=s(28058);const o="error",c="invalid",d="proessing",u="success",h="warning",p={[u]:{type:u,icon:(0,t.jsx)(a.Z,{style:{color:"green"}}),message:"Success!"},[o]:{type:o,icon:(0,t.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[c]:{type:c,icon:(0,t.jsx)(i.Z,{style:{color:"red"}}),message:"An error occurred."},[d]:{type:d,icon:(0,t.jsx)(r.Z,{}),message:""},[h]:{type:h,icon:(0,t.jsx)(l.Z,{style:{color:"#fc0"}}),message:""}};function f(e,n){return e&&p[e]?n?{type:e,icon:p[e].icon,message:n}:p[e]:null}},99519:function(e,n,s){"use strict";s.d(n,{aC:function(){return d}});var t=s(85893),a=s(67294),i=s(45697),r=s.n(i),l=s(64777);const o={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[s(90745).gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},c={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},d=a.createContext({...c,serverConfig:o,setFieldInConfigState:e=>null}),u=e=>{let{children:n}=e;const[s,i]=(0,a.useState)(c),[r,u]=(0,a.useState)(o),h=async()=>{try{const e=await(0,l.rQ)(l.Q_);i({...e})}catch(e){}};(0,a.useEffect)((()=>{let e=null;return h(),e=setInterval(h,l.NE),(async()=>{try{const e=await(0,l.rQ)(l.bl);u(e)}catch(e){}})(),()=>{clearInterval(e)}}),[]);const p={...s,serverConfig:r,setFieldInConfigState:e=>{let{fieldName:n,value:s,path:t}=e;const a=t?{...r,[t]:{...r[t],[n]:s}}:{...r,[n]:s};u(a)}};return(0,t.jsx)(d.Provider,{value:p,children:n})};u.propTypes={children:r().element.isRequired},n.ZP=u}},function(e){e.O(0,[5596,481,173,1407,4083,6880,1577,9915,1664,5899,745,9774,2888,179],(function(){return n=7148,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=config-notify-ef602659d18ada39.js.map