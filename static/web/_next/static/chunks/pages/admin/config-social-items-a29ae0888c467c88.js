(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{81009:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return a(87945)}])},49817:function(e,s,a){"use strict";a.d(s,{Z:function(){return w}});var t=a(85893),l=a(67294),n=a(6880),i=a(71577),r=a(69677),o=a(48213),c=a(85402),d=a(10010),u=a(39398),m=a(48689),p=a(34041),h=a(90745);let f=e=>{let{iconList:s,selectedOption:a,onSelected:l}=e,n=e=>{l&&l(e)},i=""===a?null:a;return(0,t.jsxs)("div",{className:"social-dropdown-container",children:[(0,t.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,t.jsxs)("div",{className:"formfield-container",children:[(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,t.jsx)("div",{className:"input-side",children:(0,t.jsxs)(p.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:i,value:i,onSelect:n,children:[s.map(e=>{let{platform:s,icon:a,key:l}=e;return(0,t.jsxs)(p.Z.Option,{className:"social-option",value:l,children:[(0,t.jsx)("span",{className:"option-icon",children:(0,t.jsx)("img",{src:a,alt:"",className:"option-icon"})}),(0,t.jsx)("span",{className:"option-label",children:s})]},"platform-".concat(l))}),(0,t.jsx)(p.Z.Option,{className:"social-option",value:h.z_,children:"Other..."},"platform-".concat(h.z_))]})})]})]})};var x=a(64777),g=a(99519),j=a(37174),v=a(79139),y=a(41983),b=a(73615);let{Title:N}=n.Z;function w(){var e,s;let[a,n]=(0,l.useState)([]),[p,w]=(0,l.useState)([]),[k,S]=(0,l.useState)(!1),[C,Z]=(0,l.useState)(!1),[E,P]=(0,l.useState)(!1),[_,T]=(0,l.useState)(-1),[z,O]=(0,l.useState)(h.wC),[L,I]=(0,l.useState)(null),M=(0,l.useContext)(g.aC),{serverConfig:U,setFieldInConfigState:V}=M||{},{instanceDetails:A}=U,{socialHandles:H}=A,D=async()=>{try{let e=await (0,x.rQ)(x.$i,{auth:!1}),s=Object.keys(e).map(s=>({key:s,...e[s]}));n(s)}catch(a){console.log(a)}},K=e=>a.find(s=>s.key===e)||!1,Q=""!==z.platform&&!a.find(e=>e.key===z.platform);(0,l.useEffect)(()=>{D()},[]),(0,l.useEffect)(()=>{A.socialHandles&&w(H)},[A]);let X=()=>{I(null),clearTimeout(null)},B=()=>{S(!1),T(-1),Z(!1),P(!1),O({...h.wC})},J=()=>{B()},R=(e,s)=>{O({...z,[e]:s})},q=e=>{e===h.z_?(Z(!0),R("platform","")):(Z(!1),R("platform",e))},F=e=>{let{value:s}=e.target;R("platform",s)},G=e=>{let{value:s}=e;R("url",s)},Y=async e=>{await (0,h.Si)({apiPath:h.c9,data:{value:e},onSuccess:()=>{V({fieldName:"socialHandles",value:e,path:"instanceDetails"}),P(!1),J(),I((0,y.kg)(y.zv)),setTimeout(X,h.sI)},onError:e=>{I((0,y.kg)(y.Un,"There was an error: ".concat(e))),P(!1),setTimeout(X,h.sI)}})},$=()=>{P(!0);let e=p.length?[...p]:[];-1===_?e.push(z):e.splice(_,1,z),Y(e)},W=e=>{let s=[...p];s.splice(e,1),Y(s)},ee=e=>{if(e<=0||e>=p.length)return;let s=[...p],a=s[e-1];s[e-1]=s[e],s[e]=a,Y(s)},es=e=>{if(e<0||e>=p.length-1)return;let s=[...p],a=s[e+1];s[e+1]=s[e],s[e]=a,Y(s)},ea={disabled:(e=z.url,"xmpp"===(s=z.platform)?!(0,j.Kf)(e,"xmpp"):"matrix"===s?!(0,j.bu)(e):!(0,j.jv)(e))},et=(0,t.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,t.jsx)("div",{className:"label-side"}),(0,t.jsx)("div",{className:"input-side",children:(0,t.jsx)(r.Z,{placeholder:"Other platform name",defaultValue:z.platform,onChange:F})})]});return(0,t.jsxs)("div",{className:"social-links-edit-container",children:[(0,t.jsx)(N,{level:3,className:"section-title",children:"Your Social Handles"}),(0,t.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,t.jsx)(b.E,{status:L}),(0,t.jsx)(o.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:[{title:"Social Link",dataIndex:"",key:"combo",render:(e,s)=>{let{platform:a,url:l}=s,n=K(a);if(!n)return(0,t.jsx)("div",{className:"social-handle-cell",children:(0,t.jsxs)("p",{className:"option-label",children:[(0,t.jsx)("strong",{children:a}),(0,t.jsx)("span",{className:"handle-url",title:l,children:l})]})});let{icon:i,platform:r}=n;return(0,t.jsxs)("div",{className:"social-handle-cell",children:[(0,t.jsx)("span",{className:"option-icon",children:(0,t.jsx)("img",{src:i,alt:"",className:"option-icon"})}),(0,t.jsxs)("p",{className:"option-label",children:[(0,t.jsx)("strong",{children:r}),(0,t.jsx)("span",{className:"handle-url",title:l,children:l})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,s,a)=>(0,t.jsxs)("div",{className:"actions",children:[(0,t.jsx)(i.Z,{size:"small",onClick:()=>{let e=p[a];T(a),O({...e}),S(!0),K(e.platform)||Z(!0)},children:"Edit"}),(0,t.jsx)(i.Z,{icon:(0,t.jsx)(d.Z,{}),size:"small",hidden:0===a,onClick:()=>ee(a)}),(0,t.jsx)(i.Z,{icon:(0,t.jsx)(u.Z,{}),size:"small",hidden:a===p.length-1,onClick:()=>es(a)}),(0,t.jsx)(i.Z,{className:"delete-button",icon:(0,t.jsx)(m.Z,{}),size:"small",onClick:()=>W(a)})]})}],dataSource:p}),(0,t.jsx)(c.Z,{title:"Edit Social Handle",open:k,onOk:$,onCancel:J,confirmLoading:E,okButtonProps:ea,children:(0,t.jsxs)("div",{className:"social-handle-modal-content",children:[(0,t.jsx)(f,{iconList:a,selectedOption:Q?h.z_:z.platform,onSelected:q}),C&&et,(0,t.jsx)("br",{}),(0,t.jsx)(v.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[z.platform]||"Url to page",value:z.url,onChange:G,useTrim:!0,type:"url",pattern:j.ax}),(0,t.jsx)(b.E,{status:L})]})}),(0,t.jsx)("br",{}),(0,t.jsx)(i.Z,{type:"primary",onClick:()=>{B(),S(!0)},children:"Add a new social link"})]})}},87945:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return r}});var t=a(85893);a(67294);var l=a(6880),n=a(49817);let{Title:i}=l.Z;function r(){return(0,t.jsxs)("div",{className:"config-social-items",children:[(0,t.jsx)(i,{children:"Social Items"}),(0,t.jsx)(n.Z,{})]})}},41983:function(e,s,a){"use strict";a.d(s,{Jk:function(){return d},Un:function(){return o},dG:function(){return m},kg:function(){return h},zv:function(){return u}});var t=a(85893),l=a(89739),n=a(21640),i=a(50888),r=a(28058);let o="error",c="invalid",d="proessing",u="success",m="warning",p={[u]:{type:u,icon:(0,t.jsx)(l.Z,{style:{color:"green"}}),message:"Success!"},[o]:{type:o,icon:(0,t.jsx)(n.Z,{style:{color:"red"}}),message:"An error occurred."},[c]:{type:c,icon:(0,t.jsx)(n.Z,{style:{color:"red"}}),message:"An error occurred."},[d]:{type:d,icon:(0,t.jsx)(i.Z,{}),message:""},[m]:{type:m,icon:(0,t.jsx)(r.Z,{style:{color:"#fc0"}}),message:""}};function h(e,s){return e&&p[e]?s?{type:e,icon:p[e].icon,message:s}:p[e]:null}},99519:function(e,s,a){"use strict";a.d(s,{aC:function(){return u}});var t=a(85893),l=a(67294),n=a(45697),i=a.n(n),r=a(64777),o=a(90745);let c={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[o.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},d={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},u=l.createContext({...d,serverConfig:c,setFieldInConfigState:e=>null}),m=e=>{let{children:s}=e,[a,n]=(0,l.useState)(d),[i,o]=(0,l.useState)(c),m=async()=>{try{let e=await (0,r.rQ)(r.Q_);n({...e})}catch(s){}},p=async()=>{try{let e=await (0,r.rQ)(r.bl);o(e)}catch(s){}},h=e=>{let{fieldName:s,value:a,path:t}=e,l=t?{...i,[t]:{...i[t],[s]:a}}:{...i,[s]:a};o(l)};(0,l.useEffect)(()=>{let e=null;return m(),e=setInterval(m,r.NE),p(),()=>{clearInterval(e)}},[]);let f={...a,serverConfig:i,setFieldInConfigState:h};return(0,t.jsx)(u.Provider,{value:f,children:s})};m.propTypes={children:i().element.isRequired},s.ZP=m}},function(e){e.O(0,[5596,481,173,1407,4083,6880,3174,1577,6386,3013,3698,2459,8213,9915,715,5402,1908,8131,745,9774,2888,179],function(){return e(e.s=81009)}),_N_E=e.O()}]);
//# sourceMappingURL=config-social-items-a29ae0888c467c88.js.map