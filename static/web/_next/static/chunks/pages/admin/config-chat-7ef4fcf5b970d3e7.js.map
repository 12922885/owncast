{"version":3,"file":"static/chunks/pages/admin/config-chat-7ef4fcf5b970d3e7.js","mappings":"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","sources":["webpack://_N_E/?a2be","webpack://_N_E/./pages/admin/config-chat.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/config-chat\",\n      function () {\n        return require(\"private-next-pages/admin/config-chat.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/config-chat\"])\n      });\n    }\n  ","import { Typography } from 'antd';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { TEXTFIELD_TYPE_TEXTAREA } from '../../components/admin/TextField';\nimport { TextFieldWithSubmit } from '../../components/admin/TextFieldWithSubmit';\nimport { ToggleSwitch } from '../../components/admin/ToggleSwitch';\nimport { EditValueArray } from '../../components/admin/EditValueArray';\nimport {\n  createInputStatus,\n  StatusState,\n  STATUS_ERROR,\n  STATUS_SUCCESS,\n} from '../../utils/input-statuses';\n\nimport { UpdateArgs } from '../../types/config-section';\nimport {\n  API_CHAT_FORBIDDEN_USERNAMES,\n  API_CHAT_SUGGESTED_USERNAMES,\n  FIELD_PROPS_CHAT_JOIN_MESSAGES_ENABLED,\n  CHAT_ESTABLISHED_USER_MODE,\n  FIELD_PROPS_DISABLE_CHAT,\n  postConfigUpdateToAPI,\n  RESET_TIMEOUT,\n  TEXTFIELD_PROPS_CHAT_FORBIDDEN_USERNAMES,\n  TEXTFIELD_PROPS_CHAT_SUGGESTED_USERNAMES,\n  TEXTFIELD_PROPS_SERVER_WELCOME_MESSAGE,\n} from '../../utils/config-constants';\nimport { ServerStatusContext } from '../../utils/server-status-context';\n\nexport default function ConfigChat() {\n  const { Title } = Typography;\n  const [formDataValues, setFormDataValues] = useState(null);\n  const [forbiddenUsernameSaveState, setForbiddenUsernameSaveState] = useState<StatusState>(null);\n  const [suggestedUsernameSaveState, setSuggestedUsernameSaveState] = useState<StatusState>(null);\n  const serverStatusData = useContext(ServerStatusContext);\n  const { serverConfig, setFieldInConfigState } = serverStatusData || {};\n\n  const {\n    chatDisabled,\n    chatJoinMessagesEnabled,\n    forbiddenUsernames,\n    instanceDetails,\n    suggestedUsernames,\n    chatEstablishedUserMode,\n  } = serverConfig;\n  const { welcomeMessage } = instanceDetails;\n\n  const handleFieldChange = ({ fieldName, value }: UpdateArgs) => {\n    setFormDataValues({\n      ...formDataValues,\n      [fieldName]: value,\n    });\n  };\n\n  function handleChatDisableChange(disabled: boolean) {\n    handleFieldChange({ fieldName: 'chatDisabled', value: !disabled });\n  }\n\n  function handleChatJoinMessagesEnabledChange(enabled: boolean) {\n    handleFieldChange({ fieldName: 'chatJoinMessagesEnabled', value: enabled });\n  }\n\n  function handleEstablishedUserModeChange(enabled: boolean) {\n    handleFieldChange({ fieldName: 'chatEstablishedUserMode', value: enabled });\n  }\n\n  function resetForbiddenUsernameState() {\n    setForbiddenUsernameSaveState(null);\n  }\n\n  function saveForbiddenUsernames() {\n    postConfigUpdateToAPI({\n      apiPath: API_CHAT_FORBIDDEN_USERNAMES,\n      data: { value: formDataValues.forbiddenUsernames },\n      onSuccess: () => {\n        setFieldInConfigState({\n          fieldName: 'forbiddenUsernames',\n          value: formDataValues.forbiddenUsernames,\n        });\n        setForbiddenUsernameSaveState(createInputStatus(STATUS_SUCCESS));\n        setTimeout(resetForbiddenUsernameState, RESET_TIMEOUT);\n      },\n      onError: (message: string) => {\n        setForbiddenUsernameSaveState(createInputStatus(STATUS_ERROR, message));\n        setTimeout(resetForbiddenUsernameState, RESET_TIMEOUT);\n      },\n    });\n  }\n\n  function handleDeleteForbiddenUsernameIndex(index: number) {\n    formDataValues.forbiddenUsernames.splice(index, 1);\n    saveForbiddenUsernames();\n  }\n\n  function handleCreateForbiddenUsername(tag: string) {\n    formDataValues.forbiddenUsernames.push(tag);\n    handleFieldChange({\n      fieldName: 'forbiddenUsernames',\n      value: formDataValues.forbiddenUsernames,\n    });\n    saveForbiddenUsernames();\n  }\n\n  function resetSuggestedUsernameState() {\n    setSuggestedUsernameSaveState(null);\n  }\n\n  function saveSuggestedUsernames() {\n    postConfigUpdateToAPI({\n      apiPath: API_CHAT_SUGGESTED_USERNAMES,\n      data: { value: formDataValues.suggestedUsernames },\n      onSuccess: () => {\n        setFieldInConfigState({\n          fieldName: 'suggestedUsernames',\n          value: formDataValues.suggestedUsernames,\n        });\n        setSuggestedUsernameSaveState(createInputStatus(STATUS_SUCCESS));\n        setTimeout(resetSuggestedUsernameState, RESET_TIMEOUT);\n      },\n      onError: (message: string) => {\n        setForbiddenUsernameSaveState(createInputStatus(STATUS_ERROR, message));\n        setTimeout(resetSuggestedUsernameState, RESET_TIMEOUT);\n      },\n    });\n  }\n\n  function handleDeleteSuggestedUsernameIndex(index: number) {\n    formDataValues.suggestedUsernames.splice(index, 1);\n    saveSuggestedUsernames();\n  }\n\n  function handleCreateSuggestedUsername(tag: string) {\n    formDataValues.suggestedUsernames.push(tag);\n    handleFieldChange({\n      fieldName: 'suggestedUsernames',\n      value: formDataValues.suggestedUsernames,\n    });\n    saveSuggestedUsernames();\n  }\n\n  function getSuggestedUsernamesLimitWarning(length: number): StatusState | null {\n    if (length === 0)\n      return createInputStatus('success', TEXTFIELD_PROPS_CHAT_SUGGESTED_USERNAMES.no_entries);\n    if (length > 0 && length < 10)\n      return createInputStatus('warning', TEXTFIELD_PROPS_CHAT_SUGGESTED_USERNAMES.min_not_reached);\n    return null;\n  }\n\n  useEffect(() => {\n    setFormDataValues({\n      chatDisabled,\n      chatJoinMessagesEnabled,\n      forbiddenUsernames,\n      suggestedUsernames,\n      welcomeMessage,\n      chatEstablishedUserMode,\n    });\n  }, [serverConfig]);\n\n  if (!formDataValues) {\n    return null;\n  }\n\n  return (\n    <div className=\"config-server-details-form\">\n      <Title>Chat Settings</Title>\n      <div className=\"form-module config-server-details-container\">\n        <ToggleSwitch\n          fieldName=\"chatDisabled\"\n          {...FIELD_PROPS_DISABLE_CHAT}\n          checked={!formDataValues.chatDisabled}\n          reversed\n          onChange={handleChatDisableChange}\n        />\n        <ToggleSwitch\n          fieldName=\"chatJoinMessagesEnabled\"\n          {...FIELD_PROPS_CHAT_JOIN_MESSAGES_ENABLED}\n          checked={formDataValues.chatJoinMessagesEnabled}\n          onChange={handleChatJoinMessagesEnabledChange}\n        />\n        <ToggleSwitch\n          fieldName=\"establishedUserMode\"\n          {...CHAT_ESTABLISHED_USER_MODE}\n          checked={formDataValues.chatEstablishedUserMode}\n          onChange={handleEstablishedUserModeChange}\n        />\n        <TextFieldWithSubmit\n          fieldName=\"welcomeMessage\"\n          {...TEXTFIELD_PROPS_SERVER_WELCOME_MESSAGE}\n          type={TEXTFIELD_TYPE_TEXTAREA}\n          value={formDataValues.welcomeMessage}\n          initialValue={welcomeMessage}\n          onChange={handleFieldChange}\n        />\n        <br />\n        <br />\n        <EditValueArray\n          title={TEXTFIELD_PROPS_CHAT_FORBIDDEN_USERNAMES.label}\n          placeholder={TEXTFIELD_PROPS_CHAT_FORBIDDEN_USERNAMES.placeholder}\n          description={TEXTFIELD_PROPS_CHAT_FORBIDDEN_USERNAMES.tip}\n          values={formDataValues.forbiddenUsernames}\n          handleDeleteIndex={handleDeleteForbiddenUsernameIndex}\n          handleCreateString={handleCreateForbiddenUsername}\n          submitStatus={forbiddenUsernameSaveState}\n        />\n        <br />\n        <br />\n        <EditValueArray\n          title={TEXTFIELD_PROPS_CHAT_SUGGESTED_USERNAMES.label}\n          placeholder={TEXTFIELD_PROPS_CHAT_SUGGESTED_USERNAMES.placeholder}\n          description={TEXTFIELD_PROPS_CHAT_SUGGESTED_USERNAMES.tip}\n          values={formDataValues.suggestedUsernames}\n          handleDeleteIndex={handleDeleteSuggestedUsernameIndex}\n          handleCreateString={handleCreateSuggestedUsername}\n          submitStatus={suggestedUsernameSaveState}\n          continuousStatusMessage={getSuggestedUsernamesLimitWarning(\n            formDataValues.suggestedUsernames.length,\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":["window","__NEXT_P","push","__webpack_require__","ConfigChat","length","Title","Typography","formDataValues","setFormDataValues","useState","forbiddenUsernameSaveState","setForbiddenUsernameSaveState","suggestedUsernameSaveState","setSuggestedUsernameSaveState","serverStatusData","useContext","ServerStatusContext","serverConfig","setFieldInConfigState","chatDisabled","chatJoinMessagesEnabled","forbiddenUsernames","instanceDetails","suggestedUsernames","chatEstablishedUserMode","welcomeMessage","handleFieldChange","fieldName","value","param","resetForbiddenUsernameState","saveForbiddenUsernames","postConfigUpdateToAPI","apiPath","API_CHAT_FORBIDDEN_USERNAMES","data","onSuccess","createInputStatus","STATUS_SUCCESS","setTimeout","RESET_TIMEOUT","onError","STATUS_ERROR","message","resetSuggestedUsernameState","saveSuggestedUsernames","API_CHAT_SUGGESTED_USERNAMES","useEffect","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsxs","div","className","jsx","ToggleSwitch","FIELD_PROPS_DISABLE_CHAT","checked","reversed","onChange","disabled","FIELD_PROPS_CHAT_JOIN_MESSAGES_ENABLED","enabled","CHAT_ESTABLISHED_USER_MODE","TextFieldWithSubmit","TEXTFIELD_PROPS_SERVER_WELCOME_MESSAGE","type","TEXTFIELD_TYPE_TEXTAREA","initialValue","br","EditValueArray","title","TEXTFIELD_PROPS_CHAT_FORBIDDEN_USERNAMES","placeholder","description","values","handleDeleteIndex","index","splice","handleCreateString","tag","submitStatus","TEXTFIELD_PROPS_CHAT_SUGGESTED_USERNAMES","continuousStatusMessage"],"sourceRoot":""}