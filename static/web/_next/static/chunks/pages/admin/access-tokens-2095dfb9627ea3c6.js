(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9882],{26562:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/access-tokens",function(){return t(23341)}])},23341:function(e,n,t){"use strict";t.r(n);var r=t(85893),c=t(67294),o=t(84485),s=t(94199),a=t(20550),i=t(15746),u=t(32808),l=t(30878),d=t(69677),f=t(71230),h=t(71577),p=t(26713),m=t(81025),k=t(48689),w=t(58091),y=t(64777);let{Title:g,Paragraph:b}=o.Z,j={CAN_SEND_SYSTEM_MESSAGES:{name:"System messages",description:"Can send official messages on behalf of the system.",color:"purple"},CAN_SEND_MESSAGES:{name:"User chat messages",description:"Can send chat messages on behalf of the owner of this token.",color:"green"},HAS_ADMIN_ACCESS:{name:"Has admin access",description:"Can perform administrative actions such as moderation, get server statuses, etc.",color:"red"}},x=e=>{let{onOk:n,onCancel:t,open:o}=e,[s,a]=(0,c.useState)([]),[p,m]=(0,c.useState)(""),k=Object.keys(j).map(e=>({value:e,label:j[e].description})),w={disabled:0===s.length||""===p},y=k.map(e=>(0,r.jsx)(i.Z,{span:8,children:(0,r.jsx)(u.Z,{value:e.value,children:e.label})},e.value));return(0,r.jsxs)(l.Z,{title:"Create New Access token",open:o,onOk:function(){n(p,s),a([]),m("")},onCancel:t,okButtonProps:w,children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("p",{children:"The name will be displayed as the chat user when sending messages with this access token."}),(0,r.jsx)(d.Z,{value:p,placeholder:"Name of bot, service, or integration",onChange:e=>m(e.currentTarget.value)})]}),(0,r.jsx)("p",{children:"Select the permissions this access token will have. It cannot be edited after it's created."}),(0,r.jsx)(u.Z.Group,{style:{width:"100%"},value:s,onChange:function(e){a(e)},children:(0,r.jsx)(f.Z,{children:y})}),(0,r.jsx)("p",{children:(0,r.jsx)(h.Z,{type:"primary",onClick:function(){a(Object.keys(j))},children:"Select all"})})]})},_=()=>{let[e,n]=(0,c.useState)([]),[t,o]=(0,c.useState)(!1);function i(e){console.error("error",e)}async function u(){try{let e=await (0,y.rQ)(y.ms);n(e)}catch(t){i(t)}}async function l(e){try{await (0,y.rQ)(y.Wr,{method:"POST",data:{token:e}}),u()}catch(n){i(n)}}async function f(t,r){try{let c=await (0,y.rQ)(y.IO,{method:"POST",data:{name:t,scopes:r}});n(e.concat(c))}catch(o){i(o)}}(0,c.useEffect)(()=>{u()},[]);let _=()=>{o(!0)},v=(e,n)=>{o(!1),f(e,n)},E=()=>{o(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(g,{children:"Access Tokens"}),(0,r.jsx)(b,{children:"Access tokens are used to allow external, 3rd party tools to perform specific actions on your Owncast server. They should be kept secure and never included in client code, instead they should be kept on a server that you control."}),(0,r.jsxs)(b,{children:["Read more about how to use these tokens, with examples, at"," ",(0,r.jsx)("a",{href:"https://owncast.online/docs/integrations/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,r.jsx)(m.Z,{rowKey:"token",columns:[{title:"",key:"delete",render:(e,n)=>(0,r.jsx)(p.Z,{size:"middle",children:(0,r.jsx)(h.Z,{onClick:()=>l(n.accessToken),icon:(0,r.jsx)(k.Z,{})})})},{title:"Name",dataIndex:"displayName",key:"displayName"},{title:"Token",dataIndex:"accessToken",key:"accessToken",render:e=>(0,r.jsx)(d.Z.Password,{size:"small",bordered:!1,value:e})},{title:"Scopes",dataIndex:"scopes",key:"scopes",render:e=>(0,r.jsx)(r.Fragment,{children:e.map(e=>(function(e){if(!e||!j[e])return null;let n=j[e];return(0,r.jsx)(s.Z,{title:n.description,children:(0,r.jsx)(a.Z,{color:n.color,children:n.name})},e)})(e))})},{title:"Last Used",dataIndex:"lastUsed",key:"lastUsed",render:e=>{if(!e)return"Never";let n=new Date(e);return(0,w.Z)(n,"P p")}}],dataSource:e,pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{type:"primary",onClick:_,children:"Create Access Token"}),(0,r.jsx)(x,{open:t,onOk:v,onCancel:E})]})};n.default=_},64777:function(e,n,t){"use strict";t.d(n,{$i:function(){return P},$l:function(){return $},Bu:function(){return w},E8:function(){return U},Ff:function(){return N},GC:function(){return b},GR:function(){return Y},HP:function(){return G},IO:function(){return A},Kp:function(){return p},Kt:function(){return H},M_:function(){return I},N$:function(){return R},NE:function(){return i},NM:function(){return k},Q_:function(){return u},Qc:function(){return S},RB:function(){return y},UJ:function(){return X},WB:function(){return s},WE:function(){return v},WQ:function(){return _},Wr:function(){return T},XA:function(){return Z},Y9:function(){return B},a_:function(){return h},ao:function(){return d},bl:function(){return l},e_:function(){return M},hn:function(){return E},iG:function(){return O},iV:function(){return f},jr:function(){return g},kb:function(){return Q},kg:function(){return z},ms:function(){return C},nx:function(){return j},op:function(){return D},qk:function(){return m},rQ:function(){return K},sG:function(){return x},um:function(){return W}});var r=t(34155);let c=r.env.NEXT_PUBLIC_ADMIN_USERNAME,o=r.env.NEXT_PUBLIC_ADMIN_STREAMKEY,s="/",a="".concat(s,"api/admin/"),i=15e3,u="".concat(a,"status"),l="".concat(a,"serverconfig"),d="".concat(a,"config"),f="".concat(a,"viewersOverTime"),h="".concat(a,"viewers"),p="".concat(a,"chat/clients"),m="".concat(a,"chat/users/disabled"),k="".concat(a,"chat/users/setenabled"),w="".concat(a,"chat/users/ipbans"),y="".concat(a,"chat/users/ipbans/remove"),g="".concat(a,"chat/users/setmoderator"),b="".concat(a,"chat/users/moderators"),j="".concat(a,"hardwarestats"),x="".concat(a,"logs"),_="".concat(a,"logs/warnings"),v="".concat(a,"chat/messages"),E="/api/admin/chat/messagevisibility",S="".concat(a,"emoji/upload"),N="".concat(a,"emoji/delete"),C="".concat(a,"accesstokens"),T="".concat(a,"accesstokens/delete"),A="".concat(a,"accesstokens/create"),Z="".concat(a,"webhooks"),I="".concat(a,"webhooks/delete"),O="".concat(a,"webhooks/create"),P="".concat(s,"api/socialplatforms"),M="".concat(a,"federation/send"),G="".concat(a,"followers"),U="".concat(a,"followers/pending"),B="".concat(a,"followers/blocked"),Q="".concat(a,"followers/approve"),D="".concat(a,"federation/actions"),R="".concat(a,"metrics/video"),W="".concat(a,"config/streamkeys"),X="".concat(a,"yp/reset");async function K(e,n){let{data:t,method:r="GET",auth:s=!0}=n||{},a={method:r};if(t&&(a.body=JSON.stringify(t)),s&&c&&o){let i=btoa("".concat(c,":").concat(o));a.headers={Authorization:"Basic ".concat(i)},a.mode="cors",a.credentials="include"}try{let u=await fetch(e,a),l=await u.json();if(!u.ok){let d=l.message||"An error has occurred: ".concat(u.status);throw Error(d)}return l}catch(f){return console.error(f),f}}async function $(e,n){let t={method:"GET",auth:!1,...n};return K(e,t)}async function z(e){try{let n=await fetch(e,{referrerPolicy:"no-referrer",referrer:""});if(!n.ok){let t="An error has occured: ".concat(n.status);throw Error(t)}let r=await n.json();return r}catch(c){console.log(c)}return{}}async function H(){return z("https://api.github.com/repos/owncast/owncast/releases/latest")}let L=/^\d+(\.\d+){0,2}$/;async function Y(e){let n=await H(),t=n.tag_name;return("v"===t.substr(0,1)&&(t=t.substr(1)),!function(e,n){if(!e||!n||0===e.length||0===n.length)return!1;if(e===n)return!0;if(L.test(e)&&L.test(n)){let t=e.split(".");for(;t.length<3;)t.push("0");let r=n.split(".");for(;r.length<3;)r.push("0");for(let c=0;c<3;c++){let o=parseInt(t[c],10),s=parseInt(r[c],10);if(o!==s)return o>s}return!0}return e>=n}(e,t))?t:null}}},function(e){e.O(0,[481,5596,1407,173,611,1577,3763,4485,5212,4759,8909,3903,3698,3461,6754,878,8091,2209,9774,2888,179],function(){return e(e.s=26562)}),_N_E=e.O()}]);
//# sourceMappingURL=access-tokens-2095dfb9627ea3c6.js.map