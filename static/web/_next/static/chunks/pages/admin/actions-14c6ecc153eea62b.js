(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(1413),o=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=n(42135),c=function(e,t){return o.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};c.displayName="DeleteOutlined";var s=o.forwardRef(c)},28058:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(1413),o=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},i=n(42135),c=function(e,t){return o.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};c.displayName="WarningOutlined";var s=o.forwardRef(c)},62705:function(e,t,n){var r=n(55639).Symbol;e.exports=r},44239:function(e,t,n){var r=n(62705),o=n(89607),a=n(2333),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},27561:function(e,t,n){var r=n(67990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},31957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},89607:function(e,t,n){var r=n(62705),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(o){}var s=i.call(e);return r&&(t?e[c]=n:delete e[c]),s}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:function(e,t,n){var r=n(31957),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var r=n(13218),o=n(7771),a=n(14841),i=Math.max,c=Math.min;e.exports=function(e,t,n){var s,l,u,d,f,p,h=0,v=!1,y=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var n=s,r=l;return s=l=void 0,h=t,d=e.apply(r,n)}function x(e){var n=e-p,r=e-h;return void 0===p||n>=t||n<0||y&&r>=u}function b(){var e,n,r,a=o();if(x(a))return j(a);f=setTimeout(b,(e=a-p,n=a-h,r=t-e,y?c(r,u-n):r))}function j(e){return(f=void 0,g&&s)?m(e):(s=l=void 0,d)}function w(){var e,n=o(),r=x(n);if(s=arguments,l=this,p=n,r){if(void 0===f)return h=e=p,f=setTimeout(b,t),v?m(e):d;if(y)return clearTimeout(f),f=setTimeout(b,t),m(p)}return void 0===f&&(f=setTimeout(b,t)),d}return t=a(t)||0,r(n)&&(v=!!n.leading,u=(y="maxWait"in n)?i(a(n.maxWait)||0,t):u,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==f&&clearTimeout(f),h=0,s=p=l=f=void 0},w.flush=function(){return void 0===f?d:j(o())},w}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var r=n(44239),o=n(37005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},7771:function(e,t,n){var r=n(55639);e.exports=function(){return r.Date.now()}},14841:function(e,t,n){var r=n(27561),o=n(13218),a=n(33448),i=0/0,c=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):c.test(e)?i:+e}},54005:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return n(2075)}])},2075:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(48689),a=n(86548),i=n(84485),c=n(30878),s=n(18119),l=n(69677),u=n(32808),d=n(26713),f=n(71577),p=n(81025),h=n(96486),v=n.n(h),y=n(67294),g=n(39664),m=n(90745),x=n(41983),b=n(99519),j=n(37174);let{Title:w,Paragraph:k}=i.Z,C=e=>{let{onOk:t,onCancel:n,open:o,action:a}=e,[i,d]=(0,y.useState)(""),[f,p]=(0,y.useState)(""),[h,v]=(0,y.useState)(""),[g,m]=(0,y.useState)(""),[x,b]=(0,y.useState)(""),[w,k]=(0,y.useState)(!1);(0,y.useEffect)(()=>{d((null==a?void 0:a.url)||""),p((null==a?void 0:a.title)||""),v((null==a?void 0:a.description)||""),m((null==a?void 0:a.icon)||""),b((null==a?void 0:a.color)||""),k((null==a?void 0:a.openExternally)||!1)},[a]);let C={disabled:!((0,j.jv)(i,["https:"])&&""!==f)},T=e=>{k(e.target.checked)};return(0,r.jsx)(c.Z,{destroyOnClose:!0,title:null==a?"Create New Action":"Edit Action",open:o,onOk:function(){t(a,i,f,h,g,x,w),d(""),p(""),v(""),m(""),b(""),k(!1)},onCancel:n,okButtonProps:C,children:(0,r.jsxs)(s.Z,{initialValues:a,children:["Add the URL for the external action you want to present."," ",(0,r.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,r.jsx)(s.Z.Item,{name:"url",children:(0,r.jsx)(l.Z,{required:!0,placeholder:"https://myserver.com/action (required)",onChange:e=>d(e.currentTarget.value.trim()),type:"url",pattern:j.ax})}),(0,r.jsx)(s.Z.Item,{name:"title",children:(0,r.jsx)(l.Z,{value:f,required:!0,placeholder:"Your action title (required)",onChange:e=>p(e.currentTarget.value)})}),(0,r.jsx)(s.Z.Item,{name:"description",children:(0,r.jsx)(l.Z,{value:h,placeholder:"Optional description",onChange:e=>v(e.currentTarget.value)})}),(0,r.jsx)(s.Z.Item,{name:"icon",children:(0,r.jsx)(l.Z,{value:g,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:e=>m(e.currentTarget.value)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Z.Item,{name:"color",style:{marginBottom:"0px"},children:(0,r.jsx)(l.Z,{type:"color",value:x,onChange:e=>b(e.currentTarget.value)})}),"Optional background color of the action button."]}),(0,r.jsx)(s.Z.Item,{name:"openExternally",children:(0,r.jsx)(u.Z,{checked:w,defaultChecked:w,onChange:T,children:"Open in a new tab instead of within your page."})})]})})},T=()=>{let e=(0,y.useContext)(b.aC),{serverConfig:t,setFieldInConfigState:n}=e||{},{externalActions:i}=t,[c,s]=(0,y.useState)(null),[l,u]=(0,y.useState)(!1),[h,j]=(0,y.useState)(null),[T,Z]=(0,y.useState)(null),S=()=>{j(null),clearTimeout(null)};async function O(e){await (0,m.Si)({apiPath:m.os,data:{value:e},onSuccess:()=>{n({fieldName:"externalActions",value:e,path:""}),j((0,x.kg)(x.zv,"Updated.")),setTimeout(S,m.sI)},onError:e=>{console.log(e),j((0,x.kg)(x.Un,e)),setTimeout(S,m.sI)}})}async function E(e){let t=[...c],n=c.findIndex(t=>t.url===e.url);t.splice(n,1);try{s(t),O(t)}catch(r){console.error(r)}}async function I(e,t,n,r,o,a,i){try{let l=[...c],u={url:t,title:n,description:r,icon:o,color:a,openExternally:i},d=e?c.findIndex(t=>v().isEqual(t,e)):-1;d>=0?l[d]=u:l.push(u),s(l),await O(l)}catch(f){console.error(f)}}async function P(e){Z(e),u(!0)}(0,y.useEffect)(()=>{s(i||[])},[i]);let _=()=>{Z(null),u(!0)},N=(e,t,n,r,o,a,i)=>{u(!1),I(e,t,n,r,o,a,i),Z(null)},U=()=>{u(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(w,{children:"External Actions"}),(0,r.jsx)(k,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,r.jsxs)(k,{children:["Read more about how to use actions, with examples, at"," ",(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,r.jsx)(p.Z,{rowKey:e=>"".concat(e.title,"-").concat(e.url),columns:[{title:"",key:"delete-edit",render:(e,t)=>(0,r.jsxs)(d.Z,{size:"middle",children:[(0,r.jsx)(f.Z,{onClick:()=>E(t),icon:(0,r.jsx)(o.Z,{})}),(0,r.jsx)(f.Z,{onClick:()=>P(t),icon:(0,r.jsx)(a.Z,{})})]})},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:e=>e?(0,r.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null},{title:"Color",dataIndex:"color",key:"color",render:e=>e?(0,r.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:e=>e?"In a new tab":"In a modal"}],dataSource:c,pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(f.Z,{type:"primary",onClick:_,children:"Create New Action"}),(0,r.jsx)(g.E,{status:h}),(0,r.jsx)(C,{action:T,open:l,onOk:N,onCancel:U})]})};t.default=T},41983:function(e,t,n){"use strict";n.d(t,{Jk:function(){return u},Un:function(){return s},dG:function(){return f},kg:function(){return h},zv:function(){return d}});var r=n(85893),o=n(89739),a=n(21640),i=n(50888),c=n(28058);let s="error",l="invalid",u="proessing",d="success",f="warning",p={[d]:{type:d,icon:(0,r.jsx)(o.Z,{style:{color:"green"}}),message:"Success!"},[s]:{type:s,icon:(0,r.jsx)(a.Z,{style:{color:"red"}}),message:"An error occurred."},[l]:{type:l,icon:(0,r.jsx)(a.Z,{style:{color:"red"}}),message:"An error occurred."},[u]:{type:u,icon:(0,r.jsx)(i.Z,{}),message:""},[f]:{type:f,icon:(0,r.jsx)(c.Z,{style:{color:"#fc0"}}),message:""}};function h(e,t){return e&&p[e]?t?{type:e,icon:p[e].icon,message:t}:p[e]:null}},99519:function(e,t,n){"use strict";n.d(t,{aC:function(){return d}});var r=n(85893),o=n(67294),a=n(45697),i=n.n(a),c=n(64777),s=n(90745);let l={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[s.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},u={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},d=o.createContext({...u,serverConfig:l,setFieldInConfigState:e=>null}),f=e=>{let{children:t}=e,[n,a]=(0,o.useState)(u),[i,s]=(0,o.useState)(l),f=async()=>{try{let e=await (0,c.rQ)(c.Q_);a({...e})}catch(t){}},p=async()=>{try{let e=await (0,c.rQ)(c.bl);s(e)}catch(t){}},h=e=>{let{fieldName:t,value:n,path:r}=e,o=r?{...i,[r]:{...i[r],[t]:n}}:{...i,[t]:n};s(o)};(0,o.useEffect)(()=>{let e=null;return f(),e=setInterval(f,c.NE),p(),()=>{clearInterval(e)}},[]);let v={...n,serverConfig:i,setFieldInConfigState:h};return(0,r.jsx)(d.Provider,{value:v,children:t})};f.propTypes={children:i().element.isRequired},t.ZP=f},92703:function(e,t,n){"use strict";var r=n(50414);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[3662,481,5596,1407,173,611,1577,3763,4485,5212,4759,7033,8909,3903,3698,3461,6754,878,8119,745,9774,2888,179],function(){return e(e.s=54005)}),_N_E=e.O()}]);
//# sourceMappingURL=actions-14c6ecc153eea62b.js.map