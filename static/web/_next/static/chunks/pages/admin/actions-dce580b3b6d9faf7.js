(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{54005:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return n(2075)}])},2075:function(e,t,n){"use strict";n.r(t);var r=n(85893),a=n(48689),o=n(86548),s=n(6880),l=n(85402),i=n(18119),c=n(69677),u=n(32808),d=n(26713),h=n(71577),p=n(48213),x=n(96486),g=n.n(x),y=n(67294),m=n(73615),v=n(90745),f=n(41983),j=n(99519),w=n(37174);let{Title:k,Paragraph:b}=s.Z,C=e=>{let{onOk:t,onCancel:n,open:a,action:o}=e,[s,d]=(0,y.useState)(""),[h,p]=(0,y.useState)(""),[x,g]=(0,y.useState)(""),[m,v]=(0,y.useState)(""),[f,j]=(0,y.useState)(""),[k,b]=(0,y.useState)(!1);(0,y.useEffect)(()=>{d((null==o?void 0:o.url)||""),p((null==o?void 0:o.title)||""),g((null==o?void 0:o.description)||""),v((null==o?void 0:o.icon)||""),j((null==o?void 0:o.color)||""),b((null==o?void 0:o.openExternally)||!1)},[o]);let C={disabled:!((0,w.jv)(s,["https:"])&&""!==h)},Z=e=>{b(e.target.checked)};return(0,r.jsx)(l.Z,{destroyOnClose:!0,title:null==o?"Create New Action":"Edit Action",open:a,onOk:function(){t(o,s,h,x,m,f,k),d(""),p(""),g(""),v(""),j(""),b(!1)},onCancel:n,okButtonProps:C,children:(0,r.jsxs)(i.Z,{initialValues:o,children:["Add the URL for the external action you want to present."," ",(0,r.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,r.jsx)(i.Z.Item,{name:"url",children:(0,r.jsx)(c.Z,{required:!0,placeholder:"https://myserver.com/action (required)",onChange:e=>d(e.currentTarget.value.trim()),type:"url",pattern:w.ax})}),(0,r.jsx)(i.Z.Item,{name:"title",children:(0,r.jsx)(c.Z,{value:h,required:!0,placeholder:"Your action title (required)",onChange:e=>p(e.currentTarget.value)})}),(0,r.jsx)(i.Z.Item,{name:"description",children:(0,r.jsx)(c.Z,{value:x,placeholder:"Optional description",onChange:e=>g(e.currentTarget.value)})}),(0,r.jsx)(i.Z.Item,{name:"icon",children:(0,r.jsx)(c.Z,{value:m,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:e=>v(e.currentTarget.value)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Z.Item,{name:"color",style:{marginBottom:"0px"},children:(0,r.jsx)(c.Z,{type:"color",value:f,onChange:e=>j(e.currentTarget.value)})}),"Optional background color of the action button."]}),(0,r.jsx)(i.Z.Item,{name:"openExternally",children:(0,r.jsx)(u.Z,{checked:k,defaultChecked:k,onChange:Z,children:"Open in a new tab instead of within your page."})})]})})},Z=()=>{let e=(0,y.useContext)(j.aC),{serverConfig:t,setFieldInConfigState:n}=e||{},{externalActions:s}=t,[l,i]=(0,y.useState)(null),[c,u]=(0,y.useState)(!1),[x,w]=(0,y.useState)(null),[Z,S]=(0,y.useState)(null),E=()=>{w(null),clearTimeout(null)};async function I(e){await (0,v.Si)({apiPath:v.os,data:{value:e},onSuccess:()=>{n({fieldName:"externalActions",value:e,path:""}),w((0,f.kg)(f.zv,"Updated.")),setTimeout(E,v.sI)},onError:e=>{console.log(e),w((0,f.kg)(f.Un,e)),setTimeout(E,v.sI)}})}async function T(e){let t=[...l],n=l.findIndex(t=>t.url===e.url);t.splice(n,1);try{i(t),I(t)}catch(r){console.error(r)}}async function P(e,t,n,r,a,o,s){try{let c=[...l],u={url:t,title:n,description:r,icon:a,color:o,openExternally:s},d=e?l.findIndex(t=>g().isEqual(t,e)):-1;d>=0?c[d]=u:c.push(u),i(c),await I(c)}catch(h){console.error(h)}}async function _(e){S(e),u(!0)}(0,y.useEffect)(()=>{i(s||[])},[s]);let O=()=>{S(null),u(!0)},U=(e,t,n,r,a,o,s)=>{u(!1),P(e,t,n,r,a,o,s),S(null)},N=()=>{u(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(k,{children:"External Actions"}),(0,r.jsx)(b,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,r.jsxs)(b,{children:["Read more about how to use actions, with examples, at"," ",(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,r.jsx)(p.Z,{rowKey:e=>"".concat(e.title,"-").concat(e.url),columns:[{title:"",key:"delete-edit",render:(e,t)=>(0,r.jsxs)(d.Z,{size:"middle",children:[(0,r.jsx)(h.Z,{onClick:()=>T(t),icon:(0,r.jsx)(a.Z,{})}),(0,r.jsx)(h.Z,{onClick:()=>_(t),icon:(0,r.jsx)(o.Z,{})})]})},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:e=>e?(0,r.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null},{title:"Color",dataIndex:"color",key:"color",render:e=>e?(0,r.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:e=>e?"In a new tab":"In a modal"}],dataSource:l,pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{type:"primary",onClick:O,children:"Create New Action"}),(0,r.jsx)(m.E,{status:x}),(0,r.jsx)(C,{action:Z,open:c,onOk:U,onCancel:N})]})};t.default=Z},41983:function(e,t,n){"use strict";n.d(t,{Jk:function(){return u},Un:function(){return i},dG:function(){return h},kg:function(){return x},zv:function(){return d}});var r=n(85893),a=n(89739),o=n(21640),s=n(50888),l=n(28058);let i="error",c="invalid",u="proessing",d="success",h="warning",p={[d]:{type:d,icon:(0,r.jsx)(a.Z,{style:{color:"green"}}),message:"Success!"},[i]:{type:i,icon:(0,r.jsx)(o.Z,{style:{color:"red"}}),message:"An error occurred."},[c]:{type:c,icon:(0,r.jsx)(o.Z,{style:{color:"red"}}),message:"An error occurred."},[u]:{type:u,icon:(0,r.jsx)(s.Z,{}),message:""},[h]:{type:h,icon:(0,r.jsx)(l.Z,{style:{color:"#fc0"}}),message:""}};function x(e,t){return e&&p[e]?t?{type:e,icon:p[e].icon,message:t}:p[e]:null}},99519:function(e,t,n){"use strict";n.d(t,{aC:function(){return d}});var r=n(85893),a=n(67294),o=n(45697),s=n.n(o),l=n(64777),i=n(90745);let c={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[i.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},u={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},d=a.createContext({...u,serverConfig:c,setFieldInConfigState:e=>null}),h=e=>{let{children:t}=e,[n,o]=(0,a.useState)(u),[s,i]=(0,a.useState)(c),h=async()=>{try{let e=await (0,l.rQ)(l.Q_);o({...e})}catch(t){}},p=async()=>{try{let e=await (0,l.rQ)(l.bl);i(e)}catch(t){}},x=e=>{let{fieldName:t,value:n,path:r}=e,a=r?{...s,[r]:{...s[r],[t]:n}}:{...s,[t]:n};i(a)};(0,a.useEffect)(()=>{let e=null;return h(),e=setInterval(h,l.NE),p(),()=>{clearInterval(e)}},[]);let g={...n,serverConfig:s,setFieldInConfigState:x};return(0,r.jsx)(d.Provider,{value:g,children:t})};h.propTypes={children:s().element.isRequired},t.ZP=h}},function(e){e.O(0,[3662,5596,481,173,1407,4083,6880,3174,1577,6386,3013,3698,2459,8213,9915,715,5402,1908,8119,475,745,9774,2888,179],function(){return e(e.s=54005)}),_N_E=e.O()}]);
//# sourceMappingURL=actions-dce580b3b6d9faf7.js.map