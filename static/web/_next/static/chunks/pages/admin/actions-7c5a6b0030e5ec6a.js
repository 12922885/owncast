(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(1413),o=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},c=t(42135),i=function(e,n){return o.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:a}))};i.displayName="DeleteOutlined";var u=o.forwardRef(i)},54005:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return t(4437)}])},4437:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return I}});var r=t(47568),o=t(29815),a=t(34051),c=t.n(a),i=t(85893),u=t(48689),l=t(84485),s=t(85402),d=t(69677),p=t(32808),h=t(26713),f=t(71577),x=t(10355),v=t(67294),y=t(78464),g=t(25964),j=t(83192),k=t(35159),m=t(19411),w=l.Z.Title,Z=l.Z.Paragraph,C=null;function b(e){var n=e.onOk,t=e.onCancel,r=e.visible,o=(0,v.useState)(""),a=o[0],c=o[1],u=(0,v.useState)(""),l=u[0],h=u[1],f=(0,v.useState)(""),x=f[0],y=f[1],g=(0,v.useState)(""),j=g[0],k=g[1],w=(0,v.useState)(""),Z=w[0],C=w[1],b=(0,v.useState)(!1),I=b[0],S=b[1],_={disabled:!function(){try{if("https:"!==new URL(a).protocol)return!1}catch(e){return!1}return(0,m.Z)(a)&&""!==l}()};return(0,i.jsx)(s.Z,{title:"Create New Action",visible:r,onOk:function(){n(a,l,x,j,Z,I),c(""),h(""),y(""),k(""),C(""),S(!1)},onCancel:t,okButtonProps:_,children:(0,i.jsxs)("div",{children:["Add the URL for the external action you want to present."," ",(0,i.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,i.jsx)("p",{children:(0,i.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,i.jsx)("p",{children:(0,i.jsx)(d.Z,{value:a,required:!0,placeholder:"https://myserver.com/action (required)",onChange:function(e){return c(e.currentTarget.value.trim())},type:"url",pattern:m.a})}),(0,i.jsx)("p",{children:(0,i.jsx)(d.Z,{value:l,required:!0,placeholder:"Your action title (required)",onChange:function(e){return h(e.currentTarget.value)}})}),(0,i.jsx)("p",{children:(0,i.jsx)(d.Z,{value:x,placeholder:"Optional description",onChange:function(e){return y(e.currentTarget.value)}})}),(0,i.jsx)("p",{children:(0,i.jsx)(d.Z,{value:j,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:function(e){return k(e.currentTarget.value)}})}),(0,i.jsxs)("p",{children:[(0,i.jsx)(d.Z,{type:"color",value:Z,onChange:function(e){return C(e.currentTarget.value)}}),"Optional background color of the action button."]}),(0,i.jsx)(p.Z,{checked:I,defaultChecked:I,onChange:function(e){S(e.target.checked)},children:"Open in a new tab instead of within your page."})]})})}function I(){var e=(0,v.useContext)(k.aC)||{},n=e.serverConfig,t=e.setFieldInConfigState,a=n.externalActions,l=(0,v.useState)([]),s=l[0],d=l[1],p=(0,v.useState)(!1),m=p[0],I=p[1],S=(0,v.useState)(null),_=S[0],E=S[1],T=function(){E(null),C=null,clearTimeout(C)};function O(e){return N.apply(this,arguments)}function N(){return(N=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.Si)({apiPath:g.os,data:{value:n},onSuccess:function(){t({fieldName:"externalActions",value:n,path:""}),E((0,j.kg)(j.zv,"Updated.")),C=setTimeout(T,g.sI)},onError:function(e){console.log(e),E((0,j.kg)(j.Un,e)),C=setTimeout(T,g.sI)}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=(0,r.Z)(c().mark((function e(n){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,o.Z)(s),r=s.findIndex((function(e){return e.url===n.url})),t.splice(r,1);try{d(t),O(t)}catch(a){console.error(a)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=(0,r.Z)(c().mark((function e(n,t,r,a,i,u){var l,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=(0,o.Z)(s),p=l.concat({url:n,title:t,description:r,icon:a,color:i,openExternally:u}),d(p),e.next=6,O(p);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,v.useEffect)((function(){d(a||[])}),[a]);var A=[{title:"",key:"delete",render:function(e,n){return(0,i.jsx)(h.Z,{size:"middle",children:(0,i.jsx)(f.Z,{onClick:function(){return function(e){return R.apply(this,arguments)}(n)},icon:(0,i.jsx)(u.Z,{})})})}},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:function(e){return e?(0,i.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null}},{title:"Color",dataIndex:"color",key:"color",render:function(e){return e?(0,i.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null}},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:function(e){return e?"In a new tab":"In a modal"}}];return(0,i.jsxs)("div",{children:[(0,i.jsx)(w,{children:"External Actions"}),(0,i.jsx)(Z,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,i.jsxs)(Z,{children:["Read more about how to use actions, with examples, at"," ",(0,i.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,i.jsx)(x.Z,{rowKey:function(e){return"".concat(e.title,"-").concat(e.url)},columns:A,dataSource:s,pagination:!1}),(0,i.jsx)("br",{}),(0,i.jsx)(f.Z,{type:"primary",onClick:function(){I(!0)},children:"Create New Action"}),(0,i.jsx)(y.Z,{status:_}),(0,i.jsx)(b,{visible:m,onOk:function(e,n,t,r,o,a){I(!1),function(e,n,t,r,o,a){U.apply(this,arguments)}(e,n,t,r,o,a)},onCancel:function(){I(!1)}})]})}}},function(e){e.O(0,[384,355,9774,2888,179],(function(){return n=54005,e(e.s=n);var n}));var n=e.O();_N_E=n}]);