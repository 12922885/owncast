(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{89675:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/federation/followers",function(){return n(50080)}])},50080:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(85893),a=n(67294),s=n(24093),o=n(48213),i=n(71577),c=n(90575),l=n(58091),d=n(88360),u=n(20345),h=n(99519),m=n(64777),g=n(70241);function p(){const[e,t]=(0,a.useState)([]),[n,p]=(0,a.useState)([]),[f,w]=(0,a.useState)([]),[y,v]=(0,a.useState)(0),[k,x]=(0,a.useState)(0),b=(0,a.useContext)(h.aC),{serverConfig:j}=b||{},{federation:S}=j,{isPrivate:C}=S,P=async()=>{try{const e=50,r=k*e,a="".concat(m.HP,"?offset=").concat(r,"&limit=").concat(e),s=await(0,m.rQ)(a,{auth:!0}),{results:o,total:i}=s;(0,g.Qr)(o)?w([]):(v(i),w(o));const c=await(0,m.rQ)(m.E8,{auth:!0});(0,g.Qr)(c)?t([]):t(c);const l=await(0,m.rQ)(m.Y9,{auth:!0});(0,g.Qr)(n)?p([]):p(l)}catch(e){console.log("==== error",e)}};(0,a.useEffect)((()=>{P()}),[]);const T=[{title:"",dataIndex:"image",key:"image",width:90,render:e=>(0,r.jsx)(s.C,{size:40,src:e||"/img/logo.svg"})},{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.name||t.username})},{title:"URL",dataIndex:"link",key:"link",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.link})}];function D(e,t){return(0,r.jsx)(o.Z,{dataSource:e,columns:t,size:"small",rowKey:e=>e.link,pagination:{pageSize:50,hideOnSinglePage:!0,showSizeChanger:!1,total:y},onChange:e=>{const t=e.current;x(t)}})}async function I(e){try{await(0,m.rQ)(m.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!0}}),P()}catch(t){console.error(t)}}async function _(e){try{await(0,m.rQ)(m.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!1}}),P()}catch(t){console.error(t)}}const Z=[...T];Z.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",icon:(0,r.jsx)(d.Z,{}),onClick:()=>{I(e)}}),width:50},{title:"Reject",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(u.Z,{}),onClick:()=>{_(e)}}),width:50}),Z.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{const t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});const E=[...T];E.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",icon:(0,r.jsx)(d.Z,{}),size:"large",onClick:()=>{I(e)}}),width:50}),E.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{const t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Rejected/Blocked",dataIndex:"timestamp",key:"disabled_at",width:200,render:e=>{const t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});const M=[...T];M.push({title:"Added",dataIndex:"timestamp",key:"timestamp",width:200,render:e=>{const t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.Z)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Remove",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(u.Z,{}),onClick:()=>{_(e)}}),width:50});const F=(0,r.jsxs)("span",{children:["Followers ",f.length>0&&"(".concat(f.length,")")]}),O=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following accounts get notified when you go live or send a post."}),D(f,M)," "]}),Q=(0,r.jsxs)("span",{children:["Requests ",e.length>0&&"(".concat(e.length,")")]}),N=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["The following people are requesting to follow your Owncast server on the"," ",(0,r.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",target:"_blank",rel:"noopener noreferrer",children:"Fediverse"})," ","and be alerted to when you go live. Each must be approved."]}),D(e,Z)]}),R=[{label:F,key:"1",children:O},C&&{label:Q,key:"2",children:N},{label:(0,r.jsxs)("span",{children:["Blocked ",n.length>0&&"(".concat(n.length,")")]}),key:"3",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following people were either rejected or blocked by you. You can approve them as a follower."}),(0,r.jsx)("p",{children:D(n,E)})]})}];return(0,r.jsx)("div",{className:"followers-section",children:(0,r.jsx)(c.Z,{defaultActiveKey:"1",items:R})})}},70241:function(e,t,n){"use strict";n.d(t,{AB:function(){return l},Qr:function(){return o},t5:function(){return s},wS:function(){return c}});var r=n(42238),a=n.n(r);function s(e){const t=e.split(":");t[t.length-1]="";let n=t.join(":");return n=n.slice(0,n.length-1),"[::1]"===n||"127.0.0.1"===n?"Localhost":n}function o(e){return!e||0===Object.keys(e).length&&e.constructor===Object}function i(e,t,n){return String(t.repeat(n)+e).slice(-n)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=Number.isFinite(+e)?Math.abs(e):0,n=Math.floor(t/86400),r=n>0?"".concat(n," day").concat(n>1?"s":""," "):"",a=Math.floor(t/3600%24),s=a||n?i("".concat(a,":"),"0",3):"",o=Math.floor(t/60%60),c=i("".concat(o,":"),"0",3),l=Math.floor(t%60),d=i("".concat(l),"0",2);return r+s+c+d}function l(e){const t=a()(e),{device:n,os:r,browser:s}=t,{major:o,name:i}=s,{version:c,name:l}=r,{model:d,type:u}=n;if("libmpv"===e)return"mpv media player";if(!i||!o||!l)return e;const h=d||u?" (".concat(d||u,")"):"";return"".concat(i," ").concat(o," on ").concat(l," ").concat(c,"\n  ").concat(h)}},99519:function(e,t,n){"use strict";n.d(t,{aC:function(){return d}});var r=n(85893),a=n(67294),s=n(45697),o=n.n(s),i=n(64777);const c={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[n(90745).gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},l={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},d=a.createContext({...l,serverConfig:c,setFieldInConfigState:e=>null}),u=e=>{let{children:t}=e;const[n,s]=(0,a.useState)(l),[o,u]=(0,a.useState)(c),h=async()=>{try{const e=await(0,i.rQ)(i.Q_);s({...e})}catch(e){}};(0,a.useEffect)((()=>{let e=null;return h(),e=setInterval(h,i.NE),(async()=>{try{const e=await(0,i.rQ)(i.bl);u(e)}catch(e){}})(),()=>{clearInterval(e)}}),[]);const m={...n,serverConfig:o,setFieldInConfigState:e=>{let{fieldName:t,value:n,path:r}=e;const a=r?{...o,[r]:{...o[r],[t]:n}}:{...o,[t]:n};u(a)}};return(0,r.jsx)(d.Provider,{value:m,children:t})};u.propTypes={children:o().element.isRequired},t.ZP=u}},function(e){e.O(0,[5596,481,173,1407,4083,3174,1577,6386,3013,3698,2459,8213,9915,575,1834,8067,4766,745,9774,2888,179],(function(){return t=89675,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=followers-beb47dadc7a3d783.js.map