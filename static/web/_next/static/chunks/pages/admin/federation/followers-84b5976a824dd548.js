(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{24093:function(e,t,n){"use strict";n.d(t,{C:function(){return S}});var r=n(87462),a=n(4942),c=n(71002),i=n(97685),s=n(94184),o=n.n(s),l=n(48555),u=n(42550),d=n(67294),f=n(53124),p=n(25378),m=n(24308),h=d.createContext("default"),v=function(e){var t=e.children,n=e.size;return d.createElement(h.Consumer,null,(function(e){return d.createElement(h.Provider,{value:n||e},t)}))},g=h,x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},y=function(e,t){var n,s,h=d.useContext(g),v=d.useState(1),y=(0,i.Z)(v,2),w=y[0],k=y[1],Z=d.useState(!1),j=(0,i.Z)(Z,2),b=j[0],E=j[1],C=d.useState(!0),S=(0,i.Z)(C,2),O=S[0],P=S[1],z=d.useRef(),T=d.useRef(),N=(0,u.sQ)(t,z),_=d.useContext(f.E_).getPrefixCls,D=function(){if(T.current&&z.current){var t=T.current.offsetWidth,n=z.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,a=void 0===r?4:r;2*a<n&&k(n-2*a<t?(n-2*a)/t:1)}}};d.useEffect((function(){E(!0)}),[]),d.useEffect((function(){P(!0),k(1)}),[e.src]),d.useEffect((function(){D()}),[e.gap]);var I,R=e.prefixCls,A=e.shape,Q=e.size,F=e.src,M=e.srcSet,q=e.icon,H=e.className,B=e.alt,U=e.draggable,W=e.children,X=e.crossOrigin,K=x(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),Y="default"===Q?h:Q,G=Object.keys("object"===(0,c.Z)(Y)&&Y||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),L=(0,p.Z)(G),V=d.useMemo((function(){if("object"!==(0,c.Z)(Y))return{};var e=m.c4.find((function(e){return L[e]})),t=Y[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:q?t/2:18}:{}}),[L,Y]),J=_("avatar",R),$=o()((n={},(0,a.Z)(n,"".concat(J,"-lg"),"large"===Y),(0,a.Z)(n,"".concat(J,"-sm"),"small"===Y),n)),ee=d.isValidElement(F),te=o()(J,$,(s={},(0,a.Z)(s,"".concat(J,"-").concat(A),!!A),(0,a.Z)(s,"".concat(J,"-image"),ee||F&&O),(0,a.Z)(s,"".concat(J,"-icon"),!!q),s),H),ne="number"===typeof Y?{width:Y,height:Y,lineHeight:"".concat(Y,"px"),fontSize:q?Y/2:18}:{};if("string"===typeof F&&O)I=d.createElement("img",{src:F,draggable:U,srcSet:M,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&P(!1)},alt:B,crossOrigin:X});else if(ee)I=F;else if(q)I=q;else if(b||1!==w){var re="scale(".concat(w,") translateX(-50%)"),ae={msTransform:re,WebkitTransform:re,transform:re},ce="number"===typeof Y?{lineHeight:"".concat(Y,"px")}:{};I=d.createElement(l.default,{onResize:D},d.createElement("span",{className:"".concat(J,"-string"),ref:function(e){T.current=e},style:(0,r.Z)((0,r.Z)({},ce),ae)},W))}else I=d.createElement("span",{className:"".concat(J,"-string"),style:{opacity:0},ref:function(e){T.current=e}},W);return delete K.onError,delete K.gap,d.createElement("span",(0,r.Z)({},K,{style:(0,r.Z)((0,r.Z)((0,r.Z)({},ne),V),K.style),className:te,ref:N}),I)},w=d.forwardRef(y);w.defaultProps={shape:"circle",size:"default"};var k=w,Z=n(50344),j=n(55241),b=n(96159),E=function(e){var t=d.useContext(f.E_),n=t.getPrefixCls,r=t.direction,c=e.prefixCls,i=e.className,s=void 0===i?"":i,l=e.maxCount,u=e.maxStyle,p=e.size,m=n("avatar-group",c),h=o()(m,(0,a.Z)({},"".concat(m,"-rtl"),"rtl"===r),s),g=e.children,x=e.maxPopoverPlacement,y=void 0===x?"top":x,w=e.maxPopoverTrigger,E=void 0===w?"hover":w,C=(0,Z.Z)(g).map((function(e,t){return(0,b.Tm)(e,{key:"avatar-key-".concat(t)})})),S=C.length;if(l&&l<S){var O=C.slice(0,l),P=C.slice(l,S);return O.push(d.createElement(j.Z,{key:"avatar-popover-key",content:P,trigger:E,placement:y,overlayClassName:"".concat(m,"-popover")},d.createElement(k,{style:u},"+".concat(S-l)))),d.createElement(v,{size:p},d.createElement("div",{className:h,style:e.style},O))}return d.createElement(v,{size:p},d.createElement("div",{className:h,style:e.style},C))},C=k;C.Group=E;var S=C},89675:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/federation/followers",function(){return n(72301)}])},72301:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(47568),a=n(29815),c=n(34051),i=n.n(c),s=n(85893),o=n(67294),l=n(87961),u=n(10355),d=n(24093),f=n(71577),p=n(58091),m=n(1413),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},v=n(42135),g=function(e,t){return o.createElement(v.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:h}))};g.displayName="UserAddOutlined";var x=o.forwardRef(g),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},w=function(e,t){return o.createElement(v.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:y}))};w.displayName="UserDeleteOutlined";var k=o.forwardRef(w),Z=n(35159),j=n(58827),b=n(2766),E=l.Z.TabPane;function C(){var e=function(e,t){return(0,s.jsx)(u.Z,{dataSource:e,columns:t,size:"small",rowKey:function(e){return e.link},pagination:{pageSize:50,hideOnSinglePage:!0,showSizeChanger:!1,total:S},onChange:function(e){var t=e.current;T(t)}})},t=(0,o.useState)([]),n=t[0],c=t[1],m=(0,o.useState)([]),h=m[0],v=m[1],g=(0,o.useState)([]),y=g[0],w=g[1],C=(0,o.useState)(0),S=C[0],O=C[1],P=(0,o.useState)(0),z=P[0],T=P[1],N=((0,o.useContext)(Z.aC)||{}).serverConfig.federation.isPrivate,_=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a,s,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,50,t=50*z,n="".concat(j.HP,"?offset=").concat(t,"&limit=").concat(50),e.next=6,(0,j.rQ)(n,{auth:!0});case 6:return r=e.sent,a=r.results,s=r.total,(0,b.Qr)(a)?w([]):(O(s),w(a)),e.next=11,(0,j.rQ)(j.E8,{auth:!0});case 11:return o=e.sent,(0,b.Qr)(o)?c([]):c(o),e.next=15,(0,j.rQ)(j.Y9,{auth:!0});case 15:l=e.sent,(0,b.Qr)(h)?v([]):v(l),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("==== error",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){_()}),[]);var D=[{title:"",dataIndex:"image",key:"image",width:90,render:function(e){return(0,s.jsx)(d.C,{size:40,src:e||"/img/logo.svg"})}},{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return(0,s.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.name||t.username})}},{title:"URL",dataIndex:"link",key:"link",render:function(e,t){return(0,s.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.link})}}];function I(e){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.rQ)(j.kb,{auth:!0,method:"POST",data:{actorIRI:t.link,approved:!0}});case 3:_(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function A(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,j.rQ)(j.kb,{auth:!0,method:"POST",data:{actorIRI:t.link,approved:!1}});case 3:_(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var F=(0,a.Z)(D);F.unshift({title:"Approve",dataIndex:null,key:null,render:function(e){return(0,s.jsx)(f.Z,{type:"primary",icon:(0,s.jsx)(x,{}),onClick:function(){I(e)}})},width:50},{title:"Reject",dataIndex:null,key:null,render:function(e){return(0,s.jsx)(f.Z,{type:"primary",danger:!0,icon:(0,s.jsx)(k,{}),onClick:function(){A(e)}})},width:50}),F.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:function(e){var t=new Date(e);return(0,s.jsx)(s.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"});var M=(0,a.Z)(D);M.unshift({title:"Approve",dataIndex:null,key:null,render:function(e){return(0,s.jsx)(f.Z,{type:"primary",icon:(0,s.jsx)(x,{}),size:"large",onClick:function(){I(e)}})},width:50}),M.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:function(e){var t=new Date(e);return(0,s.jsx)(s.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Rejected/Blocked",dataIndex:"timestamp",key:"disabled_at",width:200,render:function(e){var t=new Date(e);return(0,s.jsx)(s.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"});var q=(0,a.Z)(D);q.push({title:"Added",dataIndex:"timestamp",key:"timestamp",width:200,render:function(e){var t=new Date(e);return(0,s.jsx)(s.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Remove",dataIndex:null,key:null,render:function(e){return(0,s.jsx)(f.Z,{type:"primary",danger:!0,icon:(0,s.jsx)(k,{}),onClick:function(){A(e)}})},width:50});var H=N&&(0,s.jsxs)(E,{tab:(0,s.jsxs)("span",{children:["Requests ",n.length>0&&"(".concat(n.length,")")]}),children:[(0,s.jsxs)("p",{children:["The following people are requesting to follow your Owncast server on the"," ",(0,s.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",target:"_blank",rel:"noopener noreferrer",children:"Fediverse"})," ","and be alerted to when you go live. Each must be approved."]}),e(n,F)]},"2");return(0,s.jsx)("div",{className:"followers-section",children:(0,s.jsxs)(l.Z,{defaultActiveKey:"1",children:[(0,s.jsxs)(E,{tab:(0,s.jsxs)("span",{children:["Followers ",y.length>0&&"(".concat(y.length,")")]}),children:[(0,s.jsx)("p",{children:"The following accounts get notified when you go live or send a post."}),e(y,q)," "]},"1"),H,(0,s.jsxs)(E,{tab:(0,s.jsxs)("span",{children:["Blocked ",h.length>0&&"(".concat(h.length,")")]}),children:[(0,s.jsx)("p",{children:"The following people were either rejected or blocked by you. You can approve them as a follower."}),(0,s.jsx)("p",{children:e(h,M)})]},"3")]})})}}},function(e){e.O(0,[384,355,8091,9774,2888,179],(function(){return t=89675,e(e.s=t);var t}));var t=e.O();_N_E=t}]);