(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{24093:function(e,t,n){"use strict";n.d(t,{C:function(){return C}});var r=n(87462),a=n(4942),c=n(71002),i=n(97685),o=n(94184),s=n.n(o),l=n(48555),u=n(42550),d=n(67294),f=n(53124),p=n(25378),m=n(24308),h=d.createContext("default"),v=function(e){var t=e.children,n=e.size;return d.createElement(h.Consumer,null,(function(e){return d.createElement(h.Provider,{value:n||e},t)}))},g=h,x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},y=function(e,t){var n,o,h=d.useContext(g),v=d.useState(1),y=(0,i.Z)(v,2),w=y[0],Z=y[1],k=d.useState(!1),b=(0,i.Z)(k,2),j=b[0],S=b[1],E=d.useState(!0),C=(0,i.Z)(E,2),O=C[0],P=C[1],z=d.useRef(),T=d.useRef(),I=(0,u.sQ)(t,z),A=d.useContext(f.E_).getPrefixCls,N=function(){if(T.current&&z.current){var t=T.current.offsetWidth,n=z.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,a=void 0===r?4:r;2*a<n&&Z(n-2*a<t?(n-2*a)/t:1)}}};d.useEffect((function(){S(!0)}),[]),d.useEffect((function(){P(!0),Z(1)}),[e.src]),d.useEffect((function(){N()}),[e.gap]);var _,D=e.prefixCls,R=e.shape,Q=e.size,M=e.src,F=e.srcSet,q=e.icon,H=e.className,B=e.alt,U=e.draggable,W=e.children,X=e.crossOrigin,K=x(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),Y="default"===Q?h:Q,G=Object.keys("object"===(0,c.Z)(Y)&&Y||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),L=(0,p.Z)(G),V=d.useMemo((function(){if("object"!==(0,c.Z)(Y))return{};var e=m.c4.find((function(e){return L[e]})),t=Y[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:q?t/2:18}:{}}),[L,Y]),$=A("avatar",D),J=s()((n={},(0,a.Z)(n,"".concat($,"-lg"),"large"===Y),(0,a.Z)(n,"".concat($,"-sm"),"small"===Y),n)),ee=d.isValidElement(M),te=s()($,J,(o={},(0,a.Z)(o,"".concat($,"-").concat(R),!!R),(0,a.Z)(o,"".concat($,"-image"),ee||M&&O),(0,a.Z)(o,"".concat($,"-icon"),!!q),o),H),ne="number"===typeof Y?{width:Y,height:Y,lineHeight:"".concat(Y,"px"),fontSize:q?Y/2:18}:{};if("string"===typeof M&&O)_=d.createElement("img",{src:M,draggable:U,srcSet:F,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&P(!1)},alt:B,crossOrigin:X});else if(ee)_=M;else if(q)_=q;else if(j||1!==w){var re="scale(".concat(w,") translateX(-50%)"),ae={msTransform:re,WebkitTransform:re,transform:re},ce="number"===typeof Y?{lineHeight:"".concat(Y,"px")}:{};_=d.createElement(l.default,{onResize:N},d.createElement("span",{className:"".concat($,"-string"),ref:function(e){T.current=e},style:(0,r.Z)((0,r.Z)({},ce),ae)},W))}else _=d.createElement("span",{className:"".concat($,"-string"),style:{opacity:0},ref:function(e){T.current=e}},W);return delete K.onError,delete K.gap,d.createElement("span",(0,r.Z)({},K,{style:(0,r.Z)((0,r.Z)((0,r.Z)({},ne),V),K.style),className:te,ref:I}),_)},w=d.forwardRef(y);w.defaultProps={shape:"circle",size:"default"};var Z=w,k=n(50344),b=n(55241),j=n(96159),S=function(e){var t=d.useContext(f.E_),n=t.getPrefixCls,r=t.direction,c=e.prefixCls,i=e.className,o=void 0===i?"":i,l=e.maxCount,u=e.maxStyle,p=e.size,m=n("avatar-group",c),h=s()(m,(0,a.Z)({},"".concat(m,"-rtl"),"rtl"===r),o),g=e.children,x=e.maxPopoverPlacement,y=void 0===x?"top":x,w=e.maxPopoverTrigger,S=void 0===w?"hover":w,E=(0,k.Z)(g).map((function(e,t){return(0,j.Tm)(e,{key:"avatar-key-".concat(t)})})),C=E.length;if(l&&l<C){var O=E.slice(0,l),P=E.slice(l,C);return O.push(d.createElement(b.Z,{key:"avatar-popover-key",content:P,trigger:S,placement:y,overlayClassName:"".concat(m,"-popover")},d.createElement(Z,{style:u},"+".concat(C-l)))),d.createElement(v,{size:p},d.createElement("div",{className:h,style:e.style},O))}return d.createElement(v,{size:p},d.createElement("div",{className:h,style:e.style},E))},E=Z;E.Group=S;var C=E},89675:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/federation/followers",function(){return n(72301)}])},72301:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(47568),a=n(29815),c=n(34051),i=n.n(c),o=n(85893),s=n(67294),l=n(2944),u=n(10355),d=n(24093),f=n(71577),p=n(58091),m=n(1413),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},v=n(42135),g=function(e,t){return s.createElement(v.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:h}))};g.displayName="UserAddOutlined";var x=s.forwardRef(g),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},w=function(e,t){return s.createElement(v.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:y}))};w.displayName="UserDeleteOutlined";var Z=s.forwardRef(w),k=n(35159),b=n(58827),j=n(2766),S=l.Z.TabPane;function E(){var e=function(e,t){return(0,o.jsx)(u.Z,{dataSource:e,columns:t,size:"small",rowKey:function(e){return e.link},pagination:{pageSize:50,hideOnSinglePage:!0,showSizeChanger:!1,total:C},onChange:function(e){var t=e.current;T(t)}})},t=(0,s.useState)([]),n=t[0],c=t[1],m=(0,s.useState)([]),h=m[0],v=m[1],g=(0,s.useState)([]),y=g[0],w=g[1],E=(0,s.useState)(0),C=E[0],O=E[1],P=(0,s.useState)(0),z=P[0],T=P[1],I=((0,s.useContext)(k.aC)||{}).serverConfig.federation.isPrivate,A=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,r,a,o,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,50,t=50*z,n="".concat(b.HP,"?offset=").concat(t,"&limit=").concat(50),e.next=6,(0,b.rQ)(n,{auth:!0});case 6:return r=e.sent,a=r.results,o=r.total,(0,j.Qr)(a)?w([]):(O(o),w(a)),e.next=11,(0,b.rQ)(b.E8,{auth:!0});case 11:return s=e.sent,(0,j.Qr)(s)?c([]):c(s),e.next=15,(0,b.rQ)(b.Y9,{auth:!0});case 15:l=e.sent,(0,j.Qr)(h)?v([]):v(l),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("==== error",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){A()}),[]);var N=[{title:"",dataIndex:"image",key:"image",width:90,render:function(e){return(0,o.jsx)(d.C,{size:40,src:e||"/img/logo.svg"})}},{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return(0,o.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.name||t.username})}},{title:"URL",dataIndex:"link",key:"link",render:function(e,t){return(0,o.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.link})}}];function _(e){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.rQ)(b.kb,{auth:!0,method:"POST",data:{actorIRI:t.link,approved:!0}});case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function R(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.rQ)(b.kb,{auth:!0,method:"POST",data:{actorIRI:t.link,approved:!1}});case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var M=(0,a.Z)(N);M.unshift({title:"Approve",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(f.Z,{type:"primary",icon:(0,o.jsx)(x,{}),onClick:function(){_(e)}})},width:50},{title:"Reject",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(f.Z,{type:"primary",danger:!0,icon:(0,o.jsx)(Z,{}),onClick:function(){R(e)}})},width:50}),M.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"});var F=(0,a.Z)(N);F.unshift({title:"Approve",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(f.Z,{type:"primary",icon:(0,o.jsx)(x,{}),size:"large",onClick:function(){_(e)}})},width:50}),F.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Rejected/Blocked",dataIndex:"timestamp",key:"disabled_at",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"});var q=(0,a.Z)(N);q.push({title:"Added",dataIndex:"timestamp",key:"timestamp",width:200,render:function(e){var t=new Date(e);return(0,o.jsx)(o.Fragment,{children:(0,p.Z)(t,"P")})},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Remove",dataIndex:null,key:null,render:function(e){return(0,o.jsx)(f.Z,{type:"primary",danger:!0,icon:(0,o.jsx)(Z,{}),onClick:function(){R(e)}})},width:50});var H=I&&(0,o.jsxs)(S,{tab:(0,o.jsxs)("span",{children:["Requests ",n.length>0&&"(".concat(n.length,")")]}),children:[(0,o.jsxs)("p",{children:["The following people are requesting to follow your Owncast server on the"," ",(0,o.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",target:"_blank",rel:"noopener noreferrer",children:"Fediverse"})," ","and be alerted to when you go live. Each must be approved."]}),e(n,M)]},"2");return(0,o.jsx)("div",{className:"followers-section",children:(0,o.jsxs)(l.Z,{defaultActiveKey:"1",children:[(0,o.jsxs)(S,{tab:(0,o.jsxs)("span",{children:["Followers ",y.length>0&&"(".concat(y.length,")")]}),children:[(0,o.jsx)("p",{children:"The following accounts get notified when you go live or send a post."}),e(y,q)," "]},"1"),H,(0,o.jsxs)(S,{tab:(0,o.jsxs)("span",{children:["Blocked ",h.length>0&&"(".concat(h.length,")")]}),children:[(0,o.jsx)("p",{children:"The following people were either rejected or blocked by you. You can approve them as a follower."}),(0,o.jsx)("p",{children:e(h,F)})]},"3")]})})}},20943:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},13375:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},29815:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(20943);var a=n(13375);var c=n(91566);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,c.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91566:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(20943);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[7330,7266,355,8091,2944,9774,2888,179],(function(){return t=89675,e(e.s=t);var t}));var t=e.O();_N_E=t}]);