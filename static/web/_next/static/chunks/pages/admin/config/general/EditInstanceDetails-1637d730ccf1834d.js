(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3353],{84202:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config/general/EditInstanceDetails",function(){return t(67650)}])},10135:function(e,n,t){"use strict";t.d(n,{$7:function(){return p},Kx:function(){return f},Sk:function(){return h},xA:function(){return g}});var a=t(85893),s=t(71577),r=t(94184),i=t.n(r),l=t(67294),o=t(90745),c=t(41983),u=t(99519),d=t(39664),m=t(52018);let f="default",h="textarea",g="url",p=e=>{let{apiPath:n,configPath:t="",initialValue:r,useTrim:f,useTrimLead:h,...g}=e,[p,v]=(0,l.useState)(null),[x,b]=(0,l.useState)(!1),j=(0,l.useContext)(u.aC),{setFieldInConfigState:y}=j||{},w=null,{fieldName:N,required:k,tip:C,status:S,value:T,onChange:E,onSubmit:P}=g,U=()=>{v(null),b(!1),clearTimeout(w),w=null};(0,l.useEffect)(()=>{k&&(""===T||null===T)||T===r?b(!1):(U(),b(!0))},[T]);let Z=e=>{let{fieldName:n,value:t}=e;if(E){let a=t;f?a=t.trim():h&&(a=t.replace(/^\s+/g,"")),E({fieldName:n,value:a})}},M=e=>{let{value:n}=e;E&&k&&""===n&&E({fieldName:N,value:r})},_=async()=>{(k&&""!==T||T!==r)&&(v((0,c.kg)(c.Jk)),await (0,o.Si)({apiPath:n,data:{value:T},onSuccess:()=>{y({fieldName:N,value:T,path:t}),v((0,c.kg)(c.zv))},onError:e=>{v((0,c.kg)(c.Un,"There was an error: ".concat(e)))}}),w=setTimeout(U,o.sI),P&&P())},V=i()({"textfield-with-submit-container":!0,submittable:x});return(0,a.jsxs)("div",{className:V,children:[(0,a.jsx)("div",{className:"textfield-component",children:(0,a.jsx)(m.nv,{...g,onSubmit:null,onBlur:M,onChange:Z})}),(0,a.jsxs)("div",{className:"formfield-container lower-container",children:[(0,a.jsx)("p",{className:"label-spacer"}),(0,a.jsxs)("div",{className:"lower-content",children:[(0,a.jsx)("div",{className:"field-tip",children:C}),(0,a.jsx)(d.E,{status:S||p}),(0,a.jsx)("div",{className:"update-button-container",children:(0,a.jsx)(s.Z,{type:"primary",size:"small",className:"submit-button",onClick:_,disabled:!x,children:"Update"})})]})]})]})};p.defaultProps={configPath:"",initialValue:""}},73706:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var a=t(85893),s=t(67294),r=t(94594),i=t(41983),l=t(39664),o=t(90745),c=t(99519);let u=e=>{let{apiPath:n,checked:t,reversed:u=!1,configPath:d="",disabled:m=!1,fieldName:f,label:h,tip:g,useSubmit:p,onChange:v}=e,[x,b]=(0,s.useState)(null),j=null,y=(0,s.useContext)(c.aC),{setFieldInConfigState:w}=y||{},N=()=>{b(null),clearTimeout(j),j=null},k=async e=>{if(p){b((0,i.kg)(i.Jk));let t=u?!e:e;await (0,o.Si)({apiPath:n,data:{value:t},onSuccess:()=>{w({fieldName:f,value:t,path:d}),b((0,i.kg)(i.zv))},onError:e=>{b((0,i.kg)(i.Un,"There was an error: ".concat(e)))}}),j=setTimeout(N,o.sI)}v&&v(e)},C=null!==x&&x.type===i.Jk;return(0,a.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[h&&(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:h})}),(0,a.jsxs)("div",{className:"input-side",children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)(r.Z,{className:"switch field-".concat(f),loading:C,onChange:k,defaultChecked:t,checked:t,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:m}),(0,a.jsx)(l.E,{status:x})]}),(0,a.jsx)("p",{className:"field-tip",children:g})]})]})};u.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},67650:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var a=t(85893),s=t(67294),r=t(84485),i=t(10135),l=t(99519),o=t(90745),c=t(73706),u=t(77916),d=t(71577),m=t(50888),f=t(88484),h=t(39664),g=t(41983),p=t(64777),v=t(60956);let x=()=>{var e;let[n,t]=(0,s.useState)(null),[r,i]=(0,s.useState)(!1),[c,x]=(0,s.useState)(0),b=(0,s.useContext)(l.aC),{setFieldInConfigState:j,serverConfig:y}=b||{},w=null==y?void 0:null===(e=y.instanceDetails)||void 0===e?void 0:e.logo,[N,k]=(0,s.useState)(null),C=null,{apiPath:S,tip:T}=o.ZQ,E=()=>{k(null),clearTimeout(C),C=null},P=e=>(i(!0),new Promise((n,a)=>{if(e.size>v.Z7){let s="File size is too big: ".concat((0,v.kR)(e.size));return k((0,g.kg)(g.Un,"There was an error: ".concat(s))),C=setTimeout(E,o.sI),i(!1),a()}if(!v.dr.includes(e.type)){let r="File type is not supported: ".concat(e.type);return k((0,g.kg)(g.Un,"There was an error: ".concat(r))),C=setTimeout(E,o.sI),i(!1),a()}(0,v.y3)(e,e=>{t(e),setTimeout(()=>n(),100)})})),U=async()=>{n!==w&&(k((0,g.kg)(g.Jk)),await (0,o.Si)({apiPath:S,data:{value:n},onSuccess:()=>{j({fieldName:"logo",value:n,path:""}),k((0,g.kg)(g.zv)),i(!1),x(Math.floor(100*Math.random()))},onError:e=>{k((0,g.kg)(g.Un,"There was an error: ".concat(e))),i(!1)}}),C=setTimeout(E,o.sI))},Z="".concat(p.WB,"logo?random=").concat(c);return(0,a.jsxs)("div",{className:"formfield-container logo-upload-container",children:[(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:"Logo"})}),(0,a.jsxs)("div",{className:"input-side",children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("img",{src:Z,alt:"avatar",className:"logo-preview"}),(0,a.jsx)(u.Z,{name:"logo",listType:"picture",className:"avatar-uploader",showUploadList:!1,accept:v.dr.join(","),beforeUpload:P,customRequest:U,disabled:r,children:r?(0,a.jsx)(m.Z,{style:{color:"white"}}):(0,a.jsx)(d.Z,{icon:(0,a.jsx)(f.Z,{})})})]}),(0,a.jsx)(h.E,{status:N}),(0,a.jsx)("p",{className:"field-tip",children:T})]})]})},{Title:b}=r.Z;function j(){let[e,n]=(0,s.useState)(null),t=(0,s.useContext)(l.aC),{serverConfig:r}=t||{},{instanceDetails:u,yp:d}=r,{instanceUrl:m}=d;if((0,s.useEffect)(()=>{n({...u,...d})},[u,d]),!e)return null;let f=()=>{""===e.instanceUrl&&!0===d.enabled&&(0,o.Si)({apiPath:o.AP,data:{value:!1}})},h=t=>{let{fieldName:a,value:s}=t;n({...e,[a]:s})},g=""!==m;return(0,a.jsxs)("div",{className:"edit-general-settings",children:[(0,a.jsx)(b,{level:3,className:"section-title",children:"Configure Instance Details"}),(0,a.jsx)("br",{}),(0,a.jsx)(i.$7,{fieldName:"name",...o.RE,value:e.name,initialValue:u.name,onChange:h}),(0,a.jsx)(i.$7,{fieldName:"instanceUrl",...o.cj,value:e.instanceUrl,initialValue:d.instanceUrl,type:i.xA,onChange:h,onSubmit:f}),(0,a.jsx)(i.$7,{fieldName:"summary",...o.rs,type:i.Sk,value:e.summary,initialValue:u.summary,onChange:h}),(0,a.jsx)(i.$7,{fieldName:"offlineMessage",...o.rd,type:i.Sk,value:e.offlineMessage,initialValue:u.offlineMessage,onChange:h}),(0,a.jsx)(x,{}),(0,a.jsx)(c.Z,{fieldName:"hideViewerCount",useSubmit:!0,...o._X,checked:e.hideViewerCount,onChange:function(e){h({fieldName:"hideViewerCount",value:e})}}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{className:"description",children:["Increase your audience by appearing in the"," ",(0,a.jsx)("a",{href:"https://directory.owncast.online",target:"_blank",rel:"noreferrer",children:(0,a.jsx)("strong",{children:"Owncast Directory"})}),". This is an external service run by the Owncast project."," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/directory/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more"}),"."]}),!d.instanceUrl&&(0,a.jsxs)("p",{className:"description",children:["You must set your ",(0,a.jsx)("strong",{children:"Server URL"})," above to enable the directory."]}),(0,a.jsxs)("div",{className:"config-yp-container",children:[(0,a.jsx)(c.Z,{fieldName:"enabled",useSubmit:!0,...o.P,checked:e.enabled,disabled:!g}),(0,a.jsx)(c.Z,{fieldName:"nsfw",useSubmit:!0,...o.EY,checked:e.nsfw,disabled:!g})]})]})}},60956:function(e,n,t){"use strict";t.d(n,{Z7:function(){return a},dr:function(){return s},kR:function(){return i},y3:function(){return r}});let a=2097152,s=["image/png","image/jpeg","image/gif"];function r(e,n){let t=new FileReader;t.addEventListener("load",()=>n(t.result)),t.readAsDataURL(e)}function i(e){let n=Math.floor(Math.log(e)/Math.log(1024)),t=1*Number((e/Math.pow(1024,n)).toFixed(2));return"".concat(t," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n])}},41983:function(e,n,t){"use strict";t.d(n,{Jk:function(){return u},Un:function(){return o},dG:function(){return m},kg:function(){return h},zv:function(){return d}});var a=t(85893),s=t(89739),r=t(21640),i=t(50888),l=t(28058);let o="error",c="invalid",u="proessing",d="success",m="warning",f={[d]:{type:d,icon:(0,a.jsx)(s.Z,{style:{color:"green"}}),message:"Success!"},[o]:{type:o,icon:(0,a.jsx)(r.Z,{style:{color:"red"}}),message:"An error occurred."},[c]:{type:c,icon:(0,a.jsx)(r.Z,{style:{color:"red"}}),message:"An error occurred."},[u]:{type:u,icon:(0,a.jsx)(i.Z,{}),message:""},[m]:{type:m,icon:(0,a.jsx)(l.Z,{style:{color:"#fc0"}}),message:""}};function h(e,n){return e&&f[e]?n?{type:e,icon:f[e].icon,message:n}:f[e]:null}},99519:function(e,n,t){"use strict";t.d(n,{aC:function(){return d}});var a=t(85893),s=t(67294),r=t(45697),i=t.n(r),l=t(64777),o=t(90745);let c={streamKeys:[],adminPassword:"",instanceDetails:{customStyles:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",servingEndpoint:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[o.gX]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""},twitter:{enabled:!1,goLiveMessage:"",apiKey:"",apiSecret:"",accessToken:"",accessTokenSecret:"",bearerToken:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1},u={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0}},d=s.createContext({...u,serverConfig:c,setFieldInConfigState:e=>null}),m=e=>{let{children:n}=e,[t,r]=(0,s.useState)(u),[i,o]=(0,s.useState)(c),m=async()=>{try{let e=await (0,l.rQ)(l.Q_);r({...e})}catch(n){}},f=async()=>{try{let e=await (0,l.rQ)(l.bl);o(e)}catch(n){}},h=e=>{let{fieldName:n,value:t,path:a}=e,s=a?{...i,[a]:{...i[a],[n]:t}}:{...i,[n]:t};o(s)};(0,s.useEffect)(()=>{let e=null;return m(),e=setInterval(m,l.NE),f(),()=>{clearInterval(e)}},[]);let g={...t,serverConfig:i,setFieldInConfigState:h};return(0,a.jsx)(d.Provider,{value:g,children:n})};m.propTypes={children:i().element.isRequired},n.ZP=m}},function(e){e.O(0,[481,5596,1407,173,611,1577,3763,4485,5212,7033,7910,7916,457,745,9774,2888,179],function(){return e(e.s=84202)}),_N_E=e.O()}]);
//# sourceMappingURL=EditInstanceDetails-1637d730ccf1834d.js.map