(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7757],{54907:function(e,n,t){"use strict";t.d(n,{Z:function(){return S}});var a=t(87462),r=t(4942),i=t(18073),l=t(94184),c=t.n(l),s=t(74902),o=t(15671),d=t(43144),u=t(60136),p=t(33643),f=t(71002),h=t(67294),v=t(96774),m=t.n(v),C=t(50344),y=t(62874),x=t(97685),g=h.forwardRef(function(e,n){var t,a=e.prefixCls,i=e.forceRender,l=e.className,s=e.style,o=e.children,d=e.isActive,u=e.role,p=h.useState(d||i),f=(0,x.Z)(p,2),v=f[0],m=f[1];return(h.useEffect(function(){(i||d)&&m(!0)},[i,d]),v)?h.createElement("div",{ref:n,className:c()("".concat(a,"-content"),(t={},(0,r.Z)(t,"".concat(a,"-content-active"),d),(0,r.Z)(t,"".concat(a,"-content-inactive"),!d),t),l),style:s,role:u},h.createElement("div",{className:"".concat(a,"-content-box")},o)):null});g.displayName="PanelContent";var b=function(e){(0,u.Z)(t,e);var n=(0,p.Z)(t);function t(){var e;(0,o.Z)(this,t);for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).onItemClick=function(){var n=e.props,t=n.onItemClick,a=n.panelKey;"function"==typeof t&&t(a)},e.handleKeyPress=function(n){("Enter"===n.key||13===n.keyCode||13===n.which)&&e.onItemClick()},e.renderIcon=function(){var n=e.props,t=n.showArrow,a=n.expandIcon,r=n.prefixCls,i=n.collapsible;if(!t)return null;var l="function"==typeof a?a(e.props):h.createElement("i",{className:"arrow"});return l&&h.createElement("div",{className:"".concat(r,"-expand-icon"),onClick:"header"===i?e.onItemClick:null},l)},e.renderTitle=function(){var n=e.props,t=n.header,a=n.prefixCls,r=n.collapsible;return h.createElement("span",{className:"".concat(a,"-header-text"),onClick:"header"===r?e.onItemClick:null},t)},e}return(0,d.Z)(t,[{key:"shouldComponentUpdate",value:function(e){return!m()(this.props,e)}},{key:"render",value:function(){var e,n,t=this.props,i=t.className,l=t.id,s=t.style,o=t.prefixCls,d=t.headerClass,u=t.children,p=t.isActive,f=t.destroyInactivePanel,v=t.accordion,m=t.forceRender,C=t.openMotion,x=t.extra,b=t.collapsible,N="disabled"===b,k="header"===b,Z=c()((e={},(0,r.Z)(e,"".concat(o,"-item"),!0),(0,r.Z)(e,"".concat(o,"-item-active"),p),(0,r.Z)(e,"".concat(o,"-item-disabled"),N),e),i),w={className:c()("".concat(o,"-header"),(n={},(0,r.Z)(n,d,d),(0,r.Z)(n,"".concat(o,"-header-collapsible-only"),k),n)),"aria-expanded":p,"aria-disabled":N,onKeyPress:this.handleKeyPress};return k||(w.onClick=this.onItemClick,w.role=v?"tab":"button",w.tabIndex=N?-1:0),h.createElement("div",{className:Z,style:s,id:l},h.createElement("div",w,this.renderIcon(),this.renderTitle(),null!=x&&"boolean"!=typeof x&&h.createElement("div",{className:"".concat(o,"-extra")},x)),h.createElement(y.Z,(0,a.Z)({visible:p,leavedClassName:"".concat(o,"-content-hidden")},C,{forceRender:m,removeOnLeave:f}),function(e,n){var t=e.className,a=e.style;return h.createElement(g,{ref:n,prefixCls:o,className:t,style:a,isActive:p,forceRender:m,role:v?"tabpanel":null},u)}))}}]),t}(h.Component);function N(e){var n=e;if(!Array.isArray(n)){var t=(0,f.Z)(n);n="number"===t||"string"===t?[n]:[]}return n.map(function(e){return String(e)})}b.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var k=function(e){(0,u.Z)(t,e);var n=(0,p.Z)(t);function t(e){(0,o.Z)(this,t),(a=n.call(this,e)).onClickItem=function(e){var n=a.state.activeKey;if(a.props.accordion)n=n[0]===e?[]:[e];else{var t=(n=(0,s.Z)(n)).indexOf(e);t>-1?n.splice(t,1):n.push(e)}a.setActiveKey(n)},a.getNewChild=function(e,n){if(!e)return null;var t=a.state.activeKey,r=a.props,i=r.prefixCls,l=r.openMotion,c=r.accordion,s=r.destroyInactivePanel,o=r.expandIcon,d=r.collapsible,u=e.key||String(n),p=e.props,f=p.header,v=p.headerClass,m=p.destroyInactivePanel,C=p.collapsible,y=!1;y=c?t[0]===u:t.indexOf(u)>-1;var x=null!=C?C:d,g={key:u,panelKey:u,header:f,headerClass:v,isActive:y,prefixCls:i,destroyInactivePanel:null!=m?m:s,openMotion:l,accordion:c,children:e.props.children,onItemClick:"disabled"===x?null:a.onClickItem,expandIcon:o,collapsible:x};return"string"==typeof e.type?e:(Object.keys(g).forEach(function(e){void 0===g[e]&&delete g[e]}),h.cloneElement(e,g))},a.getItems=function(){var e=a.props.children;return(0,C.Z)(e).map(a.getNewChild)},a.setActiveKey=function(e){"activeKey"in a.props||a.setState({activeKey:e}),a.props.onChange(a.props.accordion?e[0]:e)};var a,r=e.activeKey,i=e.defaultActiveKey;return"activeKey"in e&&(i=r),a.state={activeKey:N(i)},a}return(0,d.Z)(t,[{key:"shouldComponentUpdate",value:function(e,n){return!m()(this.props,e)||!m()(this.state,n)}},{key:"render",value:function(){var e,n=this.props,t=n.prefixCls,a=n.className,i=n.style,l=n.accordion,s=c()((e={},(0,r.Z)(e,t,!0),(0,r.Z)(e,a,!!a),e));return h.createElement("div",{className:s,style:i,role:l?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var n={};return"activeKey"in e&&(n.activeKey=N(e.activeKey)),n}}]),t}(h.Component);k.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},k.Panel=b,k.Panel;var Z=t(98423),w=t(53124),j=t(33603),E=t(96159),P=function(e){var n=h.useContext(w.E_).getPrefixCls,t=e.prefixCls,i=e.className,l=e.showArrow,s=n("collapse",t),o=c()((0,r.Z)({},"".concat(s,"-no-arrow"),!(void 0===l||l)),void 0===i?"":i);return h.createElement(k.Panel,(0,a.Z)({},e,{prefixCls:s,className:o}))},I=function(e){var n,t,l=h.useContext(w.E_),s=l.getPrefixCls,o=l.direction,d=e.prefixCls,u=e.className,p=e.bordered,f=e.ghost,v=e.expandIconPosition,m=void 0===v?"start":v,y=s("collapse",d),x=h.useMemo(function(){return"left"===m?"start":"right"===m?"end":m},[m]),g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expandIcon,a=t?t(n):h.createElement(i.Z,{rotate:n.isActive?90:void 0});return(0,E.Tm)(a,function(){return{className:c()(a.props.className,"".concat(y,"-arrow"))}})},b=c()("".concat(y,"-icon-position-").concat(x),(t={},(0,r.Z)(t,"".concat(y,"-borderless"),!(void 0===p||p)),(0,r.Z)(t,"".concat(y,"-rtl"),"rtl"===o),(0,r.Z)(t,"".concat(y,"-ghost"),!!f),t),void 0===u?"":u),N=(0,a.Z)((0,a.Z)({},j.ZP),{motionAppear:!1,leavedClassName:"".concat(y,"-content-hidden")});return h.createElement(k,(0,a.Z)({openMotion:N},e,{expandIcon:g,prefixCls:y,className:b}),(n=e.children,(0,C.Z)(n).map(function(e,n){var t;if(null===(t=e.props)||void 0===t?void 0:t.disabled){var r=e.key||String(n),i=e.props,l=i.disabled,c=i.collapsible,s=(0,a.Z)((0,a.Z)({},(0,Z.Z)(e.props,["disabled"])),{key:r,collapsible:null!=c?c:l?"disabled":void 0});return(0,E.Tm)(e,s)}return e})))};I.Panel=P;var S=I},94594:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var a=t(87462),r=t(4942),i=t(50888),l=t(94184),c=t.n(l),s=t(97685),o=t(45987),d=t(67294),u=t(21770),p=t(15105),f=d.forwardRef(function(e,n){var t,a=e.prefixCls,i=void 0===a?"rc-switch":a,l=e.className,f=e.checked,h=e.defaultChecked,v=e.disabled,m=e.loadingIcon,C=e.checkedChildren,y=e.unCheckedChildren,x=e.onClick,g=e.onChange,b=e.onKeyDown,N=(0,o.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),k=(0,u.Z)(!1,{value:f,defaultValue:h}),Z=(0,s.Z)(k,2),w=Z[0],j=Z[1];function E(e,n){var t=w;return v||(j(t=e),null==g||g(t,n)),t}var P=c()(i,l,(t={},(0,r.Z)(t,"".concat(i,"-checked"),w),(0,r.Z)(t,"".concat(i,"-disabled"),v),t));return d.createElement("button",Object.assign({},N,{type:"button",role:"switch","aria-checked":w,disabled:v,className:P,ref:n,onKeyDown:function(e){e.which===p.Z.LEFT?E(!1,e):e.which===p.Z.RIGHT&&E(!0,e),null==b||b(e)},onClick:function(e){var n=E(!w,e);null==x||x(n,e)}}),m,d.createElement("span",{className:"".concat(i,"-inner")},w?C:y))});f.displayName="Switch";var h=t(53124),v=t(98866),m=t(97647),C=t(68349),y=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>n.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]]);return t},x=d.forwardRef(function(e,n){var t,l=e.prefixCls,s=e.size,o=e.disabled,u=e.loading,p=e.className,x=y(e,["prefixCls","size","disabled","loading","className"]),g=d.useContext(h.E_),b=g.getPrefixCls,N=g.direction,k=d.useContext(m.Z),Z=d.useContext(v.Z),w=b("switch",l),j=d.createElement("div",{className:"".concat(w,"-handle")},u&&d.createElement(i.Z,{className:"".concat(w,"-loading-icon")})),E=c()((t={},(0,r.Z)(t,"".concat(w,"-small"),"small"===(s||k)),(0,r.Z)(t,"".concat(w,"-loading"),u),(0,r.Z)(t,"".concat(w,"-rtl"),"rtl"===N),t),void 0===p?"":p);return d.createElement(C.Z,{insertExtraNode:!0},d.createElement(f,(0,a.Z)({},x,{prefixCls:w,className:E,disabled:o||Z||u,ref:n,loadingIcon:j})))});x.__ANT_SWITCH=!0;var g=x},79128:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-storage",function(){return t(51290)}])},73706:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var a=t(85893),r=t(67294),i=t(94594),l=t(41983),c=t(39664),s=t(90745),o=t(99519);let d=e=>{let{apiPath:n,checked:t,reversed:d=!1,configPath:u="",disabled:p=!1,fieldName:f,label:h,tip:v,useSubmit:m,onChange:C}=e,[y,x]=(0,r.useState)(null),g=null,b=(0,r.useContext)(o.aC),{setFieldInConfigState:N}=b||{},k=()=>{x(null),clearTimeout(g),g=null},Z=async e=>{if(m){x((0,l.kg)(l.Jk));let t=d?!e:e;await (0,s.Si)({apiPath:n,data:{value:t},onSuccess(){N({fieldName:f,value:t,path:u}),x((0,l.kg)(l.zv))},onError(e){x((0,l.kg)(l.Un,"There was an error: ".concat(e)))}}),g=setTimeout(k,s.sI)}C&&C(e)},w=null!==y&&y.type===l.Jk;return(0,a.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[h&&(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:h})}),(0,a.jsxs)("div",{className:"input-side",children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)(i.Z,{className:"switch field-".concat(f),loading:w,onChange:Z,defaultChecked:t,checked:t,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:p}),(0,a.jsx)(c.E,{status:y})]}),(0,a.jsx)("p",{className:"field-tip",children:v})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},51290:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var a=t(85893),r=t(84485),i=t(67294),l=t(54907),c=t(71577),s=t(94184),o=t.n(s),d=t(99519),u=t(82661),p=t(90745),f=t(41983),h=t(40117),v=t(39664),m=t(37174),C=t(73706);let{Panel:y}=l.Z,x=()=>{let[e,n]=(0,i.useState)(null),[t,r]=(0,i.useState)(null),[s,x]=(0,i.useState)(!1),g=(0,i.useContext)(d.aC),{serverConfig:b,setFieldInConfigState:N}=g||{},{setMessage:k}=(0,i.useContext)(u.k),{s3:Z}=b,{accessKey:w="",acl:j="",bucket:E="",enabled:P=!1,endpoint:I="",region:S="",secret:K="",servingEndpoint:O="",forcePathStyle:_=!1}=Z;if((0,i.useEffect)(()=>{n({accessKey:w,acl:j,bucket:E,enabled:P,endpoint:I,region:S,secret:K,servingEndpoint:O,forcePathStyle:_}),x(P)},[Z]),!e)return null;let A=()=>{r(null),clearTimeout(null)},T=t=>{let{fieldName:a,value:r}=t;n({...e,[a]:r})},z=async()=>{r((0,f.kg)(f.Jk)),await (0,p.Si)({apiPath:p.$w,data:{value:e},onSuccess(){N({fieldName:"s3",value:e,path:""}),r((0,f.kg)(f.zv,"Updated.")),setTimeout(A,p.sI),k("Changing your storage configuration will take place the next time you start a new stream.")},onError(e){r((0,f.kg)(f.Un,e)),setTimeout(A,p.sI)}})},R=e=>{x(e),T({fieldName:"enabled",value:e})},D=e=>{T({fieldName:"forcePathStyle",value:e})},M=o()({"edit-storage-container":!0,"form-module":!0,enabled:s}),U=function(e,n){let{endpoint:t,accessKey:a,secret:r,bucket:i,region:l,enabled:c,servingEndpoint:s,acl:o,forcePathStyle:d}=e;if(c){if(t&&(0,m.Z)(t)&&a&&r&&i&&l&&(c!==n.enabled||t!==n.endpoint||a!==n.accessKey||r!==n.secret||l!==n.region||!n.servingEndpoint&&""!==s||n.servingEndpoint&&s!==n.servingEndpoint||!n.acl&&""!==o||n.acl&&o!==n.acl||d!==n.forcePathStyle))return!0}else if(c!==n.enabled)return!0;return!1}(e,Z);return(0,a.jsxs)("div",{className:M,children:[(0,a.jsx)("div",{className:"enable-switch",children:(0,a.jsx)(C.Z,{apiPath:"",fieldName:"enabled",label:"Use S3 Storage Provider",checked:e.enabled,onChange:R})}),(0,a.jsxs)("div",{className:"form-fields",children:[(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.endpoint,value:e.endpoint,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.accessKey,value:e.accessKey,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.secret,value:e.secret,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.bucket,value:e.bucket,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.region,value:e.region,onChange:T})}),(0,a.jsx)(l.Z,{className:"advanced-section",children:(0,a.jsxs)(y,{header:"Optional Settings",children:[(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.acl,value:e.acl,onChange:T})}),(0,a.jsx)("div",{className:"field-container",children:(0,a.jsx)(h.nv,{...p.zm.servingEndpoint,value:e.servingEndpoint,onChange:T})}),(0,a.jsx)("div",{className:"enable-switch",children:(0,a.jsx)(C.Z,{...p.zm.forcePathStyle,fieldName:"forcePathStyle",checked:e.forcePathStyle,onChange:D})})]},"1")})]}),(0,a.jsxs)("div",{className:"button-container",children:[(0,a.jsx)(c.Z,{type:"primary",onClick:z,disabled:!U,children:"Save"}),(0,a.jsx)(v.E,{status:t})]})]})},{Title:g}=r.Z;function b(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{children:"Storage"}),(0,a.jsxs)("p",{className:"description",children:["Owncast supports optionally using external storage providers to stream your video. Learn more about this by visiting our"," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/storage/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Storage Documentation"}),"."]}),(0,a.jsx)("p",{className:"description",children:"Configuring this incorrectly will likely cause your video to be unplayable. Double check the documentation for your storage provider on how to configure the bucket you created for Owncast."}),(0,a.jsx)("p",{className:"description",children:"Keep in mind this is for live streaming, not for archival, recording or VOD purposes."}),(0,a.jsx)(x,{})]})}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=79128)}),_N_E=e.O()}]);