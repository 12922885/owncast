{"version":3,"file":"static/chunks/pages/admin/config-video-b5bdbd2a7f5355f0.js","mappings":"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","sources":["webpack://_N_E/?2729","webpack://_N_E/./components/admin/ToggleSwitch.tsx","webpack://_N_E/./components/admin/CodecSelector.tsx","webpack://_N_E/./components/admin/VideoLatency.tsx","webpack://_N_E/./components/admin/VideoVariantForm.tsx","webpack://_N_E/./components/admin/CurrentVariantsTable.tsx","webpack://_N_E/./pages/admin/config-video.tsx","webpack://_N_E/./utils/alert-message-context.tsx","webpack://_N_E/./utils/input-statuses.tsx","webpack://_N_E/./utils/server-status-context.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/config-video\",\n      function () {\n        return require(\"private-next-pages/admin/config-video.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/admin/config-video\"])\n      });\n    }\n  ","// This is a wrapper for the Ant Switch component.\n// This one is styled to match the form-textfield component.\n// If `useSubmit` is true then it will automatically post to the config API onChange.\n\nimport React, { useState, useContext, FC } from 'react';\nimport { Switch } from 'antd';\nimport {\n  createInputStatus,\n  StatusState,\n  STATUS_ERROR,\n  STATUS_PROCESSING,\n  STATUS_SUCCESS,\n} from '../../utils/input-statuses';\nimport { FormStatusIndicator } from './FormStatusIndicator';\n\nimport { RESET_TIMEOUT, postConfigUpdateToAPI } from '../../utils/config-constants';\nimport { ServerStatusContext } from '../../utils/server-status-context';\n\nexport type ToggleSwitchProps = {\n  fieldName: string;\n\n  apiPath?: string;\n  checked?: boolean;\n  reversed?: boolean;\n  configPath?: string;\n  disabled?: boolean;\n  label?: string;\n  tip?: string;\n  useSubmit?: boolean;\n  onChange?: (arg: boolean) => void;\n};\n\nexport const ToggleSwitch: FC<ToggleSwitchProps> = ({\n  apiPath,\n  checked,\n  reversed = false,\n  configPath = '',\n  disabled = false,\n  fieldName,\n  label,\n  tip,\n  useSubmit,\n  onChange,\n}) => {\n  const [submitStatus, setSubmitStatus] = useState<StatusState>(null);\n\n  let resetTimer = null;\n\n  const serverStatusData = useContext(ServerStatusContext);\n  const { setFieldInConfigState } = serverStatusData || {};\n\n  const resetStates = () => {\n    setSubmitStatus(null);\n    clearTimeout(resetTimer);\n    resetTimer = null;\n  };\n\n  const handleChange = async (isChecked: boolean) => {\n    if (useSubmit) {\n      setSubmitStatus(createInputStatus(STATUS_PROCESSING));\n      const isCheckedSend = reversed ? !isChecked : isChecked;\n\n      await postConfigUpdateToAPI({\n        apiPath,\n        data: { value: isCheckedSend },\n        onSuccess: () => {\n          setFieldInConfigState({ fieldName, value: isCheckedSend, path: configPath });\n          setSubmitStatus(createInputStatus(STATUS_SUCCESS));\n        },\n        onError: (message: string) => {\n          setSubmitStatus(createInputStatus(STATUS_ERROR, `There was an error: ${message}`));\n        },\n      });\n      resetTimer = setTimeout(resetStates, RESET_TIMEOUT);\n    }\n    if (onChange) {\n      onChange(isChecked);\n    }\n  };\n\n  const loading = submitStatus !== null && submitStatus.type === STATUS_PROCESSING;\n  return (\n    <div className=\"formfield-container toggleswitch-container\">\n      {label && (\n        <div className=\"label-side\">\n          <span className=\"formfield-label\">{label}</span>\n        </div>\n      )}\n\n      <div className=\"input-side\">\n        <div className=\"input-group\">\n          <Switch\n            className={`switch field-${fieldName}`}\n            loading={loading}\n            onChange={handleChange}\n            defaultChecked={checked}\n            checked={checked}\n            checkedChildren=\"ON\"\n            unCheckedChildren=\"OFF\"\n            disabled={disabled}\n          />\n          <FormStatusIndicator status={submitStatus} />\n        </div>\n        <p className=\"field-tip\">{tip}</p>\n      </div>\n    </div>\n  );\n};\nexport default ToggleSwitch;\n\nToggleSwitch.defaultProps = {\n  apiPath: '',\n  checked: false,\n  reversed: false,\n  configPath: '',\n  disabled: false,\n  label: '',\n  tip: '',\n  useSubmit: false,\n  onChange: null,\n};\n","import { Popconfirm, Select, Typography } from 'antd';\nimport React, { FC, useContext, useEffect, useState } from 'react';\nimport { AlertMessageContext } from '../../utils/alert-message-context';\nimport {\n  API_VIDEO_CODEC,\n  postConfigUpdateToAPI,\n  RESET_TIMEOUT,\n} from '../../utils/config-constants';\nimport {\n  createInputStatus,\n  StatusState,\n  STATUS_ERROR,\n  STATUS_SUCCESS,\n} from '../../utils/input-statuses';\nimport { ServerStatusContext } from '../../utils/server-status-context';\nimport { FormStatusIndicator } from './FormStatusIndicator';\n\nexport type CodecSelectorProps = {};\n\nexport const CodecSelector: FC<CodecSelectorProps> = () => {\n  const serverStatusData = useContext(ServerStatusContext);\n  const { serverConfig, setFieldInConfigState } = serverStatusData || {};\n  const { videoCodec, supportedCodecs } = serverConfig || {};\n  const { Title } = Typography;\n  const { Option } = Select;\n  const [submitStatus, setSubmitStatus] = useState<StatusState>(null);\n  const { setMessage } = useContext(AlertMessageContext);\n  const [selectedCodec, setSelectedCodec] = useState(videoCodec);\n  const [pendingSaveCodec, setPendingSavecodec] = useState(videoCodec);\n  const [confirmPopupOpen, setConfirmPopupOpen] = React.useState(false);\n\n  let resetTimer = null;\n\n  useEffect(() => {\n    setSelectedCodec(videoCodec);\n  }, [videoCodec]);\n\n  const resetStates = () => {\n    setSubmitStatus(null);\n    resetTimer = null;\n    clearTimeout(resetTimer);\n  };\n\n  function handleChange(value) {\n    setPendingSavecodec(value);\n    setConfirmPopupOpen(true);\n  }\n\n  async function save() {\n    setSelectedCodec(pendingSaveCodec);\n    setPendingSavecodec('');\n    setConfirmPopupOpen(false);\n\n    await postConfigUpdateToAPI({\n      apiPath: API_VIDEO_CODEC,\n      data: { value: pendingSaveCodec },\n      onSuccess: () => {\n        setFieldInConfigState({\n          fieldName: 'videoCodec',\n          value: pendingSaveCodec,\n          path: 'videoSettings',\n        });\n        setSubmitStatus(createInputStatus(STATUS_SUCCESS, 'Video codec updated.'));\n\n        resetTimer = setTimeout(resetStates, RESET_TIMEOUT);\n        if (serverStatusData.online) {\n          setMessage(\n            'Your latency buffer setting will take effect the next time you begin a live stream.',\n          );\n        }\n      },\n      onError: (message: string) => {\n        setSubmitStatus(createInputStatus(STATUS_ERROR, message));\n\n        resetTimer = setTimeout(resetStates, RESET_TIMEOUT);\n      },\n    });\n  }\n\n  const items = supportedCodecs.map(codec => {\n    let title = codec;\n    if (title === 'libx264') {\n      title = 'Default (libx264)';\n    } else if (title === 'h264_nvenc') {\n      title = 'NVIDIA GPU acceleration';\n    } else if (title === 'h264_vaapi') {\n      title = 'VA-API hardware encoding';\n    } else if (title === 'h264_qsv') {\n      title = 'Intel QuickSync';\n    } else if (title === 'h264_v4l2m2m') {\n      title = 'Video4Linux hardware encoding';\n    } else if (title === 'h264_omx') {\n      title = 'OpenMax (omx) for Raspberry Pi';\n    } else if (title === 'h264_videotoolbox') {\n      title = 'Apple VideoToolbox (hardware)';\n    }\n\n    return (\n      <Option key={codec} value={codec}>\n        {title}\n      </Option>\n    );\n  });\n\n  let description = '';\n  if (selectedCodec === 'libx264') {\n    description =\n      'libx264 is the default codec and generally the only working choice for shared VPS environments. This is likely what you should be using unless you know you have set up other options.';\n  } else if (selectedCodec === 'h264_nvenc') {\n    description =\n      'You can use your NVIDIA GPU for encoding if you have a modern NVIDIA card with encoding cores.';\n  } else if (selectedCodec === 'h264_vaapi') {\n    description =\n      'VA-API may be supported by your NVIDIA proprietary drivers, Mesa open-source drivers for AMD or Intel graphics.';\n  } else if (selectedCodec === 'h264_qsv') {\n    description =\n      \"Quick Sync Video is Intel's brand for its dedicated video encoding and decoding hardware. It may be an option if you have a modern Intel CPU with integrated graphics.\";\n  } else if (selectedCodec === 'h264_v4l2m2m') {\n    description =\n      'Video4Linux is an interface to multiple different hardware encoding platforms such as Intel and AMD.';\n  } else if (selectedCodec === 'h264_omx') {\n    description = 'OpenMax is a codec most often used with a Raspberry Pi.';\n  } else if (selectedCodec === 'h264_videotoolbox') {\n    description =\n      'Apple VideoToolbox is a low-level framework that provides direct access to hardware encoders and decoders.';\n  }\n\n  return (\n    <>\n      <Title level={3} className=\"section-title\">\n        Video Codec\n      </Title>\n      <div className=\"description\">\n        If you have access to specific hardware with the drivers and software installed for them,\n        you may be able to improve your video encoding performance.\n        <p>\n          <a\n            href=\"https://owncast.online/docs/codecs?source=admin\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Read the documentation about this setting before changing it or you may make your stream\n            unplayable.\n          </a>\n        </p>\n      </div>\n      <div className=\"segment-slider-container\">\n        <Popconfirm\n          title={`Are you sure you want to change your video codec to ${pendingSaveCodec} and understand what this means?`}\n          open={confirmPopupOpen}\n          placement=\"leftBottom\"\n          onConfirm={save}\n          onCancel={() => setConfirmPopupOpen(false)}\n          okText=\"Yes\"\n          cancelText=\"No\"\n        >\n          <Select\n            defaultValue={selectedCodec}\n            value={selectedCodec}\n            style={{ width: '100%' }}\n            onChange={handleChange}\n          >\n            {items}\n          </Select>\n        </Popconfirm>\n        <FormStatusIndicator status={submitStatus} />\n\n        <p id=\"selected-codec-note\" className=\"selected-value-note\">\n          {description}\n        </p>\n      </div>\n    </>\n  );\n};\n","import React, { useContext, useState, useEffect, FC } from 'react';\nimport { Typography, Slider } from 'antd';\nimport { ServerStatusContext } from '../../utils/server-status-context';\nimport { AlertMessageContext } from '../../utils/alert-message-context';\nimport {\n  API_VIDEO_SEGMENTS,\n  RESET_TIMEOUT,\n  postConfigUpdateToAPI,\n} from '../../utils/config-constants';\nimport {\n  createInputStatus,\n  StatusState,\n  STATUS_ERROR,\n  STATUS_PROCESSING,\n  STATUS_SUCCESS,\n} from '../../utils/input-statuses';\nimport { FormStatusIndicator } from './FormStatusIndicator';\n\nconst { Title } = Typography;\n\nconst SLIDER_MARKS = {\n  0: 'Lowest',\n  1: '',\n  2: '',\n  3: '',\n  4: 'Highest',\n};\n\nconst SLIDER_COMMENTS = {\n  0: 'Lowest latency, lowest error tolerance (Not recommended, may not work for all content/configurations.)',\n  1: 'Low latency, low error tolerance',\n  2: 'Medium latency, medium error tolerance (Default)',\n  3: 'High latency, high error tolerance',\n  4: 'Highest latency, highest error tolerance',\n};\n\n// eslint-disable-next-line import/prefer-default-export\nexport const VideoLatency: FC = () => {\n  const [submitStatus, setSubmitStatus] = useState<StatusState>(null);\n  const [selectedOption, setSelectedOption] = useState(null);\n\n  const serverStatusData = useContext(ServerStatusContext);\n  const { setMessage } = useContext(AlertMessageContext);\n  const { serverConfig, setFieldInConfigState } = serverStatusData || {};\n  const { videoSettings } = serverConfig || {};\n\n  let resetTimer = null;\n\n  if (!videoSettings) {\n    return null;\n  }\n\n  useEffect(() => {\n    setSelectedOption(videoSettings.latencyLevel);\n  }, [videoSettings]);\n\n  const resetStates = () => {\n    setSubmitStatus(null);\n    resetTimer = null;\n    clearTimeout(resetTimer);\n  };\n\n  // posts all the variants at once as an array obj\n  const postUpdateToAPI = async (postValue: any) => {\n    setSubmitStatus(createInputStatus(STATUS_PROCESSING));\n\n    await postConfigUpdateToAPI({\n      apiPath: API_VIDEO_SEGMENTS,\n      data: { value: postValue },\n      onSuccess: () => {\n        setFieldInConfigState({\n          fieldName: 'latencyLevel',\n          value: postValue,\n          path: 'videoSettings',\n        });\n        setSubmitStatus(createInputStatus(STATUS_SUCCESS, 'Latency buffer level updated.'));\n\n        resetTimer = setTimeout(resetStates, RESET_TIMEOUT);\n        if (serverStatusData.online) {\n          setMessage(\n            'Your latency buffer setting will take effect the next time you begin a live stream.',\n          );\n        }\n      },\n      onError: (message: string) => {\n        setSubmitStatus(createInputStatus(STATUS_ERROR, message));\n\n        resetTimer = setTimeout(resetStates, RESET_TIMEOUT);\n      },\n    });\n  };\n\n  const handleChange = value => {\n    postUpdateToAPI(value);\n  };\n\n  return (\n    <div className=\"config-video-latency-container\">\n      <Title level={3} className=\"section-title\">\n        Latency Buffer\n      </Title>\n      <p className=\"description\">\n        While it&apos;s natural to want to keep your latency as low as possible, you may experience\n        reduced error tolerance and stability the lower you go. The lowest setting is not\n        recommended.\n      </p>\n      <p className=\"description\">\n        For interactive live streams you may want to experiment with a lower latency, for\n        non-interactive broadcasts you may want to increase it.{' '}\n        <a\n          href=\"https://owncast.online/docs/encoding#latency-buffer?source=admin\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Read to learn more.\n        </a>\n      </p>\n\n      <div className=\"segment-slider-container\">\n        <Slider\n          tipFormatter={value => SLIDER_COMMENTS[value]}\n          onChange={handleChange}\n          min={0}\n          max={4}\n          marks={SLIDER_MARKS}\n          defaultValue={selectedOption}\n          value={selectedOption}\n        />\n        <p className=\"selected-value-note\">{SLIDER_COMMENTS[selectedOption]}</p>\n        <FormStatusIndicator status={submitStatus} />\n      </div>\n    </div>\n  );\n};\n","// This content populates the video variant modal, which is spawned from the variants table. This relies on the `dataState` prop fed in by the table.\nimport React, { FC } from 'react';\nimport { Popconfirm, Row, Col, Slider, Collapse, Typography, Alert, Button } from 'antd';\nimport { ExclamationCircleFilled } from '@ant-design/icons';\nimport classNames from 'classnames';\nimport { FieldUpdaterFunc, VideoVariant, UpdateArgs } from '../../types/config-section';\nimport { TextField } from './TextField';\nimport {\n  DEFAULT_VARIANT_STATE,\n  VIDEO_VARIANT_SETTING_DEFAULTS,\n  VIDEO_NAME_DEFAULTS,\n  ENCODER_PRESET_SLIDER_MARKS,\n  ENCODER_PRESET_TOOLTIPS,\n  VIDEO_BITRATE_DEFAULTS,\n  VIDEO_BITRATE_SLIDER_MARKS,\n  FRAMERATE_SLIDER_MARKS,\n  FRAMERATE_DEFAULTS,\n  FRAMERATE_TOOLTIPS,\n} from '../../utils/config-constants';\nimport { ToggleSwitch } from './ToggleSwitch';\n\nconst { Panel } = Collapse;\n\nexport type VideoVariantFormProps = {\n  dataState: VideoVariant;\n  onUpdateField: FieldUpdaterFunc;\n};\n\nexport const VideoVariantForm: FC<VideoVariantFormProps> = ({\n  dataState = DEFAULT_VARIANT_STATE,\n  onUpdateField,\n}) => {\n  const videoPassthroughEnabled = dataState.videoPassthrough;\n\n  const handleFramerateChange = (value: number) => {\n    onUpdateField({ fieldName: 'framerate', value });\n  };\n  const handleVideoBitrateChange = (value: number) => {\n    onUpdateField({ fieldName: 'videoBitrate', value });\n  };\n  const handleVideoCpuUsageLevelChange = (value: number) => {\n    onUpdateField({ fieldName: 'cpuUsageLevel', value });\n  };\n  const handleScaledWidthChanged = (args: UpdateArgs) => {\n    const value = Number(args.value);\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(value)) {\n      return;\n    }\n    onUpdateField({ fieldName: 'scaledWidth', value: value || 0 });\n  };\n  const handleScaledHeightChanged = (args: UpdateArgs) => {\n    const value = Number(args.value);\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(value)) {\n      return;\n    }\n    onUpdateField({ fieldName: 'scaledHeight', value: value || 0 });\n  };\n\n  // Video passthrough handling\n  const handleVideoPassConfirm = () => {\n    onUpdateField({ fieldName: 'videoPassthrough', value: true });\n  };\n  // If passthrough is currently on, set it back to false on toggle.\n  // Else let the Popconfirm turn it on.\n  const handleVideoPassthroughToggle = (value: boolean) => {\n    if (videoPassthroughEnabled) {\n      onUpdateField({ fieldName: 'videoPassthrough', value });\n    }\n  };\n\n  const handleNameChanged = (args: UpdateArgs) => {\n    onUpdateField({ fieldName: 'name', value: args.value });\n  };\n\n  // Slider notes\n  const selectedVideoBRnote = () => {\n    if (videoPassthroughEnabled) {\n      return 'Bitrate selection is disabled when Video Passthrough is enabled.';\n    }\n    let note = `${dataState.videoBitrate}${VIDEO_BITRATE_DEFAULTS.unit}`;\n    if (dataState.videoBitrate < 2000) {\n      note = `${note} - Good for low bandwidth environments.`;\n    } else if (dataState.videoBitrate < 3500) {\n      note = `${note} - Good for most bandwidth environments.`;\n    } else {\n      note = `${note} - Good for high bandwidth environments.`;\n    }\n    return note;\n  };\n  const selectedFramerateNote = () => {\n    if (videoPassthroughEnabled) {\n      return 'Framerate selection is disabled when Video Passthrough is enabled.';\n    }\n    return FRAMERATE_TOOLTIPS[dataState.framerate] || '';\n  };\n  const cpuUsageNote = () => {\n    if (videoPassthroughEnabled) {\n      return 'CPU usage selection is disabled when Video Passthrough is enabled.';\n    }\n    return ENCODER_PRESET_TOOLTIPS[dataState.cpuUsageLevel] || '';\n  };\n\n  const classes = classNames({\n    'config-variant-form': true,\n    'video-passthrough-enabled': videoPassthroughEnabled,\n  });\n  return (\n    <div className={classes}>\n      <div className=\"video-varient-alert\">\n        <Alert\n          type=\"info\"\n          action={\n            <a\n              href=\"https://owncast.online/docs/video?source=admin\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <div className=\"video-varient-alert-button-container\">\n                <Button size=\"small\" type=\"text\" icon={<ExclamationCircleFilled />}>\n                  Read more about how each of these settings can impact the performance of your\n                  server.\n                </Button>\n              </div>\n            </a>\n          }\n        />\n      </div>\n      {videoPassthroughEnabled && (\n        <p className=\"passthrough-warning\">\n          NOTE: Video Passthrough for this output stream variant is <em>enabled</em>, disabling the\n          below video encoding settings.\n        </p>\n      )}\n\n      <Row gutter={16}>\n        <Col xs={24} lg={{ span: 24, pull: 3 }} className=\"video-text-field-container\">\n          <TextField\n            maxLength=\"10\"\n            {...VIDEO_NAME_DEFAULTS}\n            value={dataState.name}\n            onChange={handleNameChanged}\n          />\n        </Col>\n        <Col sm={24} md={12}>\n          <div className=\"form-module cpu-usage-container\">\n            <Typography.Title level={3}>CPU or GPU Utilization</Typography.Title>\n            <p className=\"description\">\n              Reduce to improve server performance, or increase it to improve video quality.\n            </p>\n            <div className=\"segment-slider-container\">\n              <Slider\n                tipFormatter={value => ENCODER_PRESET_TOOLTIPS[value]}\n                onChange={handleVideoCpuUsageLevelChange}\n                min={1}\n                max={Object.keys(ENCODER_PRESET_SLIDER_MARKS).length}\n                marks={ENCODER_PRESET_SLIDER_MARKS}\n                defaultValue={dataState.cpuUsageLevel}\n                value={dataState.cpuUsageLevel}\n                disabled={dataState.videoPassthrough}\n              />\n              <p className=\"selected-value-note\">{cpuUsageNote()}</p>\n            </div>\n            <p className=\"read-more-subtext\">\n              This could mean GPU or CPU usage depending on your server environment.\n              <br />\n              <br />\n              <a\n                href=\"https://owncast.online/docs/video/?source=admin#cpu-usage\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Read more about hardware performance.\n              </a>\n            </p>\n          </div>\n        </Col>\n        <Col sm={24} md={11} offset={1}>\n          {/* VIDEO BITRATE FIELD */}\n          <div\n            className={`form-module bitrate-container ${\n              dataState.videoPassthrough ? 'disabled' : ''\n            }`}\n          >\n            <Typography.Title level={3}>Video Bitrate</Typography.Title>\n            <p className=\"description\">{VIDEO_BITRATE_DEFAULTS.tip}</p>\n            <div className=\"segment-slider-container\">\n              <Slider\n                tipFormatter={value => `${value} ${VIDEO_BITRATE_DEFAULTS.unit}`}\n                disabled={dataState.videoPassthrough}\n                defaultValue={dataState.videoBitrate}\n                value={dataState.videoBitrate}\n                onChange={handleVideoBitrateChange}\n                step={VIDEO_BITRATE_DEFAULTS.incrementBy}\n                min={VIDEO_BITRATE_DEFAULTS.min}\n                max={VIDEO_BITRATE_DEFAULTS.max}\n                marks={VIDEO_BITRATE_SLIDER_MARKS}\n              />\n              <p className=\"selected-value-note\">{selectedVideoBRnote()}</p>\n            </div>\n            <p className=\"read-more-subtext\">\n              <a\n                href=\"https://owncast.online/docs/video/?source=admin\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Read more about bitrates.\n              </a>\n            </p>\n          </div>\n        </Col>\n      </Row>\n      <Collapse className=\"advanced-settings\">\n        <Panel header=\"Advanced Settings\" key=\"1\">\n          <Row gutter={16}>\n            <Col sm={24} md={12}>\n              <div className=\"form-module resolution-module\">\n                <Typography.Title level={3}>Resolution</Typography.Title>\n                <p className=\"description\">\n                  Resizing your content will take additional resources on your server. If you wish\n                  to optionally resize your content for this stream output then you should either\n                  set the width <strong>or</strong> the height to keep your aspect ratio. <br />\n                  <br />\n                  <a\n                    href=\"https://owncast.online/docs/video/?source=admin\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    Read more about resolutions.\n                  </a>\n                </p>\n                <br />\n                <TextField\n                  type=\"number\"\n                  {...VIDEO_VARIANT_SETTING_DEFAULTS.scaledWidth}\n                  value={dataState.scaledWidth}\n                  onChange={handleScaledWidthChanged}\n                  disabled={dataState.videoPassthrough}\n                />\n                <TextField\n                  type=\"number\"\n                  {...VIDEO_VARIANT_SETTING_DEFAULTS.scaledHeight}\n                  value={dataState.scaledHeight}\n                  onChange={handleScaledHeightChanged}\n                  disabled={dataState.videoPassthrough}\n                />\n              </div>\n            </Col>\n            <Col sm={24} md={12}>\n              {/* VIDEO PASSTHROUGH FIELD */}\n              <div className=\"form-module video-passthrough-module\">\n                <Typography.Title level={3}>Video Passthrough</Typography.Title>\n                <div className=\"description\">\n                  <p>\n                    Enabling video passthrough may allow for less hardware utilization, but may also\n                    make your stream <strong>unplayable</strong>.\n                  </p>\n                  <p>\n                    All other settings for this stream output will be disabled if passthrough is\n                    used.\n                  </p>\n                  <p>\n                    <a\n                      href=\"https://owncast.online/docs/video/?source=admin#video-passthrough\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Read the documentation before enabling, as it impacts your stream.\n                    </a>\n                  </p>\n                </div>\n                <div className=\"advanced-switch-container\">\n                  <Popconfirm\n                    disabled={dataState.videoPassthrough === true}\n                    title=\"Did you read the documentation about video passthrough and understand the risks involved with enabling it?\"\n                    icon={<ExclamationCircleFilled />}\n                    onConfirm={handleVideoPassConfirm}\n                    okText=\"Yes\"\n                    cancelText=\"No\"\n                  >\n                    {/* adding an <a> tag to force Popcofirm to register click on toggle */}\n                    {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                    <a href=\"#\">\n                      <div className=\"advanced-description-switch-container\">\n                        <div className=\"advanced-description-wrapper\">\n                          <p>Use Video Passthrough?</p>\n                        </div>\n                        <ToggleSwitch\n                          label=\"\"\n                          fieldName=\"video-passthrough\"\n                          checked={dataState.videoPassthrough}\n                          onChange={handleVideoPassthroughToggle}\n                        />\n                      </div>\n                    </a>\n                    <p>*{VIDEO_VARIANT_SETTING_DEFAULTS.videoPassthrough.tip}</p>\n                  </Popconfirm>\n                </div>\n              </div>\n            </Col>\n          </Row>\n\n          {/* FRAME RATE FIELD */}\n          <div className=\"form-module frame-rate-module\">\n            <Typography.Title level={3}>Frame rate</Typography.Title>\n            <p className=\"description\">{FRAMERATE_DEFAULTS.tip}</p>\n            <div className=\"segment-slider-container\">\n              <Slider\n                tipFormatter={value => `${value} ${FRAMERATE_DEFAULTS.unit}`}\n                defaultValue={dataState.framerate}\n                value={dataState.framerate}\n                onChange={handleFramerateChange}\n                step={FRAMERATE_DEFAULTS.incrementBy}\n                min={FRAMERATE_DEFAULTS.min}\n                max={FRAMERATE_DEFAULTS.max}\n                marks={FRAMERATE_SLIDER_MARKS}\n                disabled={dataState.videoPassthrough}\n              />\n              <p className=\"selected-value-note\">{selectedFramerateNote()}</p>\n            </div>\n            <p className=\"read-more-subtext\">\n              <a\n                href=\"https://owncast.online/docs/video/?source=admin#framerate\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Read more about framerates.\n              </a>\n            </p>\n          </div>\n        </Panel>\n      </Collapse>\n    </div>\n  );\n};\n","// Updating a variant will post ALL the variants in an array as an update to the API.\n\nimport React, { FC, useContext, useState } from 'react';\nimport { Typography, Table, Modal, Button, Alert } from 'antd';\nimport { ColumnsType } from 'antd/lib/table';\nimport { DeleteOutlined } from '@ant-design/icons';\nimport { ServerStatusContext } from '../../utils/server-status-context';\nimport { AlertMessageContext } from '../../utils/alert-message-context';\nimport { UpdateArgs, VideoVariant } from '../../types/config-section';\n\nimport { VideoVariantForm } from './VideoVariantForm';\nimport {\n  API_VIDEO_VARIANTS,\n  DEFAULT_VARIANT_STATE,\n  RESET_TIMEOUT,\n  postConfigUpdateToAPI,\n  ENCODER_PRESET_TOOLTIPS,\n  ENCODER_RECOMMENDATION_THRESHOLD,\n} from '../../utils/config-constants';\nimport {\n  createInputStatus,\n  StatusState,\n  STATUS_ERROR,\n  STATUS_PROCESSING,\n  STATUS_SUCCESS,\n} from '../../utils/input-statuses';\nimport { FormStatusIndicator } from './FormStatusIndicator';\n\nconst { Title } = Typography;\n\n// eslint-disable-next-line import/prefer-default-export\nexport const CurrentVariantsTable: FC = () => {\n  const [displayModal, setDisplayModal] = useState(false);\n  const [modalProcessing, setModalProcessing] = useState(false);\n  const [editId, setEditId] = useState(0);\n  const { setMessage } = useContext(AlertMessageContext);\n\n  // current data inside modal\n  const [modalDataState, setModalDataState] = useState(DEFAULT_VARIANT_STATE);\n\n  const [submitStatus, setSubmitStatus] = useState<StatusState>(null);\n\n  const serverStatusData = useContext(ServerStatusContext);\n  const { serverConfig, setFieldInConfigState } = serverStatusData || {};\n  const { videoSettings } = serverConfig || {};\n  const { videoQualityVariants } = videoSettings || {};\n\n  let resetTimer = null;\n\n  if (!videoSettings) {\n    return null;\n  }\n\n  const resetStates = () => {\n    setSubmitStatus(null);\n    resetTimer = null;\n    clearTimeout(resetTimer);\n  };\n\n  const handleModalCancel = () => {\n    setDisplayModal(false);\n    setEditId(-1);\n    setModalDataState(DEFAULT_VARIANT_STATE);\n  };\n\n  // posts all the variants at once as an array obj\n  const postUpdateToAPI = async (postValue: any) => {\n    setSubmitStatus(createInputStatus(STATUS_PROCESSING));\n\n    await postConfigUpdateToAPI({\n      apiPath: API_VIDEO_VARIANTS,\n      data: { value: postValue },\n      onSuccess: () => {\n        setFieldInConfigState({\n          fieldName: 'videoQualityVariants',\n          value: postValue,\n          path: 'videoSettings',\n        });\n\n        // close modal\n        setModalProcessing(false);\n        handleModalCancel();\n\n        setSubmitStatus(createInputStatus(STATUS_SUCCESS, 'Variants updated'));\n        resetTimer = setTimeout(resetStates, RESET_TIMEOUT);\n\n        if (serverStatusData.online) {\n          setMessage(\n            'Updating your video configuration will take effect the next time you begin a new stream.',\n          );\n        }\n      },\n      onError: (message: string) => {\n        setSubmitStatus(createInputStatus(STATUS_ERROR, message));\n        setModalProcessing(false);\n        resetTimer = setTimeout(resetStates, RESET_TIMEOUT);\n      },\n    });\n  };\n\n  // on Ok, send all of dataState to api\n  // show loading\n  // close modal when api is done\n  const handleModalOk = () => {\n    setModalProcessing(true);\n\n    const postData = [...videoQualityVariants];\n    if (editId === -1) {\n      postData.push(modalDataState);\n    } else {\n      postData.splice(editId, 1, modalDataState);\n    }\n    postUpdateToAPI(postData);\n  };\n\n  const handleDeleteVariant = (index: number) => {\n    const postData = [...videoQualityVariants];\n    postData.splice(index, 1);\n    postUpdateToAPI(postData);\n  };\n\n  const handleUpdateField = ({ fieldName, value }: UpdateArgs) => {\n    setModalDataState({\n      ...modalDataState,\n      [fieldName]: value,\n    });\n  };\n\n  const videoQualityColumns: ColumnsType<VideoVariant> = [\n    {\n      title: 'Name',\n      dataIndex: 'name',\n      render: (name: string) => (!name ? 'No name' : name),\n    },\n    {\n      title: 'Video bitrate',\n      dataIndex: 'videoBitrate',\n      key: 'videoBitrate',\n      render: (bitrate: number, variant: VideoVariant) =>\n        !bitrate || variant.videoPassthrough ? 'Same as source' : `${bitrate} kbps`,\n    },\n\n    {\n      title: 'CPU Usage',\n      dataIndex: 'cpuUsageLevel',\n      key: 'cpuUsageLevel',\n      render: (level: string, variant: VideoVariant) =>\n        !level || variant.videoPassthrough ? 'n/a' : ENCODER_PRESET_TOOLTIPS[level].split(' ')[0],\n    },\n    {\n      title: '',\n      dataIndex: '',\n      key: 'edit',\n      render: ({ key }: VideoVariant) => {\n        const index = key - 1;\n        return (\n          <span className=\"actions\">\n            <Button\n              size=\"small\"\n              onClick={() => {\n                setEditId(index);\n                setModalDataState(videoQualityVariants[index]);\n                setDisplayModal(true);\n              }}\n            >\n              Edit\n            </Button>\n            <Button\n              className=\"delete-button\"\n              icon={<DeleteOutlined />}\n              size=\"small\"\n              disabled={videoQualityVariants.length === 1}\n              onClick={() => {\n                handleDeleteVariant(index);\n              }}\n            />\n          </span>\n        );\n      },\n    },\n  ];\n\n  const videoQualityVariantData = videoQualityVariants.map((variant, index) => ({\n    key: index + 1,\n    ...variant,\n  }));\n\n  const showSecondVariantRecommendation = (): boolean => {\n    if (videoQualityVariants.length !== 1) {\n      return false;\n    }\n\n    const [variant] = videoQualityVariants;\n\n    return (\n      ENCODER_RECOMMENDATION_THRESHOLD.VIDEO_HEIGHT <= variant.scaledHeight ||\n      ENCODER_RECOMMENDATION_THRESHOLD.VIDEO_BITRATE <= variant.videoBitrate\n    );\n  };\n\n  return (\n    <>\n      <Title level={3} className=\"section-title\">\n        Stream output\n      </Title>\n\n      {showSecondVariantRecommendation() && (\n        <Alert message={ENCODER_RECOMMENDATION_THRESHOLD.HELP_TEXT} type=\"info\" closable />\n      )}\n\n      <FormStatusIndicator status={submitStatus} />\n\n      <Table\n        className=\"variants-table\"\n        pagination={false}\n        size=\"small\"\n        columns={videoQualityColumns}\n        dataSource={videoQualityVariantData}\n      />\n\n      <Modal\n        title=\"Edit Video Variant Details\"\n        open={displayModal}\n        onOk={handleModalOk}\n        onCancel={handleModalCancel}\n        confirmLoading={modalProcessing}\n        width={900}\n      >\n        <VideoVariantForm dataState={{ ...modalDataState }} onUpdateField={handleUpdateField} />\n\n        <FormStatusIndicator status={submitStatus} />\n      </Modal>\n      <br />\n      <Button\n        type=\"primary\"\n        onClick={() => {\n          setEditId(-1);\n          setModalDataState(DEFAULT_VARIANT_STATE);\n          setDisplayModal(true);\n        }}\n      >\n        Add a new variant\n      </Button>\n    </>\n  );\n};\n","import { Col, Collapse, Row, Typography } from 'antd';\nimport React from 'react';\nimport { CodecSelector as VideoCodecSelector } from '../../components/admin/CodecSelector';\nimport { VideoLatency } from '../../components/admin/VideoLatency';\nimport { CurrentVariantsTable } from '../../components/admin/CurrentVariantsTable';\n\nconst { Panel } = Collapse;\nconst { Title } = Typography;\n\nexport default function ConfigVideoSettings() {\n  return (\n    <div className=\"config-video-variants\">\n      <Title>Video configuration</Title>\n      <p className=\"description\">\n        Before changing your video configuration{' '}\n        <a\n          href=\"https://owncast.online/docs/video?source=admin\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          visit the video documentation\n        </a>{' '}\n        to learn how it impacts your stream performance. The general rule is to start conservatively\n        by having one middle quality stream output variant and experiment with adding more of varied\n        qualities.\n      </p>\n\n      <Row gutter={[16, 16]}>\n        <Col md={24} lg={12}>\n          <div className=\"form-module variants-table-module\">\n            <CurrentVariantsTable />\n          </div>\n        </Col>\n        <Col md={24} lg={12}>\n          <div className=\"form-module latency-module\">\n            <VideoLatency />\n          </div>\n\n          <Collapse className=\"advanced-settings codec-module\">\n            <Panel header=\"Advanced Settings\" key=\"1\">\n              <div className=\"form-module variants-table-module\">\n                <VideoCodecSelector />\n              </div>\n            </Panel>\n          </Collapse>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nexport const AlertMessageContext = React.createContext({\n  message: null,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  setMessage: (text?: string) => null,\n});\n\nconst AlertMessageProvider = ({ children }) => {\n  const [message, setMessage] = useState('');\n\n  const providerValue = {\n    message,\n    setMessage,\n  };\n  return (\n    <AlertMessageContext.Provider value={providerValue}>{children}</AlertMessageContext.Provider>\n  );\n};\n\nAlertMessageProvider.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n\nexport default AlertMessageProvider;\n","import {\n  CheckCircleFilled,\n  ExclamationCircleFilled,\n  LoadingOutlined,\n  WarningOutlined,\n} from '@ant-design/icons';\n\nexport const STATUS_RESET_TIMEOUT = 3000;\n\nexport const STATUS_ERROR = 'error';\nexport const STATUS_INVALID = 'invalid';\nexport const STATUS_PROCESSING = 'proessing';\nexport const STATUS_SUCCESS = 'success';\nexport const STATUS_WARNING = 'warning';\n\nexport type InputStatusTypes = 'error' | 'invalid' | 'proessing' | 'success' | 'warning';\n\nexport interface StatusState {\n  type: InputStatusTypes;\n  icon: any; // Element type of sorts?\n  message: string;\n}\ninterface InputStates {\n  [key: string]: StatusState;\n}\n\nexport const INPUT_STATES: InputStates = {\n  [STATUS_SUCCESS]: {\n    type: STATUS_SUCCESS,\n    icon: <CheckCircleFilled style={{ color: 'green' }} />,\n    message: 'Success!',\n  },\n  [STATUS_ERROR]: {\n    type: STATUS_ERROR,\n    icon: <ExclamationCircleFilled style={{ color: 'red' }} />,\n    message: 'An error occurred.',\n  },\n  [STATUS_INVALID]: {\n    type: STATUS_INVALID,\n    icon: <ExclamationCircleFilled style={{ color: 'red' }} />,\n    message: 'An error occurred.',\n  },\n  [STATUS_PROCESSING]: {\n    type: STATUS_PROCESSING,\n    icon: <LoadingOutlined />,\n    message: '',\n  },\n  [STATUS_WARNING]: {\n    type: STATUS_WARNING,\n    icon: <WarningOutlined style={{ color: '#fc0' }} />,\n    message: '',\n  },\n};\n\n// Don't like any of the default messages in INPUT_STATES? Create a state with custom message by providing an icon style with your message.\nexport function createInputStatus(type: InputStatusTypes, message?: string): StatusState {\n  if (!type || !INPUT_STATES[type]) {\n    return null;\n  }\n  if (!message) {\n    return INPUT_STATES[type];\n  }\n  return {\n    type,\n    icon: INPUT_STATES[type].icon,\n    message,\n  };\n}\n","// TODO: add a notication after updating info that changes will take place either on a new stream or server restart. may be different for each field.\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { STATUS, fetchData, FETCH_INTERVAL, SERVER_CONFIG } from './apis';\nimport { ConfigDetails, UpdateArgs } from '../types/config-section';\nimport { DEFAULT_VARIANT_STATE } from './config-constants';\n\nexport const initialServerConfigState: ConfigDetails = {\n  streamKeys: [],\n  adminPassword: '',\n  instanceDetails: {\n    customStyles: '',\n    extraPageContent: '',\n    logo: '',\n    name: '',\n    nsfw: false,\n    socialHandles: [],\n    streamTitle: '',\n    summary: '',\n    tags: [],\n    title: '',\n    welcomeMessage: '',\n    offlineMessage: '',\n    appearanceVariables: {},\n  },\n  ffmpegPath: '',\n  rtmpServerPort: '',\n  webServerPort: '',\n  socketHostOverride: null,\n  s3: {\n    accessKey: '',\n    acl: '',\n    bucket: '',\n    enabled: false,\n    endpoint: '',\n    region: '',\n    secret: '',\n    servingEndpoint: '',\n    forcePathStyle: false,\n  },\n  yp: {\n    enabled: false,\n    instanceUrl: '',\n  },\n  videoSettings: {\n    latencyLevel: 4,\n    cpuUsageLevel: 3,\n    videoQualityVariants: [DEFAULT_VARIANT_STATE],\n  },\n  federation: {\n    enabled: false,\n    isPrivate: false,\n    username: '',\n    goLiveMessage: '',\n    showEngagement: true,\n    blockedDomains: [],\n  },\n  notifications: {\n    browser: { enabled: false, goLiveMessage: '' },\n    discord: { enabled: false, webhook: '', goLiveMessage: '' },\n    twitter: {\n      enabled: false,\n      goLiveMessage: '',\n      apiKey: '',\n      apiSecret: '',\n      accessToken: '',\n      accessTokenSecret: '',\n      bearerToken: '',\n    },\n  },\n  externalActions: [],\n  supportedCodecs: [],\n  videoCodec: '',\n  forbiddenUsernames: [],\n  suggestedUsernames: [],\n  chatDisabled: false,\n  chatJoinMessagesEnabled: true,\n  chatEstablishedUserMode: false,\n  hideViewerCount: false,\n};\n\nconst initialServerStatusState = {\n  broadcastActive: false,\n  broadcaster: null,\n  currentBroadcast: null,\n  online: false,\n  viewerCount: 0,\n  sessionMaxViewerCount: 0,\n  sessionPeakViewerCount: 0,\n  overallPeakViewerCount: 0,\n  versionNumber: '0.0.0',\n  streamTitle: '',\n  chatDisabled: false,\n  health: {\n    healthy: true,\n    healthPercentage: 100,\n    message: '',\n    representation: 0,\n  },\n};\n\nexport const ServerStatusContext = React.createContext({\n  ...initialServerStatusState,\n  serverConfig: initialServerConfigState,\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  setFieldInConfigState: (args: UpdateArgs) => null,\n});\n\nconst ServerStatusProvider = ({ children }) => {\n  const [status, setStatus] = useState(initialServerStatusState);\n  const [config, setConfig] = useState(initialServerConfigState);\n\n  const getStatus = async () => {\n    try {\n      const result = await fetchData(STATUS);\n      setStatus({ ...result });\n    } catch (error) {\n      // todo\n    }\n  };\n  const getConfig = async () => {\n    try {\n      const result = await fetchData(SERVER_CONFIG);\n      setConfig(result);\n    } catch (error) {\n      // todo\n    }\n  };\n\n  const setFieldInConfigState = ({ fieldName, value, path }: UpdateArgs) => {\n    const updatedConfig = path\n      ? {\n          ...config,\n          [path]: {\n            ...config[path],\n            [fieldName]: value,\n          },\n        }\n      : {\n          ...config,\n          [fieldName]: value,\n        };\n    setConfig(updatedConfig);\n  };\n\n  useEffect(() => {\n    let getStatusIntervalId = null;\n\n    getStatus();\n    getStatusIntervalId = setInterval(getStatus, FETCH_INTERVAL);\n\n    getConfig();\n\n    // returned function will be called on component unmount\n    return () => {\n      clearInterval(getStatusIntervalId);\n    };\n  }, []);\n\n  // eslint-disable-next-line react/jsx-no-constructed-context-values\n  const providerValue = {\n    ...status,\n    serverConfig: config,\n\n    setFieldInConfigState,\n  };\n  return (\n    <ServerStatusContext.Provider value={providerValue}>{children}</ServerStatusContext.Provider>\n  );\n};\n\nServerStatusProvider.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n\nexport default ServerStatusProvider;\n"],"names":["window","__NEXT_P","push","ToggleSwitch","apiPath","checked","reversed","configPath","disabled","fieldName","label","tip","useSubmit","onChange","submitStatus","setSubmitStatus","useState","resetTimer","serverStatusData","useContext","ServerStatusContext","setFieldInConfigState","resetStates","clearTimeout","loading","type","STATUS_PROCESSING","div","className","span","Switch","async","isChecked","createInputStatus","isCheckedSend","postConfigUpdateToAPI","data","value","onSuccess","path","STATUS_SUCCESS","onError","message","STATUS_ERROR","setTimeout","RESET_TIMEOUT","defaultChecked","checkedChildren","unCheckedChildren","FormStatusIndicator","status","p","defaultProps","CodecSelector","serverConfig","videoCodec","supportedCodecs","Title","Typography","Option","Select","setMessage","AlertMessageContext","selectedCodec","setSelectedCodec","pendingSaveCodec","setPendingSavecodec","confirmPopupOpen","setConfirmPopupOpen","React","useEffect","items","map","codec","title","description","level","a","href","target","rel","Popconfirm","open","placement","onConfirm","API_VIDEO_CODEC","online","onCancel","okText","cancelText","defaultValue","style","width","id","SLIDER_MARKS","SLIDER_COMMENTS","VideoLatency","selectedOption","setSelectedOption","videoSettings","latencyLevel","Slider","tipFormatter","postValue","API_VIDEO_SEGMENTS","postUpdateToAPI","min","max","marks","Panel","Collapse","VideoVariantForm","dataState","DEFAULT_VARIANT_STATE","onUpdateField","videoPassthroughEnabled","videoPassthrough","classes","classNames","Alert","action","Button","size","icon","ExclamationCircleFilled","em","Row","gutter","Col","xs","lg","pull","TextField","maxLength","VIDEO_NAME_DEFAULTS","name","args","sm","md","ENCODER_PRESET_TOOLTIPS","Object","keys","ENCODER_PRESET_SLIDER_MARKS","length","cpuUsageLevel","br","offset","VIDEO_BITRATE_DEFAULTS","videoBitrate","step","VIDEO_BITRATE_SLIDER_MARKS","note","selectedVideoBRnote","header","strong","VIDEO_VARIANT_SETTING_DEFAULTS","scaledWidth","Number","isNaN","scaledHeight","FRAMERATE_DEFAULTS","framerate","FRAMERATE_SLIDER_MARKS","FRAMERATE_TOOLTIPS","CurrentVariantsTable","displayModal","setDisplayModal","modalProcessing","setModalProcessing","editId","setEditId","modalDataState","setModalDataState","videoQualityVariants","handleModalCancel","API_VIDEO_VARIANTS","videoQualityColumns","dataIndex","render","key","bitrate","variant","split","index","onClick","DeleteOutlined","postData","splice","handleDeleteVariant","videoQualityVariantData","ENCODER_RECOMMENDATION_THRESHOLD","showSecondVariantRecommendation","closable","Table","pagination","columns","dataSource","Modal","onOk","confirmLoading","ConfigVideoSettings","VideoCodecSelector","text","AlertMessageProvider","children","providerValue","Provider","propTypes","PropTypes","STATUS_INVALID","STATUS_WARNING","INPUT_STATES","CheckCircleFilled","color","LoadingOutlined","WarningOutlined","initialServerConfigState","streamKeys","adminPassword","instanceDetails","customStyles","extraPageContent","logo","nsfw","socialHandles","streamTitle","summary","tags","welcomeMessage","offlineMessage","appearanceVariables","ffmpegPath","rtmpServerPort","webServerPort","socketHostOverride","s3","accessKey","acl","bucket","enabled","endpoint","region","secret","servingEndpoint","forcePathStyle","yp","instanceUrl","federation","isPrivate","username","goLiveMessage","showEngagement","blockedDomains","notifications","browser","discord","webhook","twitter","apiKey","apiSecret","accessToken","accessTokenSecret","bearerToken","externalActions","forbiddenUsernames","suggestedUsernames","chatDisabled","chatJoinMessagesEnabled","chatEstablishedUserMode","hideViewerCount","initialServerStatusState","broadcastActive","broadcaster","currentBroadcast","viewerCount","sessionMaxViewerCount","sessionPeakViewerCount","overallPeakViewerCount","versionNumber","health","healthy","healthPercentage","representation","ServerStatusProvider","setStatus","config","setConfig","getStatus","result","fetchData","STATUS","error","getStatusIntervalId","setInterval","FETCH_INTERVAL","SERVER_CONFIG","getConfig","clearInterval","updatedConfig"],"sourceRoot":""}