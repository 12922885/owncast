(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{48689:function(e,l,a){"use strict";a.d(l,{Z:function(){return o}});var s=a(1413),t=a(67294),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=a(42135),c=function(e,l){return t.createElement(i.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:l,icon:n}))};c.displayName="DeleteOutlined";var o=t.forwardRef(c)},81009:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return a(87945)}])},49817:function(e,l,a){"use strict";a.d(l,{Z:function(){return Z}});var s=a(85893),t=a(67294),n=a(6880),i=a(71577),c=a(69677),o=a(48213),r=a(85402),d=a(10010),u=a(39398),m=a(48689),h=a(34041),p=a(90745);let f=e=>{let{iconList:l,selectedOption:a,onSelected:t}=e,n=e=>{t&&t(e)},i=""===a?null:a;return(0,s.jsxs)("div",{className:"social-dropdown-container",children:[(0,s.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,s.jsxs)("div",{className:"formfield-container",children:[(0,s.jsx)("div",{className:"label-side",children:(0,s.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,s.jsx)("div",{className:"input-side",children:(0,s.jsxs)(h.Z,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:i,value:i,onSelect:n,children:[l.map(e=>{let{platform:l,icon:a,key:t}=e;return(0,s.jsxs)(h.Z.Option,{className:"social-option",value:t,children:[(0,s.jsx)("span",{className:"option-icon",children:(0,s.jsx)("img",{src:a,alt:"",className:"option-icon"})}),(0,s.jsx)("span",{className:"option-label",children:l})]},"platform-".concat(t))}),(0,s.jsx)(h.Z.Option,{className:"social-option",value:p.z_,children:"Other..."},"platform-".concat(p.z_))]})})]})]})};var x=a(64777),j=a(99519),v=a(37174),N=a(79139),g=a(41983),k=a(73615);let{Title:w}=n.Z;function Z(){var e,l;let[a,n]=(0,t.useState)([]),[h,Z]=(0,t.useState)([]),[y,b]=(0,t.useState)(!1),[S,_]=(0,t.useState)(!1),[C,z]=(0,t.useState)(!1),[E,O]=(0,t.useState)(-1),[H,T]=(0,t.useState)(p.wC),[I,P]=(0,t.useState)(null),L=(0,t.useContext)(j.aC),{serverConfig:A,setFieldInConfigState:U}=L||{},{instanceDetails:B}=A,{socialHandles:D}=B,K=async()=>{try{let e=await (0,x.rQ)(x.$i,{auth:!1}),l=Object.keys(e).map(l=>({key:l,...e[l]}));n(l)}catch(a){console.log(a)}},M=e=>a.find(l=>l.key===e)||!1,R=""!==H.platform&&!a.find(e=>e.key===H.platform);(0,t.useEffect)(()=>{K()},[]),(0,t.useEffect)(()=>{B.socialHandles&&Z(D)},[B]);let V=()=>{P(null),clearTimeout(null)},X=()=>{b(!1),O(-1),_(!1),z(!1),T({...p.wC})},Q=()=>{X()},Y=(e,l)=>{T({...H,[e]:l})},$=e=>{e===p.z_?(_(!0),Y("platform","")):(_(!1),Y("platform",e))},q=e=>{let{value:l}=e.target;Y("platform",l)},F=e=>{let{value:l}=e;Y("url",l)},G=async e=>{await (0,p.Si)({apiPath:p.c9,data:{value:e},onSuccess:()=>{U({fieldName:"socialHandles",value:e,path:"instanceDetails"}),z(!1),Q(),P((0,g.kg)(g.zv)),setTimeout(V,p.sI)},onError:e=>{P((0,g.kg)(g.Un,"There was an error: ".concat(e))),z(!1),setTimeout(V,p.sI)}})},J=()=>{z(!0);let e=h.length?[...h]:[];-1===E?e.push(H):e.splice(E,1,H),G(e)},W=e=>{let l=[...h];l.splice(e,1),G(l)},ee=e=>{if(e<=0||e>=h.length)return;let l=[...h],a=l[e-1];l[e-1]=l[e],l[e]=a,G(l)},el=e=>{if(e<0||e>=h.length-1)return;let l=[...h],a=l[e+1];l[e+1]=l[e],l[e]=a,G(l)},ea={disabled:(e=H.url,"xmpp"===(l=H.platform)?!(0,v.Kf)(e,"xmpp"):"matrix"===l?!(0,v.bu)(e):!(0,v.jv)(e))},es=(0,s.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,s.jsx)("div",{className:"label-side"}),(0,s.jsx)("div",{className:"input-side",children:(0,s.jsx)(c.Z,{placeholder:"Other platform name",defaultValue:H.platform,onChange:q})})]});return(0,s.jsxs)("div",{className:"social-links-edit-container",children:[(0,s.jsx)(w,{level:3,className:"section-title",children:"Your Social Handles"}),(0,s.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,s.jsx)(k.E,{status:I}),(0,s.jsx)(o.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:[{title:"Social Link",dataIndex:"",key:"combo",render:(e,l)=>{let{platform:a,url:t}=l,n=M(a);if(!n)return(0,s.jsx)("div",{className:"social-handle-cell",children:(0,s.jsxs)("p",{className:"option-label",children:[(0,s.jsx)("strong",{children:a}),(0,s.jsx)("span",{className:"handle-url",title:t,children:t})]})});let{icon:i,platform:c}=n;return(0,s.jsxs)("div",{className:"social-handle-cell",children:[(0,s.jsx)("span",{className:"option-icon",children:(0,s.jsx)("img",{src:i,alt:"",className:"option-icon"})}),(0,s.jsxs)("p",{className:"option-label",children:[(0,s.jsx)("strong",{children:c}),(0,s.jsx)("span",{className:"handle-url",title:t,children:t})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,l,a)=>(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)(i.Z,{size:"small",onClick:()=>{let e=h[a];O(a),T({...e}),b(!0),M(e.platform)||_(!0)},children:"Edit"}),(0,s.jsx)(i.Z,{icon:(0,s.jsx)(d.Z,{}),size:"small",hidden:0===a,onClick:()=>ee(a)}),(0,s.jsx)(i.Z,{icon:(0,s.jsx)(u.Z,{}),size:"small",hidden:a===h.length-1,onClick:()=>el(a)}),(0,s.jsx)(i.Z,{className:"delete-button",icon:(0,s.jsx)(m.Z,{}),size:"small",onClick:()=>W(a)})]})}],dataSource:h}),(0,s.jsx)(r.Z,{title:"Edit Social Handle",open:y,onOk:J,onCancel:Q,confirmLoading:C,okButtonProps:ea,children:(0,s.jsxs)("div",{className:"social-handle-modal-content",children:[(0,s.jsx)(f,{iconList:a,selectedOption:R?p.z_:H.platform,onSelected:$}),S&&es,(0,s.jsx)("br",{}),(0,s.jsx)(N.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[H.platform]||"Url to page",value:H.url,onChange:F,useTrim:!0,type:"url",pattern:v.ax}),(0,s.jsx)(k.E,{status:I})]})}),(0,s.jsx)("br",{}),(0,s.jsx)(i.Z,{type:"primary",onClick:()=>{X(),b(!0)},children:"Add a new social link"})]})}},87945:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return c}});var s=a(85893);a(67294);var t=a(6880),n=a(49817);let{Title:i}=t.Z;function c(){return(0,s.jsxs)("div",{className:"config-social-items",children:[(0,s.jsx)(i,{children:"Social Items"}),(0,s.jsx)(n.Z,{})]})}}},function(e){e.O(0,[6880,6386,3698,3013,8213,1382,9774,2888,179],function(){return e(e.s=81009)}),_N_E=e.O()}]);
//# sourceMappingURL=config-social-items-536b0c598ad259e0.js.map